---
id: hooks-faq
title: "–•—É–∫–∏: –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã"
permalink: docs/hooks-faq.html
prev: hooks-reference.html
---

*–•—É–∫–∏* ‚Äî –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏–µ –≤ React 16.8, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –¥—Ä—É–≥–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ React –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤.

–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—ã –Ω–∞–π–¥—ë—Ç–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ [—Ö—É–∫–∞—Ö](/docs/hooks-overview.html).

<!--
  if you ever need to regenerate this, this snippet in the devtools console might help:

  $$('.anchor').map(a =>
    `${' '.repeat(2 * +a.parentNode.nodeName.slice(1))}` +
    `[${a.parentNode.textContent}](${a.getAttribute('href')})`
  ).join('\n')
-->

* [–í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Ö—É–∫–æ–≤](#adoption-strategy)
  * [–í –∫–∞–∫–æ–π –≤–µ—Ä—Å–∏–∏ React –ø–æ—è–≤–∏–ª–∏—Å—å —Ö—É–∫–∏?](#which-versions-of-react-include-hooks)
  * [–ù—É–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≤—Å–µ –º–æ–∏ –∫–ª–∞—Å—Å–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã?](#do-i-need-to-rewrite-all-my-class-components)
  * [–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Ö—É–∫–æ–≤, —á–µ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∏—Ç—å—Å—è, –∏—Å–ø–æ–ª—å–∑—É—è –∫–ª–∞—Å—Å—ã?](#what-can-i-do-with-hooks-that-i-couldnt-with-classes)
  * [–ö–∞–∫–∞—è —á–∞—Å—Ç—å –º–æ–∏—Ö –∑–Ω–∞–Ω–∏–π –æ React –≤—Å—ë –µ—â—ë –∞–∫—Ç—É–∞–ª—å–Ω–∞?](#how-much-of-my-react-knowledge-stays-relevant)
  * [–ß—Ç–æ –º–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: —Ö—É–∫–∏, –∫–ª–∞—Å—Å—ã –∏–ª–∏ –æ–±–∞ –ø–æ–¥—Ö–æ–¥–∞?](#should-i-use-hooks-classes-or-a-mix-of-both)
  * [–î–∞—é—Ç –ª–∏ —Ö—É–∫–∏ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Å–æ–≤?](#do-hooks-cover-all-use-cases-for-classes)
  * [–Ø–≤–ª—è—é—Ç—Å—è –ª–∏ —Ö—É–∫–∏ –∑–∞–º–µ–Ω–æ–π —Ä–µ–Ω–¥–µ—Ä-–ø—Ä–æ–ø—Å–∞–º –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞?](#do-hooks-replace-render-props-and-higher-order-components)
  * [–ö–∞–∫ —Ö—É–∫–∏ –ø–æ–≤–ª–∏—è—é—Ç –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ API, —Ç–∞–∫–∏–µ –∫–∞–∫ Redux `connect()` –∏ React Router?](#what-do-hooks-mean-for-popular-apis-like-redux-connect-and-react-router)
  * [–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ª–∏ —Ö—É–∫–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é?](#do-hooks-work-with-static-typing)
  * [–ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ö—É–∫–∏?](#how-to-test-components-that-use-hooks)
  * [–ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∞–≤–∏–ª–∞ –ª–∏–Ω—Ç–µ—Ä–∞ –≤ —Ö—É–∫–∞—Ö?](#what-exactly-do-the-lint-rules-enforce)
* [–û—Ç –∫–ª–∞—Å—Å–æ–≤ –∫ —Ö—É–∫–∞–º](#from-classes-to-hooks)
  * [–ö–∞–∫ –º–µ—Ç–æ–¥—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ö—É–∫–∞–º?](#how-do-lifecycle-methods-correspond-to-hooks)
  * [–ö–∞–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é —Ö—É–∫–æ–≤?](#how-can-i-do-data-fetching-with-hooks)
  * [–°—É—â–µ—Å—Ç–≤—É–µ—Ç —á—Ç–æ-–Ω–∏–±—É–¥—å –Ω–∞–ø–æ–¥–æ–±–∏–µ –ø–æ–ª–µ–π —ç–∫–∑–µ–º–ø–ª—è—Ä–∞?](#is-there-something-like-instance-variables)
  * [–°–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è —è –º–æ–≥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ‚Äì –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ?](#should-i-use-one-or-many-state-variables)
  * [–ú–æ–≥—É –ª–∏ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞?](#can-i-run-an-effect-only-on-updates)
  * [–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø—Ä–æ–ø—Å—ã –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ?](#how-to-get-the-previous-props-or-state)
  * [–ü–æ—á–µ–º—É —è –≤–∏–∂—É —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø—Ä–æ–ø—Å—ã –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –º–æ–µ–π —Ñ—É–Ω–∫—Ü–∏–∏?](#why-am-i-seeing-stale-props-or-state-inside-my-function)
  * [–ö–∞–∫ —è –º–æ–≥—É —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `getDerivedStateFromProps`?](#how-do-i-implement-getderivedstatefromprops)
  * [–°—É—â–µ—Å—Ç–≤—É–µ—Ç —á—Ç–æ-–Ω–∏–±—É–¥—å –Ω–∞–ø–æ–¥–æ–±–∏–µ forceUpdate?](#is-there-something-like-forceupdate)
  * [–ú–æ–≥—É –ª–∏ —è –∏–∑–º–µ–Ω–∏—Ç—å —Ä–µ—Ñ, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç?](#can-i-make-a-ref-to-a-function-component)
  * [–ö–∞–∫ —è –º–æ–≥—É –∏–∑–º–µ—Ä–∏—Ç—å —É–∑–µ–ª DOM?](#how-can-i-measure-a-dom-node)
  * [–ß—Ç–æ –∑–Ω–∞—á–∏—Ç `const [thing, setThing] = useState()`?](#what-does-const-thing-setthing--usestate-mean)
* [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#performance-optimizations)
  * [–ú–æ–≥—É –ª–∏ —è –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö?](#can-i-skip-an-effect-on-updates)
  * [–ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Å–ø–∏—Å–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π?](#is-it-safe-to-omit-functions-from-the-list-of-dependencies)
  * [–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ?](#what-can-i-do-if-my-effect-dependencies-change-too-often)
  * [–ö–∞–∫ —è –º–æ–≥—É —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `shouldComponentUpdate`?](#how-do-i-implement-shouldcomponentupdate)
  * [–ö–∞–∫ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è?](#how-to-memoize-calculations)
  * [–ö–∞–∫ –ª–µ–Ω–∏–≤–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–∫—Ç—ã?](#how-to-create-expensive-objects-lazily)
  * [–Ø–≤–ª—è—é—Ç—Å—è –ª–∏ —Ö—É–∫–∏ –º–µ–¥–ª–µ–Ω–Ω—ã–º–∏ –∏–∑-–∑–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ?](#are-hooks-slow-because-of-creating-functions-in-render)
  * [–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–ª–±—ç–∫–æ–≤ –≤–Ω–∏–∑?](#how-to-avoid-passing-callbacks-down)
  * [–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —á–∞—Å—Ç–æ –∏–∑–º–µ–Ω—è–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Ö—É–∫–∞ `useCallback`?](#how-to-read-an-often-changing-value-from-usecallback)
* [–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º](#under-the-hood)
  * [–ö–∞–∫ React —Å–≤—è–∑—ã–≤–∞–µ—Ç –≤—ã–∑–æ–≤—ã —Ö—É–∫–æ–≤ —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º?](#how-does-react-associate-hook-calls-with-components)
  * [–ß—Ç–æ –ø–æ—Å–ª—É–∂–∏–ª–æ –ø—Ä–æ–æ–±—Ä–∞–∑–æ–º —Ö—É–∫–æ–≤?](#what-is-the-prior-art-for-hooks)

## –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Ö—É–∫–æ–≤ {#adoption-strategy}

### –í –∫–∞–∫–æ–π –≤–µ—Ä—Å–∏–∏ React –ø–æ—è–≤–∏–ª–∏—Å—å —Ö—É–∫–∏? {#which-versions-of-react-include-hooks}

–ù–∞—á–∏–Ω–∞—è —Å —Ä–µ–ª–∏–∑–∞ 16.8.0, React –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ö—É–∫–æ–≤ –¥–ª—è:

* React DOM
* React Native
* React DOM Server
* React Test Renderer
* React Shallow Renderer

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ **—Ö—É–∫–∏ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—Å–µ React-–ø–∞–∫–µ—Ç—ã –≤–µ—Ä—Å–∏–∏ 16.8.0 –∏–ª–∏ –≤—ã—à–µ**. –•—É–∫–∏ –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –µ—Å–ª–∏ –≤—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–±—ã–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å React DOM.

[React Native 0.59](https://facebook.github.io/react-native/blog/2019/03/12/releasing-react-native-059) –∏ –≤—ã—à–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ö—É–∫–∏.

### –ù–∞–¥–æ –ª–∏ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≤—Å–µ –º–æ–∏ –∫–ª–∞—Å—Å–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã? {#do-i-need-to-rewrite-all-my-class-components}

–ù–µ—Ç, –º—ã [–Ω–µ —Å–æ–±–∏—Ä–∞–µ–º—Å—è](/docs/hooks-intro.html#gradual-adoption-strategy) —É–¥–∞–ª—è—Ç—å –∫–ª–∞—Å—Å—ã –∏–∑ React, –ø–æ—Å–∫–æ–ª—å–∫—É –Ω–∏–∫—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–µ–±–µ —Ç–∞–∫–æ–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥. –ú—ã —Å–æ–≤–µ—Ç—É–µ–º –ø—Ä–æ–±–æ–≤–∞—Ç—å —Ö—É–∫–∏ —Ç–æ–ª—å–∫–æ –≤ –Ω–æ–≤–æ–º –∫–æ–¥–µ.

### –ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Ö—É–∫–æ–≤, —á–µ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∏—Ç—å—Å—è, –∏—Å–ø–æ–ª—å–∑—É—è –∫–ª–∞—Å—Å—ã? {#what-can-i-do-with-hooks-that-i-couldnt-with-classes}

–•—É–∫–∏ –¥–∞—é—Ç –Ω–æ–≤—ã–π –º–æ—â–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö. [¬´–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ö—É–∫–æ–≤¬ª](/docs/hooks-custom.html) –¥–∞—ë—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ–± –∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö. [–≠—Ç–∞ —Å—Ç–∞—Ç—å—è](https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889), –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –æ–¥–Ω–∏–º –∏–∑ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥—ã React, –æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç —Ö—É–∫–∏.

### –ö–∞–∫–∞—è —á–∞—Å—Ç—å –º–æ–∏—Ö –∑–Ω–∞–Ω–∏–π –æ React –≤—Å—ë –µ—â—ë –∞–∫—Ç—É–∞–ª—å–Ω–∞? {#how-much-of-my-react-knowledge-stays-relevant}

–•—É–∫–∏ -- —ç—Ç–æ –Ω–æ–≤—ã–π —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ React, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —É–∂–µ –∑–Ω–∞–µ—Ç–µ: —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª, –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Ä–µ—Ñ—ã. –•—É–∫–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É React, –ø–æ—ç—Ç–æ–º—É –≤–∞—à–∏ –∑–Ω–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –ø—Ä–æ–ø—Å–æ–≤ –∏ –Ω–∏—Å—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏.

–û–¥–Ω–∞–∫–æ, —Ö—É–∫–∏ -- –Ω–µ —Å–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è —á–∞—Å—Ç—å React. –ï—Å–ª–∏ –≤–∞–º —á–µ–≥–æ-—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –≤ —ç—Ç–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, [–¥–∞–π—Ç–µ –Ω–∞–º –∑–Ω–∞—Ç—å](https://github.com/reactjs/reactjs.org/issues/new), –∏ –º—ã –ø–æ—Å—Ç–∞—Ä–∞–µ–º—Å—è –≤–∞–º –ø–æ–º–æ—á—å.

### –ß—Ç–æ –º–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: —Ö—É–∫–∏, –∫–ª–∞—Å—Å—ã –∏–ª–∏ –æ–±–∞ –ø–æ–¥—Ö–æ–¥–∞? {#should-i-use-hooks-classes-or-a-mix-of-both}

–ú—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –Ω–∞—á–∞—Ç—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ö—É–∫–æ–≤ –≤ –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö, –∫–æ–≥–¥–∞ –≤—ã –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–∂–¥—ã–π —á–µ–ª–æ–≤–µ–∫ –≤ –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∞—Å –∏ –∑–Ω–∞–∫–æ–º —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π. –ú—ã –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∞—Å—Å—ã –Ω–∞ —Ö—É–∫–∏, –ø–æ–∫–∞ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥).

–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫–∏ *–≤–Ω—É—Ç—Ä–∏* –∫–ª–∞—Å—Å–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —Ö—É–∫–∞–º–∏ –≤ –æ–¥–Ω–æ–º –¥–µ—Ä–µ–≤–µ. –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–ª–∞—Å—Å–æ–≤—ã–º –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ö—É–∫–æ–≤ -- –Ω–µ–≤–∞–∂–Ω–æ, —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –ú—ã –æ–∂–∏–¥–∞–µ–º, —á—Ç–æ –≤ –±—É–¥—É—â–µ–º —Ö—É–∫–∏ —Å—Ç–∞–Ω—É—Ç –≥–ª–∞–≤–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –Ω–∞–ø–∏—Å–∞–Ω–∏—è React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

### –î–∞—é—Ç –ª–∏ —Ö—É–∫–∏ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Å–æ–≤? {#do-hooks-cover-all-use-cases-for-classes}

–ù–∞—à–∞ –≥–ª–∞–≤–Ω–∞—è –∑–∞–¥–∞—á–∞, —á—Ç–æ–±—ã —Ö—É–∫–∏ –ø–æ–∫—Ä—ã–≤–∞–ª–∏ –≤—Å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Å–æ–≤ –≤ –±–ª–∏–∂–∞–π—à–µ–º –±—É–¥—É—â–µ–º. –ü–æ–∫–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö—É–∫–æ–≤, —Ä–µ–∞–ª–∏–∑—É—é—â–∏—Ö –º–µ—Ç–æ–¥—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞  `getSnapshotBeforeUpdate`, `getDerivedStateFromError` –∏ `componentDidCatch`, –Ω–æ –º—ã –ø–ª–∞–Ω–∏—Ä—É–µ–º —Å–∫–æ—Ä–æ –∏—Ö –¥–æ–±–∞–≤–∏—Ç—å.

### –Ø–≤–ª—è—é—Ç—Å—è –ª–∏ —Ö—É–∫–∏ –∑–∞–º–µ–Ω–æ–π —Ä–µ–Ω–¥–µ—Ä-–ø—Ä–æ–ø—Å–∞–º –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞? {#do-hooks-replace-render-props-and-higher-order-components}

–ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —Ä–µ–Ω–¥–µ—Ä-–ø—Ä–æ–ø—Å—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞ —Ä–µ–Ω–¥–µ—Ä—è—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –¥–æ—á–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —É–≤–µ–ª–∏—á–∏–≤–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ –¥–µ—Ä–µ–≤–µ, –Ω–æ –¥–æ–±–∞–≤–ª—è—è –ø–æ—Ç–æ–º–∫—É –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –ú—ã –¥—É–º–∞–µ–º, —á—Ç–æ —Ö—É–∫–∏ ‚Äî –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ. –û–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –≤—Å—ë –µ—â—ë –∏–º–µ—é—Ç –ø—Ä–∞–≤–æ –Ω–∞ –∂–∏–∑–Ω—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —Å–ª–µ–¥—è—â–∏–π –∑–∞ —Å–∫—Ä–æ–ª–ª–æ–º, –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø—Ä–æ–ø `renderItem` –∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–Ω–¥–µ—Ä-–ø—Ä–æ–ø—Å—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤). –ù–æ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Ö—É–∫–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–º–æ—á—å —É–º–µ–Ω—å—à–∏—Ç—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –≤–∞—à–µ–º –¥–µ—Ä–µ–≤–µ.

### –ö–∞–∫ —Ö—É–∫–∏ –ø–æ–≤–ª–∏—è—é—Ç –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ API, —Ç–∞–∫–∏–µ –∫–∞–∫ Redux `connect()` –∏ React Router? {#what-do-hooks-mean-for-popular-apis-like-redux-connect-and-react-router}

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π API, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ ‚Äì –≤—Å—ë –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –ø—Ä–µ–∂–¥–µ.

–ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 7.1.0, React Redux [–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç API —Ö—É–∫–æ–≤](https://react-redux.js.org/api/hooks) –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–∞–∫–∏–µ —Ö—É–∫–∏ –∫–∞–∫ `useDispatch` –∏ `useSelector`.

–ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 5.1 –ø–æ—è–≤–∏–ª–∞—Å—å [–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ö—É–∫–æ–≤](https://reacttraining.com/react-router/web/api/Hooks) –≤ React Router.

–í –±—É–¥—É—â–µ–º –¥—Ä—É–≥–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–æ–≥—É—Ç —Ç–∞–∫–∂–µ –Ω–∞—á–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ö—É–∫–∏.

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ª–∏ —Ö—É–∫–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é? {#do-hooks-work-with-static-typing}

–•—É–∫–∏ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å —É—á—ë—Ç–æ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏. –¢–∞–∫ –∫–∞–∫ –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –∏—Ö –ª–µ–≥—á–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π —Ç–∏–ø–æ–≤ React –¥–ª—è Flow –∏ TypeScript –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ö—É–∫–∏.

–ó–∞–º–µ—Ç—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ö—É–∫–∏ –¥–∞—é—Ç –≤–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞–∫–ª–∞–¥—ã–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ API React, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º. React –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–∏–º–∏—Ç–∏–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Å–≤–æ–µ–º—É —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é –¥–∞–∂–µ —Ç–∞–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏ –Ω–µ –±—ã–ª–∏ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã.

### –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ö—É–∫–∏? {#how-to-test-components-that-use-hooks}

–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è React, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Ö—É–∫–∏, —è–≤–ª—è–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º. –ï—Å–ª–∏ –≤–∞—à —Å–ø–æ—Å–æ–± —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é React, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å —Ö—É–∫–∞–º–∏ –Ω–µ –¥–æ–ª–∂–Ω–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
>
>[–†–µ—Ü–µ–ø—Ç—ã –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](/docs/testing-recipes.html) –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–µ–±—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–µ–±–µ.

–ù–∞–ø—Ä–∏–º–µ—Ä, —É –Ω–∞—Å –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç-—Å—á—ë—Ç—á–∏–∫:

```js
function Example() {
  const [count, setCount] = useState(0);
  useEffect(() => {
    document.title = `–í—ã –∫–ª–∏–∫–Ω—É–ª–∏ ${count} —Ä–∞–∑`;
  });
  return (
    <div>
      <p>–í—ã –∫–ª–∏–∫–Ω—É–ª–∏ {count} —Ä–∞–∑</p>
      <button onClick={() => setCount(count + 1)}>
        –ö–ª–∏–∫–Ω–∏ –º–µ–Ω—è
      </button>
    </div>
  );
}
```

–ú—ã –±—É–¥–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –ø–æ–º–æ—â—å—é React DOM. –ß—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–º, —á—Ç–æ —Å–ª—É—á–∏—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –º—ã –æ–±–µ—Ä–Ω—ë–º –∫–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –≤—ã–∑–æ–≤ [`ReactTestUtils.act()`](/docs/test-utils.html#act):

```js{3,20-22,29-31}
import React from 'react';
import ReactDOM from 'react-dom/client';
import { act } from 'react-dom/test-utils';
import Counter from './Counter';

let container;

beforeEach(() => {
  container = document.createElement('div');
  document.body.appendChild(container);
});

afterEach(() => {
  document.body.removeChild(container);
  container = null;
});

it('can render and update a counter', () => {
  // –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä –∏ —ç—Ñ—Ñ–µ–∫—Ç
  act(() => {
    ReactDOM.createRoot(container).render(<Counter />);
  });
  const button = container.querySelector('button');
  const label = container.querySelector('p');
  expect(label.textContent).toBe('–í—ã –∫–ª–∏–∫–Ω—É–ª–∏ 0 —Ä–∞–∑');
  expect(document.title).toBe('–í—ã –∫–ª–∏–∫–Ω—É–ª–∏ 0 —Ä–∞–∑');

  // –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤—Ç–æ—Ä–æ–π —Ä–µ–Ω–¥–µ—Ä –∏ —ç—Ñ—Ñ–µ–∫—Ç
  act(() => {
    button.dispatchEvent(new MouseEvent('click', {bubbles: true}));
  });
  expect(label.textContent).toBe('–í—ã –∫–ª–∏–∫–Ω—É–ª–∏ 1 —Ä–∞–∑');
  expect(document.title).toBe('–í—ã –∫–ª–∏–∫–Ω—É–ª–∏ 1 —Ä–∞–∑');
});
```

–í—ã–∑–æ–≤—ã `act()` —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å—Ç—è—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã –≤–Ω—É—Ç—Ä–∏.

–ï—Å–ª–∏ –≤–∞–º –Ω–∞–¥–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ö—É–∫, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –≤–∞—à–∏—Ö —Ç–µ—Å—Ç–∞—Ö –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –Ω—ë–º —ç—Ç–æ—Ç —Ö—É–∫. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.

–î–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –æ–¥–Ω–æ—Ç–∏–ø–Ω–æ–≥–æ –∫–æ–¥–∞, –º—ã —Å–æ–≤–µ—Ç—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É [React Testing Library](https://testing-library.com/react). –û–Ω–∞ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –≤–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏–º–∏—Ç–∏—Ä—É—é—â–∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

–ó–∞ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ [–†–µ—Ü–µ–ø—Ç–∞–º –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](/docs/testing-recipes.html).

### –ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç [–ø—Ä–∞–≤–∏–ª–∞ –ª–∏–Ω—Ç–µ—Ä–∞](https://www.npmjs.com/package/eslint-plugin-react-hooks) –≤ —Ö—É–∫–∞—Ö?{#what-exactly-do-the-lint-rules-enforce}

–ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º [–ø–ª–∞–≥–∏–Ω –∫ ESLint](https://www.npmjs.com/package/eslint-plugin-react-hooks), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω—É–∂–¥–∞–µ—Ç —Å–ª–µ–¥–æ–≤–∞—Ç—å [–ø—Ä–∞–≤–∏–ª–∞–º —Ö—É–∫–æ–≤](/docs/hooks-rules.html), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫. –ü–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è, —á—Ç–æ –ª—é–±–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∏–º—è –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å ¬´`use`¬ª –∏ –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã –¥–∞–ª–µ–µ, —è–≤–ª—è–µ—Ç—Å—è —Ö—É–∫–æ–º. –ú—ã –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ —ç—Ç–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ–µ, –∏ –º–æ–≥—É—Ç —Å–ª—É—á–∞—Ç—å—Å—è –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è. –û–¥–Ω–∞–∫–æ, –±–µ–∑ —ç—Ç–æ–≥–æ –≤–∞–∂–Ω–æ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è, –±—ã–ª–æ –±—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞—Å—Ç–∞–≤–∏—Ç—å —Ö—É–∫–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Ö–æ—Ä–æ—à–æ, –∞ –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –º–æ–≥–ª–∏ –±—ã –ø–æ–º–µ—à–∞—Ç—å –ª—é–¥—è–º –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫–∏ –∏–ª–∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–æ–≥–ª–∞—à–µ–Ω–∏—é.

–ü—Ä–∞–≤–∏–ª–∞ –ª–∏–Ω—Ç–µ—Ä–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç, —á—Ç–æ:

* –í—ã–∑–æ–≤—ã —Ö—É–∫–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ª–∏–±–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –∏–º–µ–Ω–µ–º, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–º –≤ —Å—Ç–∏–ª–µ `PascalCase` (–ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è, —á—Ç–æ —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç), –ª–∏–±–æ –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `useSomething` (–ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è, —á—Ç–æ —ç—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ö—É–∫).

* –•—É–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º –∏ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –µ—â—ë –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –ø–æ –º–µ—Ä–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –±—É–¥–µ–º —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∏ –∏—Å–∫–∞—Ç—å –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ–º –æ—à–∏–±–æ–∫ –∏ –ª–æ–∂–Ω—ã–º–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è–º–∏.

## –û—Ç –∫–ª–∞—Å—Å–æ–≤ –∫ —Ö—É–∫–∞–º {#from-classes-to-hooks}

### –ö–∞–∫ –º–µ—Ç–æ–¥—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ö—É–∫–∞–º? {#how-do-lifecycle-methods-correspond-to-hooks}

* `constructor`: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –Ω–µ –Ω—É–∂–µ–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. –í—ã –º–æ–∂–µ—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è –≤—ã–∑–æ–≤ [`useState`](/docs/hooks-reference.html#usestate). –ï—Å–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç–Ω—ã, –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ `useState`.

* `getDerivedStateFromProps`: –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ [–ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ](#how-do-i-implement-getderivedstatefromprops).

* `shouldComponentUpdate`: –°–º–æ—Ç—Ä–∏—Ç–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ `React.memo` [–Ω–∏–∂–µ](#how-do-i-implement-shouldcomponentupdate).

* `render`: –≠—Ç–æ —Ç–µ–ª–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

* `componentDidMount`, `componentDidUpdate`, `componentWillUnmount`: [–•—É–∫ `useEffect`](/docs/hooks-reference.html#useeffect) –∑–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ –∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (–≤–∫–ª—é—á–∞—è [–±–æ–ª–µ–µ](#can-i-skip-an-effect-on-updates) [—Ä–µ–¥–∫–∏–µ](#can-i-run-an-effect-only-on-updates) —Å–ª—É—á–∞–∏).

* `getSnapshotBeforeUpdate`, `componentDidCatch` –∏ `getDerivedStateFromError`: –í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö—É–∫–æ–≤-–∞–Ω–∞–ª–æ–≥–æ–≤ –¥–ª—è —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤, –Ω–æ –æ–Ω–∏ –±—É–¥—É—Ç —Å–∫–æ—Ä–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã.

### –ö–∞–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∑–∞ –¥–∞–Ω–Ω—ã–º–∏ —Å –ø–æ–º–æ—â—å—é —Ö—É–∫–æ–≤? {#how-can-i-do-data-fetching-with-hooks}

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [–Ω–µ–±–æ–ª—å—à–æ–µ –¥–µ–º–æ](https://codesandbox.io/s/jvvkoo8pq3), –∞ –∑–∞—Ç–µ–º –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å [—Å–æ —Å—Ç–∞—Ç—å—ë–π](https://www.robinwieruch.de/react-hooks-fetch-data/), –∫–æ—Ç–æ—Ä–∞—è —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é —Ö—É–∫–æ–≤.

### –ï—Å—Ç—å –ª–∏ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–∞? {#is-there-something-like-instance-variables}

–î–∞! –•—É–∫ [`useRef()`](/docs/hooks-reference.html#useref) –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è DOM-—Ä–µ—Ñ–æ–≤. –†–µ—Ñ ‚Äì —ç—Ç–æ –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∞ –µ–≥–æ —Å–≤–æ–π—Å—Ç–≤–æ `current` -- –∏–∑–º–µ–Ω—è–µ–º–æ–µ –∏ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ–¥–æ–±–Ω–æ —Å–≤–æ–π—Å—Ç–≤—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞.


–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ `useEffect`:

```js{2,8}
function Timer() {
  const intervalRef = useRef();

  useEffect(() => {
    const id = setInterval(() => {
      // ...
    });
    intervalRef.current = id;
    return () => {
      clearInterval(intervalRef.current);
    };
  });

  // ...
}
```

–î–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –Ω–∞–º –Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ä–µ—Ñ (`id` –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∞). –ù–æ —ç—Ç–æ –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–±—Ä–æ—Å–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –∏–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏—è:

```js{3}
  // ...
  function handleCancelClick() {
    clearInterval(intervalRef.current);
  }
  // ...
```

–í —Ü–µ–ª–æ–º –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ä–µ—Ñ—ã –∫–∞–∫ —Å–≤–æ–π—Å—Ç–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞. –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –∏–∑–±–µ–≥–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ—Ñ–æ–≤ –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞, –ø–æ–∫–∞ –≤—ã –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç–µ [–ª–µ–Ω–∏–≤—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é](#how-to-create-expensive-objects-lazily), —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤—ã –±—É–¥–µ—Ç–µ –∏–∑–º–µ–Ω—è—Ç—å —Ä–µ—Ñ—ã –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å–æ–±—ã—Ç–∏–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∞—Ö.

### –°–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è —è –º–æ–≥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ‚Äì –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ? {#should-i-use-one-or-many-state-variables}

–ï—Å–ª–∏ –≤—ã –ø—Ä–∏–≤—ã–∫–ª–∏ –ø–∏—Å–∞—Ç—å –∫–ª–∞—Å—Å–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –≤—ã —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –∑–∞—Ö–æ—Ç–∏—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å `useState()` –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ –∏ —Å—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ. –î–∞, –≤—ã –º–æ–∂–µ—Ç–µ —Ç–∞–∫ —Å–¥–µ–ª–∞—Ç—å. –í–∑–≥–ª—è–Ω–∏—Ç–µ –Ω–∞ –ø—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥—É–µ—Ç –∑–∞ –¥–≤–∏–∂–µ–Ω–∏–µ–º –∫—É—Ä—Å–æ—Ä–∞. –ú—ã —Ö—Ä–∞–Ω–∏–º –ø–æ–∑–∏—Ü–∏—é –∏ —Ä–∞–∑–º–µ—Ä —ç—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

```js
function Box() {
  const [state, setState] = useState({ left: 0, top: 0, width: 100, height: 100 });
  // ...
}
```

–î–æ–ø—É—Å—Ç–∏–º, –º—ã —Ö–æ—Ç–∏–º –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—É—é –ª–æ–≥–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è `left` –∏ `top`, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–≤–∏–≥–∞–µ—Ç –∫—É—Ä—Å–æ—Ä –º—ã—à–∫–∏. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã –æ–±—è–∑–∞–Ω—ã –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —ç—Ç–∏ –ø–æ–ª—è —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –æ–±—ä–µ–∫—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Ä—É—á–Ω—É—é:

```js{4,5}
  // ...
  useEffect(() => {
    function handleWindowMouseMove(e) {
      // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ "...state" –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –º—ã –Ω–µ –ø–æ—Ç–µ—Ä—è–µ–º width –∏ height
      setState(state => ({ ...state, left: e.pageX, top: e.pageY }));
    }
    // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —ç—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–º–Ω–æ–≥–æ —É–ø—Ä–æ—â–µ–Ω–∞
    window.addEventListener('mousemove', handleWindowMouseMove);
    return () => window.removeEventListener('mousemove', handleWindowMouseMove);
  }, []);
  // ...
```

–ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω —Ç–∞–∫, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –æ–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–æ—Å—Ç–æ—è–Ω–∏—è, *–∑–∞–º–µ–Ω—è—è* –µ—ë –∑–Ω–∞—á–µ–Ω–∏–µ. –î–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç `this.setState`, –≤–µ–¥—å —ç—Ç–æ—Ç –∫–ª–∞—Å—Å–æ–≤—ã–π –º–µ—Ç–æ–¥ *–æ–±—ä–µ–¥–∏–Ω—è–µ—Ç* –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –ø–æ–ª—è —Å —Ç–µ–∫—É—â–∏–º –æ–±—ä–µ–∫—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è.

–ï—Å–ª–∏ –≤–∞–º –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π —Ö—É–∫ `useLegacyState`, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞. –û–¥–Ω–∞–∫–æ, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ **–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Ä–∞–∑–¥–µ–ª—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —É—á–∏—Ç—ã–≤–∞—è, –∫–∞–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É –∏ –±—É–¥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –≤–º–µ—Å—Ç–µ.**

–ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã –º–æ–∂–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã `position` –∏ `size`, —á—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤—Å–µ–≥–¥–∞ –∏–∑–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ `position`, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–æ–ª–Ω–æ–≤–∞—Ç—å—Å—è –æ–± –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏:

```js{2,7}
function Box() {
  const [position, setPosition] = useState({ left: 0, top: 0 });
  const [size, setSize] = useState({ width: 100, height: 100 });

  useEffect(() => {
    function handleWindowMouseMove(e) {
      setPosition({ left: e.pageX, top: e.pageY });
    }
    // ...
```

–í —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –µ—Å—Ç—å –µ—â—ë –æ–¥–Ω–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –ª–µ–≥–∫–æ –≤—ã–Ω–µ—Å—Ç–∏ –Ω–µ–∫–æ—Ç–æ—Ä—É—é –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ö—É–∫ –≤ –±—É–¥—É—â–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```js{2,7}
function Box() {
  const position = useWindowPosition();
  const [size, setSize] = useState({ width: 100, height: 100 });
  // ...
}

function useWindowPosition() {
  const [position, setPosition] = useState({ left: 0, top: 0 });
  useEffect(() => {
    // ...
  }, []);
  return position;
}
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –º—ã —Å–º–æ–≥–ª–∏ –≤—ã–Ω–µ—Å—Ç–∏ –≤—ã–∑–æ–≤ `useState`, –∏–∑–º–µ–Ω—è—é—â–∏–π `position`, –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ö—É–∫, –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –º–µ–Ω—è—è –∏—Ö –∫–æ–¥. –ï—Å–ª–∏ –±—ã –≤—Å—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–æ—Å—å –≤ –æ–¥–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ, —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –±—ã–ª–æ –±—ã –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–∂–Ω–µ–µ.

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∏–º–µ—é—Ç –ø—Ä–∞–≤–æ –Ω–∞ –∂–∏–∑–Ω—å. –û–¥–Ω–∞–∫–æ, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±—É–¥—É—Ç –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º–∏, –µ—Å–ª–∏ –≤—ã –Ω–∞–π–¥—ë—Ç–µ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–¥—Ö–æ–¥–∞–º–∏ –∏ –±—É–¥–µ—Ç–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –¥–∞–Ω–Ω—ã–µ. –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω–æ–π, –º—ã —Å–æ–≤–µ—Ç—É–µ–º [–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–¥—é—Å–µ—Ä](/docs/hooks-reference.html#usereducer) –∏–ª–∏ –≤—ã–Ω–æ—Å–∏—Ç—å –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ö—É–∫–∏.

### –ú–æ–≥—É –ª–∏ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞? {#can-i-run-an-effect-only-on-updates}

–≠—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ —Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π. –í—ã –º–æ–∂–µ—Ç–µ [–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω—è–µ–º—ã–π —Ä–µ—Ñ](#is-there-something-like-instance-variables), —á—Ç–æ–±—ã –≤—Ä—É—á–Ω—É—é —Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–µ–µ, –ø—Ä–æ—à—ë–ª –ª–∏ –ø–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä. –í —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —ç—Ñ—Ñ–µ–∫—Ç –º–æ–∂–µ—Ç –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ. –ï—Å–ª–∏ –≤—ã –∑–∞–º–µ—á–∞–µ—Ç–µ, —á—Ç–æ —ç—Ç–∞ –ª–æ–≥–∏–∫–∞ –Ω—É–∂–Ω–∞ –≤–∞–º —á–∞—Å—Ç–æ, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–Ω–µ—Å—Ç–∏ –µ—ë –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ö—É–∫.

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø—Ä–æ–ø—Å—ã –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ? {#how-to-get-the-previous-props-or-state}

–ü—Ä–µ–¥—ã–¥—É—â–∏–µ –ø—Ä–æ–ø—Å—ã –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—É—á–∞—é—Ç –≤ –¥–≤—É—Ö —Å–ª—É—á–∞—è—Ö.

–ò–Ω–æ–≥–¥–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø—Ä–æ–ø—Å—ã –Ω—É–∂–Ω—ã —á—Ç–æ–±—ã **–æ—á–∏—Å—Ç–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç.** –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–∫–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–ø—Å–∞ `userId`. –ï—Å–ª–∏ –ø—Ä–æ–ø—Å `userId` –º–µ–Ω—è–µ—Ç—Å—è ‚Äî –æ—Ç–ø–∏—à–∏—Ç–µ—Å—å –æ—Ç _previous_ `userId` –∏ –ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞¬†_next_. –≠—Ç–æ –ª–µ–≥–∫–æ —Å–¥–µ–ª–∞—Ç—å:

```js
useEffect(() => {
  ChatAPI.subscribeToSocket(props.userId);
  return () => ChatAPI.unsubscribeFromSocket(props.userId);
}, [props.userId]);
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ, –µ—Å–ª–∏ `userId` –∏–∑–º–µ–Ω–∏—Ç—Å—è —Å `3` –Ω–∞ `4`, —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è `ChatAPI.unsubscribeFromSocket(3)`, –∞ –∑–∞—Ç–µ–º `ChatAPI.subscribeToSocket(4)`. –ù–µ –ø–æ–ª—É—á–∞–π—Ç–µ "pervious" `userId`, –ø–æ—Å–∫–æ–ª—å–∫—É —Ñ—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç –µ–≥–æ –≤ –∑–∞–º—ã–∫–∞–Ω–∏–∏.

–í –¥—Ä—É–≥–∏—Ö —Å–ª—É—á–∞—è—Ö –Ω—É–∂–Ω–æ **–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø—Ä–æ–ø—Å–∞—Ö –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö**. –≠—Ç–æ –ø—Ä–∏–∑–Ω–∞–∫ –Ω–∞–ª–∏—á–∏—è –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ –∏–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ —á–∞—Å—Ç–æ. –í —Ä–µ–¥–∫–∏—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω, –º–æ–∂–Ω–æ [—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–ª–∏ –ø—Ä–æ–ø—Å—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏—Ö –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞](#how-do-i-implement-getderivedstatefromprops).

–ú—ã —É–∂–µ –ø—Ä–µ–¥–ª–∞–≥–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π Hook –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º `usePrevious` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è. –û–¥–Ω–∞–∫–æ –º—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏, —á—Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–ø–∞–¥–∞—é—Ç –≤ –¥–≤–∞ –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –≤—ã—à–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞. –í –¥—Ä—É–≥–∏—Ö —Å–ª—É—á–∞—è—Ö, –º–æ–∂–Ω–æ [—Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å—Å—ã–ª–∫–µ](#is-there-something-like-instance-variables) –∏ –≤—Ä—É—á–Ω—É—é –æ–±–Ω–æ–≤–ª—è—Ç—å –µ–≥–æ, –∫–æ–≥–¥–∞ —ç—Ç–æ –Ω—É–∂–Ω–æ. –ò–∑–±–µ–≥–∞–π—Ç–µ —á—Ç–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ç—Ä—É–¥–Ω–æ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º.

### –ü–æ—á–µ–º—É —è –≤–∏–∂—É —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø—Ä–æ–ø—Å—ã –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –º–æ–µ–π —Ñ—É–Ω–∫—Ü–∏–∏? {#why-am-i-seeing-stale-props-or-state-inside-my-function}

–õ—é–±–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –≤–∫–ª—é—á–∞—è —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π, ¬´–≤–∏–¥–∏—Ç¬ª –ø—Ä–æ–ø—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ `render()`, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–Ω–∞ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∞–∫–æ–π –∫–æ–¥:

```js
function Example() {
  const [count, setCount] = useState(0);

  function handleAlertClick() {
    setTimeout(() => {
      alert('–í—ã –∫–ª–∏–∫–Ω—É–ª–∏ –ø–æ: ' + count);
    }, 3000);
  }

  return (
    <div>
      <p>–í—ã –∫–ª–∏–∫–Ω—É–ª–∏ {count} —Ä–∞–∑(–∞)</p>
      <button onClick={() => setCount(count + 1)}>
        –ö–ª–∏–∫–Ω–∏ –º–µ–Ω—è
      </button>
      <button onClick={handleAlertClick}>
        –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
      </button>
    </div>
  );
}
```

–ï—Å–ª–∏ –≤—ã —Å–ø–µ—Ä–≤–∞ –∫–ª–∏–∫–Ω–µ—Ç–µ –ø–æ "–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ", –∞ –ø–æ—Ç–æ–º —É–≤–µ–ª–∏—á–∏—Ç–µ —Å—á—ë—Ç—á–∏–∫, —Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `count` **–Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–∂–∞—Ç–∏—è –ø–æ –∫–Ω–æ–ø–∫–µ "–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"**. –¢–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –±–∞–≥–∏ –≤ –∫–æ–¥–µ, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–ø—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –º–µ–Ω—è—é—Ç—Å—è.

–ï—Å–ª–∏ –≤—ã –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ —Ö–æ—Ç–∏—Ç–µ —Å—á–∏—Ç–∞—Ç—å –∏–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–ª–±—ç–∫–∞ *—Å–≤–µ–∂–∞–π—à–µ–µ* —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –≤—ã –º–æ–∂–µ—Ç–µ —Å–ø–µ—Ä–≤–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ [–≤ —Ä–µ—Ñ](/docs/hooks-faq.html#is-there-something-like-instance-variables), –ø–æ—Ç–æ–º –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ –∏ –∑–∞—Ç–µ–º —Å—á–∏—Ç–∞—Ç—å –µ–≥–æ –∏–∑ —Ä–µ—Ñ–∞.

–ù–∞–∫–æ–Ω–µ—Ü, –≤–æ–∑–º–æ–∂–Ω–∞ –¥—Ä—É–≥–∞—è —Å–∏—Ç—É–∞—Ü–∏—è, –ø–æ—á–µ–º—É –≤—ã –≤–∏–¥–∏—Ç–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø—Ä–æ–ø—Å—ã –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –∫–æ–≥–¥–∞ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —Å –ø–æ–º–æ—â—å—é ¬´–º–∞—Å—Å–∏–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π¬ª, –Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç –≤—Ç–æ—Ä—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `[]`, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `someProp`, —Ç–æ –æ–Ω –ø—Ä–æ–¥–æ–ª–∂–∏—Ç ¬´–≤–∏–¥–µ—Ç—å¬ª –∏—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `someProp`. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º —è–≤–ª—è–µ—Ç—Å—è –ª–∏–±–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞, –ª–∏–±–æ –æ—Ç–∫–∞–∑ –æ—Ç –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
–ü–æ —ç—Ç–∏–º —Å—Å—ã–ª–∫–∞–º –æ–ø–∏—Å–∞–Ω—ã [–ø–æ–¥—Ö–æ–¥—ã –∫ —Ñ—É–Ω–∫—Ü–∏—è–º](#is-it-safe-to-omit-functions-from-the-list-of-dependencies) –≤ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –∏ [–¥—Ä—É–≥–∏–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã](#what-can-i-do-if-my-effect-dependencies-change-too-often) —Å–Ω–∏–∂–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –≤—ã–∑–æ–≤–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –∏—Å–∫–ª—é—á–∞—é—â–∏–µ –ø–µ—Ä–µ–¥–∞—á—É –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
>
>–ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∏–ª–æ [`exhaustive-deps`](https://github.com/facebook/react/issues/14920) –≤ –Ω–∞—à–µ–º –ø–∞–∫–µ—Ç–µ –ª–∏–Ω—Ç–µ—Ä–∞ [`eslint-plugin-react-hooks`](https://www.npmjs.com/package/eslint-plugin-react-hooks#installation). –û–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –∏—Ö –∏—Å–ø—Ä–∞–≤–∏—Ç—å.

### –ö–∞–∫ —è –º–æ–≥—É —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `getDerivedStateFromProps`? {#how-do-i-implement-getderivedstatefromprops}

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –≤–∞–º —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ [—ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ](/blog/2018/06/07/you-probably-dont-need-derived-state.html), –≤ —Ä–µ–¥–∫–∏—Ö —Å–ª—É—á–∞—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `<Transition>`), –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä—è–º–æ –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞. React –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ —Å–¥–µ–ª–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞, –∏ —ç—Ç–æ –Ω–µ –±—É–¥–µ—Ç –∑–∞—Ç—Ä–∞—Ç–Ω–æ.

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ, –º—ã —Ö—Ä–∞–Ω–∏–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–ø–∞ `row` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–≤–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è:

```js
function ScrollView({row}) {
  const [isScrollingDown, setIsScrollingDown] = useState(false);
  const [prevRow, setPrevRow] = useState(null);

  if (row !== prevRow) {
    // Row –∏–∑–º–µ–Ω–∏–ª—Å—è —Å –ø—Ä–æ—à–ª–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –û–±–Ω–æ–≤–ª—è–µ–º isScrollingDown.
    setIsScrollingDown(prevRow !== null && row > prevRow);
    setPrevRow(row);
  }

  return `–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑: ${isScrollingDown}`;
}
```

–°–ø–µ—Ä–≤–∞ —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–Ω—ã–º, –Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞ ‚Äì —ç—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ, —á–µ–º –≤—Å–µ–≥–¥–∞ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ —è–≤–ª—è–ª—Å—è –º–µ—Ç–æ–¥ `getDerivedStateFromProps`.

### –°—É—â–µ—Å—Ç–≤—É–µ—Ç —á—Ç–æ-–Ω–∏–±—É–¥—å –Ω–∞–ø–æ–¥–æ–±–∏–µ forceUpdate? {#is-there-something-like-forceupdate}

–û–±–∞ —Ö—É–∫–∞ `useState` –∏ `useReducer` [–∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è](/docs/hooks-reference.html#bailing-out-of-a-state-update), –µ—Å–ª–∏ —Å–ª–µ–¥—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É. –ú—É—Ç–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –≤—ã–∑–æ–≤ `setState` –Ω–µ –ø—Ä–∏–≤–µ–¥—É—Ç –∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É —Ä–µ–Ω–¥–µ—Ä—É.

–û–±—ã—á–Ω–æ, –≤—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ React. –û–¥–Ω–∞–∫–æ, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ª–∞–∑–µ–π–∫–∏, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π—Å—è —Å—á—ë—Ç—á–∏–∫, —á—Ç–æ–±—ã –∑–∞—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è, –µ—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:

```js
  const [ignored, forceUpdate] = useReducer(x => x + 1, 0);

  function handleClick() {
    forceUpdate();
  }
```

–°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –∏–∑–±–µ–≥–∞—Ç—å —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ.

### –ú–æ–≥—É –ª–∏ —è –∏–∑–º–µ–Ω–∏—Ç—å —Ä–µ—Ñ, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç? {#can-i-make-a-ref-to-a-function-component}

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –≤–∞–º –Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —ç—Ç–æ —á–∞—Å—Ç–æ, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É, –∏—Å–ø–æ–ª—å–∑—É—è —Ö—É–∫ [`useImperativeHandle`](/docs/hooks-reference.html#useimperativehandle).

### –ö–∞–∫ —è –º–æ–≥—É –∏–∑–º–µ—Ä–∏—Ç—å —É–∑–µ–ª DOM? {#how-can-i-measure-a-dom-node}

–û–¥–∏–Ω –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ —Ä–∞–∑–º–µ—Ä–∞ DOM-—É–∑–ª–∞ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ [–∫–æ–ª–±—ç–∫-—Ä–µ—Ñ](/docs/refs-and-the-dom.html#callback-refs). React –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —ç—Ç–æ—Ç –∫–æ–ª–±—ç–∫ –≤—Å—è–∫–∏–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —Ä–µ—Ñ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ –¥—Ä—É–≥–æ–º—É —É–∑–ª—É. –í–æ—Ç [–Ω–µ–±–æ–ª—å—à–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è](https://codesandbox.io/s/l7m0v5x4v9):

```js{4-8,12}
function MeasureExample() {
  const [height, setHeight] = useState(0);

  const measuredRef = useCallback(node => {
    if (node !== null) {
      setHeight(node.getBoundingClientRect().height);
    }
  }, []);

  return (
    <>
      <h1 ref={measuredRef}>–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä</h1>
      <h2>–ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤—ã—à–µ –∏–º–µ–µ—Ç –≤—ã—Å–æ—Ç—É {Math.round(height)} –ø–∏–∫—Å–µ–ª–µ–π</h2>
    </>
  );
}
```

–ú—ã –Ω–µ –≤—ã–±—Ä–∞–ª–∏ `useRef` –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–±—ä–µ–∫—Ç —Ä–µ—Ñ–∞ –Ω–µ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –Ω–∞—Å –æ–± *–∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö* —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ—Ñ–∞. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–ª–±—ç–∫-—Ä–µ—Ñ–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ [–¥–∞–∂–µ –µ—Å–ª–∏ –¥–æ—á–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–∑–º–µ—Ä–µ–Ω–Ω—ã–π —É–∑–µ–ª –ø–æ–∑–∂–µ](https://codesandbox.io/s/818zzk8m78) (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∫–ª–∏–∫), –º—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø–æ–ª—É—á–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —ç—Ç–æ–º –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∏ –º–æ–∂–µ–º –æ–±–Ω–æ–≤–ª—è—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏—è.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã –ø–µ—Ä–µ–¥–∞—ë–º `[]` –∫–∞–∫ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ `useCallback`. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–∞—à –∫–æ–ª–±—ç–∫-—Ä–µ—Ñ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –∞ –∑–Ω–∞—á–∏—Ç React –Ω–µ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –µ–≥–æ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –∫–æ–ª–±—ç–∫-—Ä–µ—Ñ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —Ö–æ—Ç—è –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<h1>` –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö. –ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å [`ResizeObserver`](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver) –∏–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º —Ö—É–∫–æ–º, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —ç—Ç–æ—Ç API.

–ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –≤—ã –º–æ–∂–µ—Ç–µ [–∏–∑–≤–ª–µ—á—å —ç—Ç—É –ª–æ–≥–∏–∫—É](https://codesandbox.io/s/m5o42082xy) –≤ —Ö—É–∫ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```js{2}
function MeasureExample() {
  const [rect, ref] = useClientRect();
  return (
    <>
      <h1 ref={ref}>–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä</h1>
      {rect !== null &&
      <h2>–ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤—ã—à–µ –∏–º–µ–µ—Ç –≤—ã—Å–æ—Ç—É {Math.round(rect.height)} –ø–∏–∫—Å–µ–ª–µ–π</h2>
      }
    </>
  );
}

function useClientRect() {
  const [rect, setRect] = useState(null);
  const ref = useCallback(node => {
    if (node !== null) {
      setRect(node.getBoundingClientRect());
    }
  }, []);
  return [rect, ref];
}
```

### –ß—Ç–æ –∑–Ω–∞—á–∏—Ç `const [thing, setThing] = useState()`? {#what-does-const-thing-setthing--usestate-mean}

–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–∫–æ–º—ã —Å —ç—Ç–∏–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º](/docs/hooks-state.html#tip-what-do-square-brackets-mean) –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ö—É–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è.


## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ {#performance-optimizations}

### –ú–æ–≥—É –ª–∏ —è –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö? {#can-i-skip-an-effect-on-updates}

–î–∞. –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [—É—Å–ª–æ–≤–Ω—ã–º –≤—ã–∑–æ–≤–æ–º —ç—Ñ—Ñ–µ–∫—Ç–æ–≤](/docs/hooks-reference.html#conditionally-firing-an-effect). –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∑–∞–±—ã–≤ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –≤—ã –∑–∞—á–∞—Å—Ç—É—é –º–æ–∂–µ—Ç–µ [—Å–æ–∑–¥–∞—Ç—å –æ—à–∏–±–∫–∏](/docs/hooks-effect.html#explanation-why-effects-run-on-each-update). –ü–æ—ç—Ç–æ–º—É —ç—Ç–æ –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Å–ø–∏—Å–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π? {#is-it-safe-to-omit-functions-from-the-list-of-dependencies}

–í–æ–æ–±—â–µ –≥–æ–≤–æ—Ä—è, —ç—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ.

```js{3,8}
function Example({ someProp }) {
  function doSomething() {
    console.log(someProp);
  }

  useEffect(() => {
    doSomething();
  }, []); // üî¥ –¢–∞–∫ –¥–µ–ª–∞—Ç—å –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ (–≤—ã–∑—ã–≤–∞—Ç—å `doSomething`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `someProp`)
}
```

–°–ª–æ–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, –∫–∞–∫–∏–µ –ø—Ä–æ–ø—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –≤–Ω–µ —ç—Ñ—Ñ–µ–∫—Ç–∞. –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É, **–ª—É—á—à–µ –æ–±—ä—è–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –Ω—É–∂–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—É *–≤–Ω—É—Ç—Ä–∏* –Ω–µ–≥–æ**. –¢–æ–≥–¥–∞ –ª–µ–≥—á–µ —É–≤–∏–¥–µ—Ç—å, –æ—Ç –∫–∞–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç —ç—Ñ—Ñ–µ–∫—Ç:

```js{4,8}
function Example({ someProp }) {
  useEffect(() => {
    function doSomething() {
      console.log(someProp);
    }

    doSomething();
  }, [someProp]); // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω–∞—à —ç—Ñ—Ñ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ `someProp`)
}
```

–ï—Å–ª–∏ –ø–æ—Å–ª–µ —Ç–∞–∫–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º—ã –≤–∏–¥–∏–º, —á—Ç–æ –Ω–∏–∫–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, —Ç–æ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–∫–∞–∑–∞—Ç—å `[]`:

```js{7-8}
useEffect(() => {
  function doSomething() {
    console.log('–ü—Ä–∏–≤–µ—Ç');
  }

  doSomething();
}, []); // ‚úÖ –¢–∞–∫ –º–æ–∂–Ω–æ –ø–æ—Å—Ç—É–ø–∏—Ç—å –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ
        // –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
```

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏, –º–æ–∂–µ—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –Ω–∏–∂–µ.

>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
>
>–ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∏–ª–æ [`exhaustive-deps`](https://github.com/facebook/react/issues/14920) –≤ –ø–∞–∫–µ—Ç–µ –Ω–∞—à–µ–≥–æ –ª–∏–Ω—Ç–µ—Ä–∞ [`eslint-plugin-react-hooks`](https://www.npmjs.com/package/eslint-plugin-react-hooks#installation). –û–Ω–æ –ø–æ–º–æ–∂–µ—Ç –≤—ã—è–≤–ª—è—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ.

–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º—Å—è, –ø–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ.

–ö–æ–≥–¥–∞ –≤—ã —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ [—Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](/docs/hooks-reference.html#conditionally-firing-an-effect) —á–µ—Ä–µ–∑ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç —Ö—É–∫–æ–≤ `useEffect`, `useLayoutEffect`, `useMemo`, `useCallback` –∏–ª–∏ `useImperativeHandle`, –≤ –Ω–µ–≥–æ –¥–æ–ª–∂–Ω—ã –≤–æ–π—Ç–∏ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω—ã –≤ –ø–æ—Ç–æ–∫–µ –¥–∞–Ω–Ω—ã—Ö React, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–ø—Å—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ.

–ë–µ–∑–æ–ø–∞—Å–Ω–æ –æ–ø—É—Å–∫–∞—Ç—å –≤ —Å–ø–∏—Å–∫–µ **—Ç–æ–ª—å–∫–æ** —Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–∏ —Å–∞–º–∏, –Ω–∏ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç, –ø—Ä–æ–ø—Å—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–ª–∏ –∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ. –¢–∞–∫, –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –ø–æ–∫–∞–∑–∞–Ω –±–∞–≥:

```js{5,12}
function ProductPage({ productId }) {
  const [product, setProduct] = useState(null);

  async function fetchProduct() {
    const response = await fetch('http://myapi/product/' + productId); // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–ø productId
    const json = await response.json();
    setProduct(json);
  }

  useEffect(() => {
    fetchProduct();
  }, []); // üî¥ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ `fetchProduct` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `productId`
  // ...
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å —Ç–∞–∫–æ–π –∫–æ–¥, –ø–µ—Ä–µ–º–µ—â–∞—è —Ñ—É–Ω–∫—Ü–∏—é _–≤–Ω—É—Ç—Ä—å_ –≤–∞—à–µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞**. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞–º–µ—á–∞—Ç—å, –∫–∞–∫–∏–µ –ø—Ä–æ–ø—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–∞—à–∏–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º, –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤ —Å–ø–∏—Å–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```js{5-10,13}
function ProductPage({ productId }) {
  const [product, setProduct] = useState(null);

  useEffect(() => {
    // –ü–µ—Ä–µ–º–µ—Å—Ç–∏–≤ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –≤–Ω—É—Ç—Ä—å —ç—Ñ—Ñ–µ–∫—Ç–∞, –º—ã —è—Å–Ω–æ –≤–∏–¥–∏–º, –∫–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç.
    async function fetchProduct() {
      const response = await fetch('http://myapi/product/' + productId);
      const json = await response.json();
      setProduct(json);
    }

    fetchProduct();
  }, [productId]); // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ productId
  // ...
}
```

–≠—Ç–æ —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã, –ø—Ä–∏—à–µ–¥—à–∏–µ –Ω–µ –≤ –ø–æ—Ä—è–¥–∫–µ –∑–∞–ø—Ä–æ—Å–æ–≤, —Å –ø–æ–º–æ—â—å—é –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤–Ω—É—Ç—Ä–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞:

```js{2,6,10}
  useEffect(() => {
    let ignore = false;
    async function fetchProduct() {
      const response = await fetch('http://myapi/product/' + productId);
      const json = await response.json();
      if (!ignore) setProduct(json);
    }
    fetchProduct();
    return () => { ignore = true };
  }, [productId]);
```

–ú—ã –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é –≤–Ω—É—Ç—Ä—å —ç—Ñ—Ñ–µ–∫—Ç–∞, —Ç–∞–∫ —á—Ç–æ –µ—ë –Ω–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤ —Å–ø–∏—Å–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

>–°–æ–≤–µ—Ç
>
>–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [—ç—Ç–æ—Ç –Ω–µ–±–æ–ª—å—à–æ–π –ø—Ä–∏–º–µ—Ä](https://codesandbox.io/s/jvvkoo8pq3) –∏ [—ç—Ç—É —Å—Ç–∞—Ç—å—é](https://www.robinwieruch.de/react-hooks-fetch-data/), —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é —Ö—É–∫–æ–≤.

**–ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –≤—ã _–Ω–µ_ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ —ç—Ñ—Ñ–µ–∫—Ç, –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:**

* **–ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–º–µ—Å—Ç–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Å–Ω–∞—Ä—É–∂–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞**. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –æ–Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –Ω–µ –±—É–¥–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ–ø—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ç–∞–∫ —á—Ç–æ –µ—ë –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—á–∏—Å–ª—è—Ç—å –≤ —Å–ø–∏—Å–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
* –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ, —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å—Ç—ã–º –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ–º –∏ –µ—ë –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞, –≤—ã –º–æ–∂–µ—Ç–µ **–≤—ã–∑–≤–∞—Ç—å –µ—ë —Å–Ω–∞—Ä—É–∂–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞, –∞ –Ω–µ –≤–Ω—É—Ç—Ä–∏**, –∏ —Å–¥–µ–ª–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≤–∏—Å—è—â–∏–º –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —ç—Ç–æ–≥–æ –≤—ã–∑–æ–≤–∞, –∞ –Ω–µ –æ—Ç —Å–∞–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
* –í –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ –º–æ–∂–µ—Ç–µ **–¥–æ–±–∞–≤–∏—Ç—å —Å–∞–º—É —Ñ—É–Ω–∫—Ü–∏—é –≤ —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∞, –Ω–æ _–æ–±–µ—Ä–Ω—É–≤ –µ—ë –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ_** –≤ —Ö—É–∫ [`useCallback`](/docs/hooks-reference.html#usecallback). –¢–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–π, –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è –µ—ë –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```js{2-5,13}
function ProductPage({ productId }) {
  // ‚úÖ –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º –≤ useCallback, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
  const fetchProduct = useCallback(() => {
    // ... –ß—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ–º —Å productId ...
  }, [productId]); // ‚úÖ –ü–µ—Ä–µ—á–∏—Å–ª—è–µ–º –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ useCallback

  return <ProductDetails fetchProduct={fetchProduct} />;
}

function ProductDetails({ fetchProduct }) {
  useEffect(() => {
    fetchProduct();
  }, [fetchProduct]); // ‚úÖ –ü–µ—Ä–µ—á–∏—Å–ª—è–µ–º –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ useEffect
  // ...
}
```

–ó–∞–º–µ—Ç—å—Ç–µ, —á—Ç–æ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ –º—ã –≤—Å—ë –µ—â—ë **–¥–æ–ª–∂–Ω—ã** —É–∫–∞–∑–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ —Å–ø–∏—Å–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –¢–æ–≥–¥–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø–∞ `productId` —É `ProductPage` –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É –∑–∞–ø—Ä–∞—à–∏–≤–∞–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `ProductDetails`.

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ? {#what-can-i-do-if-my-effect-dependencies-change-too-often}

–ë—ã–≤–∞—é—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ —ç—Ñ—Ñ–µ–∫—Ç –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è. –£ –≤–∞—Å –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∂–µ–ª–∞–Ω–∏–µ –Ω–µ –≤–∫–ª—é—á–∞—Ç—å —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ö—É–∫–∞, –Ω–æ —ç—Ç–æ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–∞–≥–∞–º:

```js{6,9}
function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const id = setInterval(() => {
      setCount(count + 1); // –≠—Ç–æ—Ç —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è `count`
    }, 1000);
    return () => clearInterval(id);
  }, []); // üî¥ –ë–∞–≥: `count` –Ω–µ —É–∫–∞–∑–∞–Ω –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

  return <h1>{count}</h1>;
}
```

–ü—É—Å—Ç–æ–π –Ω–∞–±–æ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π `[]` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, –∞ –Ω–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–µ. –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `setInterval` –∑–Ω–∞—á–µ–Ω–∏–µ `count` –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã —Å–æ–∑–¥–∞–ª–∏ –∑–∞–º—ã–∫–∞–Ω–∏–µ —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `count`, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –≤ `0`, –∫–∞–∫ —ç—Ç–æ –±—ã–ª–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞. –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É —ç—Ç–æ—Ç –æ–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤ –≤—ã–∑—ã–≤–∞–µ—Ç `setCount(0 + 1)`, –ø–æ—ç—Ç–æ–º—É —Å—á–µ—Ç—á–∏–∫ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 1.

–ï—Å–ª–∏ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∫–∞–∫ `[count]`, —Ç–æ –±–∞–≥ –±—É–¥–µ—Ç —É—Å—Ç—Ä–∞–Ω—ë–Ω, –Ω–æ —ç—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ —Å–±—Ä–∞—Å—ã–≤–∞–Ω–∏—é –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏. –¢–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ. –ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ, –º—ã –º–æ–∂–µ–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å [—Ñ–æ—Ä–º—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ö—É–∫–∞ `setState`](/docs/hooks-reference.html#functional-updates), –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å, *–∫–∞–∫* –¥–æ–ª–∂–Ω–æ –º–µ–Ω—è—Ç—å—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –Ω–µ —Å—Å—ã–ª–∞—è—Å—å —è–≤–Ω–æ –Ω–∞ *—Ç–µ–∫—É—â–µ–µ* —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

```js{6,9}
function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const id = setInterval(() => {
      setCount(c => c + 1); // ‚úÖ –≠—Ç–∞ —Å—Ç—Ä–æ—á–∫–∞ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `count`
    }, 1000);
    return () => clearInterval(id);
  }, []); // ‚úÖ –ù–∞—à —ç—Ñ—Ñ–µ–∫—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

  return <h1>{count}</h1>;
}
```

(–ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `setCount` –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞, –ø–æ—ç—Ç–æ–º—É –µ—ë –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –Ω–µ –≤–∫–ª—é—á–∞—Ç—å –≤ —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.)

–¢–µ–ø–µ—Ä—å –æ–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤ `setInterval` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É, –Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≤—ã–∑–æ–≤ `setCount` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è `count` (–Ω–∞–∑—ã–≤–∞–µ–º–æ–µ `c` –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –≤—ã–∑–æ–≤–µ –∑–¥–µ—Å—å.)

–í –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –æ–¥–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–æ–≥–æ), –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ —Ö—É–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞ –≤ —Ö—É–∫ [`useReducer`](/docs/hooks-reference.html#usereducer). [–≠—Ç–∞ —Å—Ç–∞—Ç—å—è](https://adamrackis.dev/state-and-use-reducer/) –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å. **–ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `dispatch` –∏–∑ —Ö—É–∫–∞ `useReducer` –≤—Å–µ–≥–¥–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞** ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–¥—é—Å–µ—Ä–∞ –æ–±—ä—è–≤–ª–µ–Ω–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ —Å—á–∏—Ç—ã–≤–∞–µ—Ç –µ–≥–æ –ø—Ä–æ–ø—Å—ã.

–í –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –Ω–∞–ø–æ–¥–æ–±–∏–µ `this` –≤ –∫–ª–∞—Å—Å–∞—Ö, –≤—ã –º–æ–∂–µ—Ç–µ [–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Ñ](/docs/hooks-faq.html#is-there-something-like-instance-variables), —á—Ç–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å –≤ –Ω—ë–º –∏–∑–º–µ–Ω—è–µ–º—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é. –¢–æ–≥–¥–∞ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∏ —á–∏—Ç–∞—Ç—å –∏–∑ –Ω–µ–≥–æ. –ù–∞–ø—Ä–∏–º–µ—Ä:

```js{2-6,10-11,16}
function Example(props) {
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–≤–µ–∂–∞–π—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–ø—Å–æ–≤ –≤ ref
  const latestProps = useRef(props);
  useEffect(() => {
    latestProps.current = props;
  });

  useEffect(() => {
    function tick() {
      // –°—á–∏—Ç—ã–≤–∞–µ–º —Å–≤–µ–∂–∞–π—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–ø—Å–æ–≤ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è
      console.log(latestProps.current);
    }

    const id = setInterval(tick, 1000);
    return () => clearInterval(id);
  }, []); // –≠—Ç–æ—Ç —ç—Ñ—Ñ–µ–∫—Ç –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ
}
```

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏–±–µ–≥–∞—Ç—å –∫ —ç—Ç–æ–º—É –ø–æ–¥—Ö–æ–¥—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ª—É—á—à–µ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã, –ø–æ—Å–∫–æ–ª—å–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø–æ–ª–∞–≥–∞—é—â–∏–µ—Å—è –Ω–∞ –∏–∑–º–µ–Ω—á–∏–≤–æ—Å—Ç—å, –º–µ–Ω–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã. –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø–ª–æ—Ö–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –≤—ã—Ä–∞–∑–∏—Ç—å, [–æ—Ç–∫—Ä–æ–π—Ç–µ –∏—à—å—é –Ω–∞ GitHub](https://github.com/facebook/react/issues/new) —Å –ø—Ä–∏–º–µ—Ä–æ–º –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞ –∏ –º—ã –ø–æ—Å—Ç–∞—Ä–∞–µ–º—Å—è –ø–æ–º–æ—á—å.

### –ö–∞–∫ —è –º–æ–≥—É —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `shouldComponentUpdate`? {#how-do-i-implement-shouldcomponentupdate}

–í—ã –º–æ–∂–µ—Ç–µ –æ–±–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –≤—ã–∑–æ–≤ `React.memo` –¥–ª—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –µ–≥–æ –ø—Ä–æ–ø—Å–æ–≤:

```js
const Button = React.memo((props) => {
  // –≤–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
});
```

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ö—É–∫–æ–º, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –Ω–µ –≤–µ–¥—ë—Ç —Å–µ–±—è –∫–∞–∫ —Ö—É–∫. `React.memo` –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ `PureComponent`, –Ω–æ –æ–Ω–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ–ø—Å—ã. (–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é —Å—Ä–∞–≤–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–º–µ—Ç —Å—Ç–∞—Ä—ã–µ –∏ –Ω–æ–≤—ã–µ –ø—Ä–æ–ø—Å—ã. –ï—Å–ª–∏ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–µ—Ä–Ω—ë—Ç `true`, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–æ.)

`React.memo` –Ω–µ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å. –ù–æ –≤—ã –º–æ–∂–µ—Ç–µ —Ç–∞–∫–∂–µ —Å–¥–µ–ª–∞—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —á–∏—Å—Ç—ã–º–∏ –∏–ª–∏ –¥–∞–∂–µ [–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—è —Ö—É–∫ `useMemo`](/docs/hooks-faq.html#how-to-memoize-calculations).

### –ö–∞–∫ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è? {#how-to-memoize-calculations}

–•—É–∫ [`useMemo`](/docs/hooks-reference.html#usememo) –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –ø—É—Ç—ë–º –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø—Ä–æ—à–ª–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

```js
const memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);
```

–≠—Ç–æ—Ç –∫–æ–¥ –≤—ã–∑–æ–≤–µ—Ç `computeExpensiveValue(a, b)`. –ù–æ –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `[a, b]` –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Å –ø—Ä–æ—à–ª–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞, `useMemo` –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –≤–µ—Ä–Ω—É–ª –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑.

–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–∞—è –≤ `useMemo`, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞. –ù–µ —Å—Ç–æ–∏—Ç –¥–µ–ª–∞—Ç—å –≤ –Ω–µ–π —á—Ç–æ-—Ç–æ, —á—Ç–æ –≤—ã –æ–±—ã—á–Ω–æ –Ω–µ –¥–µ–ª–∞–µ—Ç–µ –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ö—É–∫–µ `useEffect`, –∞ –Ω–µ –≤ `useMemo`.

**–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç–µ `useMemo`, –∫–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –Ω–æ –Ω–µ —Å—Ç–æ–∏—Ç –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –Ω–µ—ë –Ω–∞ 100%.** –í –±—É–¥—É—â–µ–º React —Å–º–æ–∂–µ—Ç `–∑–∞–±—ã—Ç—å` –ø—Ä–æ—à–ª—ã–µ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–µ—Ä–µ—Ä–∞—Å—á—ë—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ–Ω–¥–µ—Ä–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏, –∑–∞–Ω—è—Ç–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –≤–Ω–µ —ç–∫—Ä–∞–Ω–∞. –ü–∏—à–∏—Ç–µ –≤–∞—à –∫–æ–¥ —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ `useMemo`, –∏ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. (–î–ª—è —Ä–µ–¥–∫–∏—Ö —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ **–Ω–µ –¥–æ–ª–∂–Ω–æ –Ω–∏–∫–æ–≥–¥–∞** –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è, –≤—ã –º–æ–∂–µ—Ç–µ [–ª–µ–Ω–∏–≤–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å](#how-to-create-expensive-objects-lazily) —Ä–µ—Ñ.)

–¢–∞–∫–∂–µ —É–¥–æ–±–Ω–æ, —á—Ç–æ `useMemo` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∑–∞—Ç—Ä–∞—Ç–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ —Ä–µ–Ω–¥–µ—Ä—ã –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```js
function Parent({ a, b }) {
  // –†–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `a` –∏–∑–º–µ–Ω–∏—Ç—Å—è:
  const child1 = useMemo(() => <Child1 a={a} />, [a]);
  // –†–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `b` –∏–∑–º–µ–Ω–∏—Ç—Å—è:
  const child2 = useMemo(() => <Child2 b={b} />, [b]);
  return (
    <>
      {child1}
      {child2}
    </>
  )
}
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–æ–≤, —Ç–∞–∫ –∫–∞–∫ –≤—ã–∑–æ–≤—ã —Ö—É–∫–æ–≤ [–Ω–µ –º–æ–≥—É—Ç](/docs/hooks-rules.html) –±—ã—Ç—å –ø–æ–º–µ—â–µ–Ω—ã –≤–Ω—É—Ç—Ä—å —Ü–∏–∫–ª–æ–≤. –ù–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞, –∏ –≤—ã–∑–≤–∞—Ç—å `useMemo` —Ç–∞–º.

### –ö–∞–∫ –ª–µ–Ω–∏–≤–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–∫—Ç—ã? {#how-to-create-expensive-objects-lazily}

–•—É–∫ `useMemo` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º [–∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å–æ–∑–∞—Ç—Ä–∞—Ç–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è](#how-to-memoize-calculations), –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å. –û–¥–Ω–∞–∫–æ, —ç—Ç–æ—Ç —Å–ø–æ—Å–æ–± **–Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç**, —á—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –Ω–µ —Å–ª—É—á–∏—Ç—Å—è. –ò–Ω–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–∏—Ç—å—Å—è, —á—Ç–æ –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.

**–ü–µ—Ä–≤—ã–π —á–∞—Å—Ç—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç–Ω–æ:**

```js
function Table(props) {
  // ‚ö†Ô∏è createRows() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
  const [rows, setRows] = useState(createRows(props.count));
  // ...
}
```

–ß—Ç–æ–±—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∫–æ—Ç–æ—Ä–æ–µ –ø–æ —Ñ–∞–∫—Ç—É –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è), –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å **—Ñ—É–Ω–∫—Ü–∏—é** –≤ `useState`:

```js
function Table(props) {
  // ‚úÖ createRows() –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
  const [rows, setRows] = useState(() => createRows(props.count));
  // ...
}
```

React –≤—ã–∑–æ–≤–µ—Ç —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –æ–¥–∏–Ω —Ä–∞–∑ –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –°–º–æ—Ç—Ä–∏—Ç–µ [—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API –ø–æ —Ö—É–∫—É `useState`](/docs/hooks-reference.html#usestate).

**–ò–Ω–æ–≥–¥–∞, –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ —Ö—É–∫–∞ `useRef()`.** –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–æ–∑–º–æ–∂–Ω–æ –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑:

```js
function Image(props) {
  // ‚ö†Ô∏è IntersectionObserver —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
  const ref = useRef(new IntersectionObserver(onIntersect));
  // ...
}
```

–£ —Ö—É–∫–∞ `useRef` **–Ω–µ—Ç** —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–∞–∫ —É `useState`. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ, –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ª–µ–Ω–∏–≤–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –Ω–∞–∑–Ω–∞—á–∞—Ç—å —ç—Ç–æ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä:

```js
function Image(props) {
  const ref = useRef(null);

  // ‚úÖ IntersectionObserver –ª–µ–Ω–∏–≤–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
  function getObserver() {
    if (ref.current === null) {
      ref.current = new IntersectionObserver(onIntersect);
    }
    return ref.current;
  }

  // –ö–æ–≥–¥–∞ –æ–Ω –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è, –≤—ã–∑–æ–≤–∏—Ç–µ getObserver()
  // ...
}
```

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö, –∫—Ä–æ–º–µ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞, –∫–æ–≥–¥–∞ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Flow –∏–ª–∏ TypeScript, –≤—ã –º–æ–∂–µ—Ç–µ —Ç–∞–∫–∂–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–ª—è `getObserver()` –Ω–µ–ø—É—Å—Ç–æ–π —Ç–∏–ø –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏.

### –Ø–≤–ª—è—é—Ç—Å—è –ª–∏ —Ö—É–∫–∏ –º–µ–¥–ª–µ–Ω–Ω—ã–º–∏ –∏–∑-–∑–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ? {#are-hooks-slow-because-of-creating-functions-in-render}

–ù–µ—Ç. –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö —Å—ã—Ä–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–º—ã–∫–∞–Ω–∏–π –Ω–µ —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –∫–ª–∞—Å—Å–æ–≤, –∫—Ä–æ–º–µ –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞–µ–≤.

–¢–∞–∫–∂–µ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ, —á—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ö—É–∫–æ–≤ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:

* –•—É–∫–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–∏—Ö –∑–∞—Ç—Ä–∞—Ç, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–∏–∑–±–µ–∂–Ω—ã –≤ –∫–ª–∞—Å—Å–∞—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ –∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ.

* **–ü—Ä–æ–µ–∫—Ç, –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ —Ö—É–∫–∞—Ö, –∏–º–µ–µ—Ç –º–µ–Ω–µ–µ –≥–ª—É–±–æ–∫–æ–µ –¥–µ—Ä–µ–≤–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**. –í —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä-–ø—Ä–æ–ø—Å–æ–≤, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±—ã–ª–æ –±—ã –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –±–æ–ª—å—à–µ. –¢—É—Ç —Å—Ç–æ–∏—Ç –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ —á–µ–º –º–µ–Ω—å—à–µ –¥–µ—Ä–µ–≤–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —Ç–µ–º –º–µ–Ω—å—à–µ —Ä–∞–±–æ—Ç—ã React –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å.

–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ, –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤ React —Å–≤—è–∑–∞–Ω—ã —Å —Ç–µ–º, –∫–∞–∫ –ø–µ—Ä–µ–¥–∞—á–∞ –Ω–æ–≤—ã—Ö –∫–æ–ª–±—ç–∫–æ–≤ –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ –ª–æ–º–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ `shouldComponentUpdate` –≤ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö. –ü–æ–¥—Ö–æ–¥ —Å —Ö—É–∫–∞–º–∏ –º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É —Ç—Ä–µ–º—è —Å–ø–æ—Å–æ–±–∞–º–∏.

* –•—É–∫ [`useCallback`](/docs/hooks-reference.html#usecallback) –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç—É –∂–µ —Å–∞–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –∫–æ–ª–±—ç–∫ –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –ø–æ—ç—Ç–æ–º—É `shouldComponentUpdate` –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É:

    ```js{2}
    // –ù–µ —Å–æ–∑–¥–∞—Å—Ç—Å—è –∑–∞–Ω–æ–≤–æ, –ø–æ–∫–∞ `a` –∏–ª–∏ `b` –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è
    const memoizedCallback = useCallback(() => {
      doSomething(a, b);
    }, [a, b]);
    ```

* –•—É–∫ [`useMemo`](/docs/hooks-faq.html#how-to-memoize-calculations) –æ–±–ª–µ–≥—á–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å, –∫–æ–≥–¥–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–æ—á–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è, —É–º–µ–Ω—å—à–∞—è –Ω—É–∂–¥—É –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —á–∏—Å—Ç—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

* –ù–∞–∫–æ–Ω–µ—Ü, —Ö—É–∫ [`useReducer`](/docs/hooks-reference.html#usereducer) —É–º–µ–Ω—å—à–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–æ–ª–±—ç–∫–∏ –≥–ª—É–±–æ–∫–æ –≤–Ω–∏–∑ –ø–æ –¥–µ—Ä–µ–≤—É, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –Ω–∏–∂–µ.

### –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–ª–±—ç–∫–æ–≤ –≤–Ω–∏–∑? {#how-to-avoid-passing-callbacks-down}

–ú—ã –ø–æ–Ω—è–ª–∏, —á—Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–æ–ª–±—ç–∫–∏ –≤–Ω–∏–∑ –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ –¥–µ—Ä–µ–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –î–∞–∂–µ —É—á–∏—Ç—ã–≤–∞—è, —á—Ç–æ —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –±–æ–ª–µ–µ —è–≤–Ω—ã–π, —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —á–µ—Ä–µ—Å—á—É—Ä –≥—Ä–æ–º–æ–∑–¥–∫–∏–º.

–í –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–µ—Ä–µ–≤—å–µ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤–Ω–∏–∑ —Ñ—É–Ω–∫—Ü–∏—é `dispatch` –∏–∑ —Ö—É–∫–∞ [`useReducer`](/docs/hooks-reference.html#usereducer) —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç:

```js{4,5}
const TodosDispatch = React.createContext(null);

function TodosApp() {
  // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: `dispatch` –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤
  const [todos, dispatch] = useReducer(todosReducer);

  return (
    <TodosDispatch.Provider value={dispatch}>
      <DeepTree todos={todos} />
    </TodosDispatch.Provider>
  );
}
```

–õ—é–±–æ–π –¥–æ—á–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –¥–µ—Ä–µ–≤–µ –≤–Ω—É—Ç—Ä–∏ `TodosApp` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `dispatch`, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã-–¥–µ–π—Å—Ç–≤–∏—è –≤ `TodosApp`:

```js{2,3}
function DeepChild(props) {
  // –ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ, –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å dispatch –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
  const dispatch = useContext(TodosDispatch);

  function handleClick() {
    dispatch({ type: 'add', text: '–ü—Ä–∏–≤–µ—Ç' });
  }

  return (
    <button onClick={handleClick}>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
  );
}
```

–≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –±–æ–ª–µ–µ —É–¥–æ–±–µ–Ω –∫–∞–∫ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–æ–¥–∞ (–Ω–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø—Ä–æ–ø—Å—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–ª–±—ç–∫–æ–≤), —Ç–∞–∫ –∏ –≤ —Ä–∞–∑—Ä–µ–∑–µ –∏–∑–±–µ–∂–∞–Ω–∏—è –æ–±—â–∏—Ö –ø—Ä–æ–±–ª–µ–º —Å –∫–æ–ª–±—ç–∫–∞–º–∏. –ü–µ—Ä–µ–¥–∞—á–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `dispatch` –ø–æ —Ç–∞–∫–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É ‚Äì —ç—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –≤—ã–∑–æ–≤–∞ –∫–æ–ª–±—ç–∫–æ–≤ –∏ –∏–∑–±–µ–∂–∞–Ω–∏—è –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ –≥–ª—É–±–∏–Ω–µ –¥–µ—Ä–µ–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å *—Å–æ—Å—Ç–æ—è–Ω–∏–µ* –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–Ω–∏–∑ —á–µ—Ä–µ–∑ –ø—Ä–æ–ø—Å—ã (–±–æ–ª–µ–µ —è–≤–Ω–æ) –∏–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç (–±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –¥–µ—Ä–µ–≤–∞). –ï—Å–ª–∏ –≤–∞—à –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ —Ç–æ–º —á–∏—Å–ª–µ –ø–µ—Ä–µ–¥–∞—ë—Ç –Ω–µ–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –¢–∞–∫ –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç `dispatch` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, —Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –µ–≥–æ, –Ω–µ –±—É–¥—É—Ç –Ω—É–∂–¥–∞—Ç—å—Å—è –≤ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–µ, –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –∏–º –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –µ—â—ë –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —á–∞—Å—Ç–æ –∏–∑–º–µ–Ω—è–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Ö—É–∫–∞ `useCallback`? {#how-to-read-an-often-changing-value-from-usecallback}

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
>
> –ú—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º [–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `dispatch` –≤–Ω–∏–∑ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç](#how-to-avoid-passing-callbacks-down) –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–ª–±—ç–∫–æ–≤ —á–µ—Ä–µ–∑ –ø—Ä–æ–ø—Å—ã. –°–ª–µ–¥—É—é—â–∏–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–∏–≤–µ–¥—ë–Ω —Ç—É—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª–Ω–æ—Ç—ã –∫–∞—Ä—Ç–∏–Ω—ã –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ª–∞–∑–µ–π–∫–∏.

–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–¥–∫–∏—Ö —Å–ª—É—á–∞—è—Ö, –≤–∞–º –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–±—ç–∫ —Å –ø–æ–º–æ—â—å—é —Ö—É–∫–∞ [`useCallback`](/docs/hooks-reference.html#usecallback), –Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ö–æ—Ä–æ—à–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ. –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –∫–µ—à–∏—Ä—É–µ—Ç–µ, —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º —Å–æ–±—ã—Ç–∏–π –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [—Ä–µ—Ñ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–≤–æ–π—Å—Ç–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞](#is-there-something-like-instance-variables), –∏ –≤—Ä—É—á–Ω—É—é —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç—É–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:

```js{6,10}
function Form() {
  const [text, updateText] = useState('');
  const textRef = useRef();

  useEffect(() => {
    textRef.current = text; // –ó–∞–ø–∏—Å–∞—Ç—å —ç—Ç–æ –≤ —Ä–µ—Ñ
  });

  const handleSubmit = useCallback(() => {
    const currentText = textRef.current; // –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∏–∑ —Ä–µ—Ñ–∞
    alert(currentText);
  }, [textRef]); // –ò–∑–±–µ–≥–∞–µ–º –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∏–π handleSubmit

  return (
    <>
      <input value={text} onChange={e => updateText(e.target.value)} />
      <ExpensiveTree onSubmit={handleSubmit} />
    </>
  );
}
```

–≠—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –Ω–æ –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç—É —Ö–∏—Ç—Ä—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é, –µ—Å–ª–∏ —ç—Ç–æ –≤–∞–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ, —Å–æ–≤–µ—Ç—É–µ–º –≤—ã–Ω–µ—Å—Ç–∏ —ç—Ç—É –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ö—É–∫:

```js{4,16}
function Form() {
  const [text, updateText] = useState('');
  // –ë—É–¥–µ—Ç –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–æ, –¥–∞–∂–µ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `text` –∏–∑–º–µ–Ω–∏—Ç—Å—è:
  const handleSubmit = useEventCallback(() => {
    alert(text);
  }, [text]);

  return (
    <>
      <input value={text} onChange={e => updateText(e.target.value)} />
      <ExpensiveTree onSubmit={handleSubmit} />
    </>
  );
}

function useEventCallback(fn, dependencies) {
  const ref = useRef(() => {
    throw new Error('–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞.');
  });

  useEffect(() => {
    ref.current = fn;
  }, [fn, ...dependencies]);

  return useCallback(() => {
    const fn = ref.current;
    return fn();
  }, [ref]);
}
```

–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ –º—ã **–Ω–µ —Å–æ–≤–µ—Ç—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥** –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ —Ç—É—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª–Ω–æ—Ç—ã –∫–∞—Ä—Ç–∏–Ω—ã. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ, —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å [–∏–∑–±–µ–≥–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–ª–±—ç–∫–æ–≤ –≥–ª—É–±–æ–∫–æ –≤–Ω–∏–∑ –≤ –¥–µ—Ä–µ–≤–æ](#how-to-avoid-passing-callbacks-down).


## –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º {#under-the-hood}

### –ö–∞–∫ React —Å–≤—è–∑—ã–≤–∞–µ—Ç –≤—ã–∑–æ–≤—ã —Ö—É–∫–æ–≤ —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º? {#how-does-react-associate-hook-calls-with-components}

React —Å–ª–µ–¥–∏—Ç –∑–∞ —Ç–µ–º, –∫–∞–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç. –ë–ª–∞–≥–æ–¥–∞—Ä—è [–ø—Ä–∞–≤–∏–ª–∞–º —Ö—É–∫–æ–≤](/docs/hooks-rules.html), –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ —Ö—É–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ö—É–∫–∏ —Ç–∞–∫–∂–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤).

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å–ø–∏—Å–æ–∫ `—è—á–µ–µ–∫ –ø–∞–º—è—Ç–∏`, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∫–∞–∂–¥—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º. –û–Ω–∏ —è–≤–ª—è—é—Ç—Å—è JavaScript-–æ–±—ä–µ–∫—Ç–∞–º–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º—ã –º–æ–∂–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ. –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ–∫–∏–π —Ö—É–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä `useState()`, –æ–Ω —á–∏—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —è—á–µ–π–∫–∏ (–∏–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –µ—ë –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞) –∏ –¥–≤–∏–≥–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é. –¢–∞–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º –∫–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ `useState()` –ø–æ–ª—É—á–∏—Ç —Å–≤–æ—ë –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

### –ß—Ç–æ –ø–æ—Å–ª—É–∂–∏–ª–æ –ø—Ä–æ–æ–±—Ä–∞–∑–æ–º —Ö—É–∫–æ–≤? {#what-is-the-prior-art-for-hooks}

–•—É–∫–∏ –±—ã–ª–∏ –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö –∏–¥–µ—è—Ö –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö:

* –ù–∞—à–∏ —Å—Ç–∞—Ä—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º API –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ [react-future](https://github.com/reactjs/react-future/tree/master/07%20-%20Returning%20State).
* –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å API —Ä–µ–Ω–¥–µ—Ä-–ø—Ä–æ–ø—Å –æ—Ç React-—Å–æ–æ–±—â–µ—Å—Ç–≤–∞, –≤–∫–ª—é—á–∞—è [–∫–æ–º–ø–æ–Ω–µ–Ω—Ç Reactions](https://github.com/reactions/component) –æ—Ç [–†–∞–π–Ω–∞ –§–ª–æ—Ä–µ–Ω—Å–∞ (Ryan Florence)](https://github.com/ryanflorence).
* [Dominic Gannaway](https://github.com/trueadm) –∏ –µ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ [–∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ `adopt`](https://gist.github.com/trueadm/17beb64288e30192f3aa29cad0218067), –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–≥–æ —Å–∞—Ö–∞—Ä–∞ –¥–ª—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ —Ä–µ–Ω–¥–µ—Ä-–ø—Ä–æ–ø—Å.
* –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —è—á–µ–π–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ [DisplayScript](http://displayscript.org/introduction.html).
* [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Ä–µ–¥—é—Å–µ—Ä—ã](https://reasonml.github.io/reason-react/docs/en/state-actions-reducer.html) –≤ ReasonReact.
* [–ü–æ–¥–ø–∏—Å–∫–∏](http://reactivex.io/rxjs/class/es6/Subscription.js~Subscription.html) –≤ Rx.
* [–ê–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã](https://github.com/ocamllabs/ocaml-effects-tutorial#2-effectful-computations-in-a-pure-setting) –≤ Multicore OCaml.

[–°–µ–±–∞—Å—Ç—å—è–Ω –ú–∞—Ä–∫–±–∞–≥–µ (Sebastian Markb√•ge)](https://github.com/sebmarkbage) –ø—Ä–µ–¥–ª–æ–∂–∏–ª –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω —Ö—É–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–¥–Ω–µ–µ —É–ª—É—á—à–∏–ª–∏ [–≠–Ω–¥—Ä—é –ö–ª–∞—Ä–∫ (Andrew Clark)](https://github.com/acdlite), [–°–æ—Ñ–∏ –ê–ª–ø–µ—Ä—Ç (Sophie Alpert)](https://github.com/sophiebits), [–î–æ–º–∏–Ω–∏–∫ –ì–∞–Ω–Ω–∞—É—ç–π (Dominic Gannaway)](https://github.com/trueadm) –∏ –¥—Ä—É–≥–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥—ã React.
