---
title: useCallback
---

<Intro>

`useCallback` ‚Äî —ç—Ç–æ —Ö—É–∫ –≤ React, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞–º–∏.

```js
const cachedFn = useCallback(fn, dependencies)
```

</Intro>

<InlineToc />

---

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ {/*reference*/}

### `useCallback(fn, dependencies)` {/*usecallback*/}

–í—ã–∑–æ–≤–∏—Ç–µ `useCallback` –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏:

```js {4,9}
import { useCallback } from 'react';

export default function ProductPage({ productId, referrer, theme }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);
```

[–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –Ω–∏–∂–µ.](#usage)

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã {/*parameters*/}

* `fn`: –ó–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å. –û–Ω–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª—é–±—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ª—é–±—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. React –≤–µ—Ä–Ω—ë—Ç (–Ω–æ –Ω–µ –≤—ã–∑–æ–≤–µ—Ç!) –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ. –ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö React –¥–∞—Å—Ç –≤–∞–º —Ç—É –∂–µ —Ñ—É–Ω–∫—Ü–∏—é, –µ—Å–ª–∏ `dependencies` –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –æ–Ω –≤–µ—Ä–Ω—ë—Ç —Ñ—É–Ω–∫—Ü–∏—é, –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –ø—Ä–∏ —Ç–µ–∫—É—â–µ–º —Ä–µ–Ω–¥–µ—Ä–µ, –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –µ—ë –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. React –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é. –û–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ—ë –≤–∞–º, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Ä–µ—à–∏—Ç—å, –∫–æ–≥–¥–∞ –∏ –∫–∞–∫ –µ—ë –≤—ã–∑—ã–≤–∞—Ç—å.

* `dependencies`: –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è –∫–æ–¥ `fn`. –ö —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º –æ—Ç–Ω–æ—Å—è—Ç—Å—è –ø—Ä–æ–ø—Å—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Ç–µ–ª–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –ï—Å–ª–∏ –≤–∞—à –ª–∏–Ω—Ç–µ—Ä [–Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å React](/learn/editor-setup#linting), –æ–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ –∫–∞–∂–¥–æ–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–Ω–æ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –±—ã—Ç—å –∑–∞–ø–∏—Å–∞–Ω –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫: `[dep1, dep2, dep3]`. React –±—É–¥–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∫–∞–∂–¥—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å –µ—ë –ø—Ä–µ–¥—ã–¥—É—â–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º, –∏—Å–ø–æ–ª—å–∑—É—è –∞–ª–≥–æ—Ä–∏—Ç–º —Å—Ä–∞–≤–Ω–µ–Ω–∏—è [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).

#### –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ {/*returns*/}

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ `useCallback` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `fn`, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–µ—Ä–µ–¥–∞–ª–∏.

–í–æ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤ –æ–Ω –ª–∏–±–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∂–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `fn` —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (–µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å), –ª–∏–±–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `fn`, –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –ø—Ä–∏ —Ç–µ–∫—É—â–µ–º —Ä–µ–Ω–¥–µ—Ä–µ.

#### –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è {/*caveats*/}

* `useCallback` -- —ç—Ç–æ —Ö—É–∫, –ø–æ—ç—Ç–æ–º—É –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å –µ–≥–æ —Ç–æ–ª—å–∫–æ **–Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** –∏–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö—É–∫–æ–≤. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–æ–≤ –∏–ª–∏ —É—Å–ª–æ–≤–∏–π. –ï—Å–ª–∏ –≤–∞–º —ç—Ç–æ –Ω—É–∂–Ω–æ, –≤—ã–¥–µ–ª–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –ø–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—É–¥–∞.
* React **–Ω–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –±–µ–∑ –≤–µ—Å–∫–æ–π –ø—Ä–∏—á–∏–Ω—ã.** –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ React —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∫–µ—à –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∫–µ—à —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –≤–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤–æ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏. –í –±—É–¥—É—â–µ–º React –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–±—Ä–æ—Å –∫–µ—à–∞ -- –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å —Å–±—Ä–æ—Å–∞ –∫–µ—à–∞ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã—Ö–æ–¥—è—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏. –≠—Ç–æ –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–∞—à–∏–º –æ–∂–∏–¥–∞–Ω–∏—è–º –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `useCallback` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ [—Å–æ—Å—Ç–æ—è–Ω–∏—è](/reference/react/useState#im-trying-to-set-state-to-a-function-but-it-gets-called-instead) –∏–ª–∏ [—Ä–µ—Ñ–∞](/reference/react/useRef#avoiding-recreating-the-ref-contents) –º–æ–≥—É—Ç –±—ã—Ç—å –±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏.

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ {/*usage*/}

### –ü—Ä–æ–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ {/*skipping-re-rendering-of-components*/}

–ö–æ–≥–¥–∞ –≤—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ –¥–æ—á–µ—Ä–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º. –°–Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, –∞ –∑–∞—Ç–µ–º –ø–æ—Å–º–æ—Ç—Ä–∏–º, –≤ –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ.

–ß—Ç–æ–±—ã –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –æ–±–µ—Ä–Ω–∏—Ç–µ –µ—ë –≤ —Ö—É–∫ `useCallback`:

```js [[3, 4, "handleSubmit"], [2, 9, "[productId, referrer]"]]
import { useCallback } from 'react';

function ProductPage({ productId, referrer, theme }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);
  // ...
```

–í–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –¥–≤–µ –≤–µ—â–∏ –≤ `useCallback`:

1. –§—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏.
2. <CodeStep step={2}>–°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</CodeStep>, –≤–∫–ª—é—á–∞—é—â–∏–π –∫–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏.

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ <CodeStep step={3}>–≤–æ–∑–≤—Ä–∞—â–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è</CodeStep> –∏–∑ `useCallback` –±—É–¥–µ—Ç —Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–µ—Ä–µ–¥–∞–ª–∏.

–ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö React —Å—Ä–∞–≤–Ω–∏—Ç <CodeStep step={2}>–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</CodeStep> —Å —Ç–µ–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –ø—Ä–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–µ–Ω–¥–µ—Ä–µ. –ï—Å–ª–∏ –Ω–∏ –æ–¥–Ω–∞ –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å –ø–æ–º–æ—â—å—é [`Object.is`](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Object/is)), `useCallback` –≤–µ—Ä–Ω—ë—Ç —Ç—É –∂–µ —Ñ—É–Ω–∫—Ü–∏—é, —á—Ç–æ –∏ —Ä–∞–Ω—å—à–µ. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, `useCallback` –≤–µ—Ä–Ω—ë—Ç —Ñ—É–Ω–∫—Ü–∏—é, –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –ø—Ä–∏ *—Ç–µ–∫—É—â–µ–º* —Ä–µ–Ω–¥–µ—Ä–µ.

–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, `useCallback` –∫–µ—à–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –µ—ë –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è.

**–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–æ–≥–¥–∞ —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ.**

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `handleSubmit` –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `ProductPage` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm`:

```js {5}
function ProductPage({ productId, referrer, theme }) {
  // ...
  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
```

–í—ã –∑–∞–º–µ—Ç–∏–ª–∏, —á—Ç–æ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø—Ä–æ–ø–∞ `theme` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –º–≥–Ω–æ–≤–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–µ—Ç, –Ω–æ –µ—Å–ª–∏ —É–±—Ä–∞—Ç—å `<ShippingForm />` –∏–∑ –≤–∞—à–µ–≥–æ JSX, –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ. –≠—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ —Å—Ç–æ–∏—Ç –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm`.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, React —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç —Å–Ω–æ–≤–∞ –≤—Å–µ –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.** –ü–æ—ç—Ç–æ–º—É, –∫–æ–≥–¥–∞ `ProductPage` —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å –¥—Ä—É–≥–∏–º `theme`, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm` *—Ç–æ–∂–µ* –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ. –ù–æ –µ—Å–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –º–µ–¥–ª–µ–Ω–Ω—ã–π, –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å `ShippingForm` –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –µ—Å–ª–∏ –µ–≥–æ –ø—Ä–æ–ø—Å—ã —Ç–∞–∫–∏–µ –∂–µ, –∫–∞–∫ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Ä–µ–Ω–¥–µ—Ä–µ, –æ–±–µ—Ä–Ω—É–≤ –µ–≥–æ –≤ [`memo`:](/reference/react/memo)

```js {3,5}
import { memo } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  // ...
});
```

**–° —ç—Ç–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º `ShippingForm` –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä, –µ—Å–ª–∏ –≤—Å–µ –µ–≥–æ –ø—Ä–æ–ø—Å—ã –æ—Å—Ç–∞–Ω—É—Ç—Å—è *—Ç–∞–∫–∏–º–∏ –∂–µ* , –∫–∞–∫ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Ä–µ–Ω–¥–µ—Ä–µ.** –í–æ—Ç –∫–æ–≥–¥–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∞–∂–Ω—ã–º! –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –≤—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ `handleSubmit` –±–µ–∑ `useCallback`:

```js {2,3,8,12-13}
function ProductPage({ productId, referrer, theme }) {
  // –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —Ç–µ–º–∞ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, —ç—Ç–æ –±—É–¥–µ—Ç –¥—Ä—É–≥–∞—è —Ñ—É–Ω–∫—Ü–∏—è...
  function handleSubmit(orderDetails) {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }
  
  return (
    <div className={theme}>
      {/* ... —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–æ–ø—Å—ã ShippingForm –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥—É—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏, –∏ –æ–Ω –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑. */}
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}
```

**–í JavaScript `function () {}` or `() => {}` –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç _–Ω–æ–≤—É—é_ —Ñ—É–Ω–∫—Ü–∏—é,** —Ç–∞–∫ –∂–µ –∫–∞–∫ –ª–∏—Ç–µ—Ä–∞–ª –æ–±—ä–µ–∫—Ç–∞ `{}` –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç. –û–±—ã—á–Ω–æ —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, –Ω–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–ø—Å—ã `ShippingForm` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥—É—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏, –∏ –≤–∞—à–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å [`memo`](/reference/react/memo) –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç. –ó–¥–µ—Å—å –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥–∏—Ç `useCallback`:

```js {2,3,8,12-13}
function ProductPage({ productId, referrer, theme }) {
  // –°–æ–æ–±—â–∏—Ç–µ React, —á—Ç–æ–±—ã –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏...
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]); // // ...–ø–æ–∫–∞ —ç—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è...

  return (
    <div className={theme}>
      {/* ...ShippingForm –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Ç–µ –∂–µ –ø—Ä–æ–ø—Å—ã –∏ –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä */}
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}
```

**–û–±–æ—Ä–∞—á–∏–≤–∞—è `handleSubmit` –≤ `useCallback`, –≤—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ *–æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ* —Ñ—É–Ω–∫—Ü–∏—è –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏** (–ø–æ–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è). –í–∞–º *–Ω–µ –Ω—É–∂–Ω–æ* –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ `useCallback`, –µ—Å–ª–∏ –Ω–∞ —ç—Ç–æ –Ω–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø—Ä–∏—á–∏–Ω—ã. –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–∏—á–∏–Ω–∞ –≤ —Ç–æ–º, —á—Ç–æ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ –µ—ë –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ–±—ë—Ä–Ω—É—Ç—ã–π –≤ [`memo`,](/reference/react/memo) —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –µ–º—É –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ —Ä–µ–Ω–¥–µ—Ä—ã. –ï—Å—Ç—å –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–∏—á–∏–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useCallback`, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å–∞–Ω—ã –¥–∞–ª–µ–µ –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

<Note>

**–í—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ `useCallback` —Ç–æ–ª—å–∫–æ –∫–∞–∫ –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.** –ï—Å–ª–∏ –≤–∞—à –∫–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –Ω–µ–≥–æ, –Ω–∞–π–¥–∏—Ç–µ –∏ —É—Å—Ç—Ä–∞–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É —Å–Ω–∞—á–∞–ª–∞. –ó–∞—Ç–µ–º –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å `useCallback` –æ–±—Ä–∞—Ç–Ω–æ.

</Note>

<DeepDive>

#### –ö–∞–∫ useCallback —Å–≤—è–∑–∞–Ω —Å useMemo? {/*how-is-usecallback-related-to-usememo*/}

–í—ã —á–∞—Å—Ç–æ —É–≤–∏–¥–∏—Ç–µ [`useMemo`](/reference/react/useMemo) –≤–º–µ—Å—Ç–µ —Å `useCallback`. –û–Ω–∏ –æ–±–∞ –ø–æ–ª–µ–∑–Ω—ã –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–æ—á–µ—Ä–Ω–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–∞–º [–º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%BC%D0%BE%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F) (–∏–ª–∏, –¥—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å) —á—Ç–æ-—Ç–æ, —á—Ç–æ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ –≤–Ω–∏–∑ –ø–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏:

```js {6-8,10-15,19}
import { useMemo, useCallback } from 'react';

function ProductPage({ productId, referrer }) {
  const product = useData('/product/' + productId);

  const requirements = useMemo(() => { // // –í—ã–∑—ã–≤–∞–µ—Ç –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é –∏ –∫–µ—à–∏—Ä—É–µ—Ç –µ—ë —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    return computeRequirements(product);
  }, [product]);

  const handleSubmit = useCallback((orderDetails) => { // –ö–µ—à–∏—Ä—É–µ—Ç —Å–∞–º—É –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);

  return (
    <div className={theme}>
      <ShippingForm requirements={requirements} onSubmit={handleSubmit} />
    </div>
  );
}
```

–†–∞–∑–Ω–∏—Ü–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ *—Ç–æ–º*, —á—Ç–æ –æ–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–∞–º –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å:

* **[`useMemo`](/reference/react/useMemo) –∫–µ—à–∏—Ä—É–µ—Ç *—Ä–µ–∑—É–ª—å—Ç–∞—Ç* –≤—ã–∑–æ–≤–∞ –≤–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏.** –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –æ–Ω –∫–µ—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ `computeRequirements(product)`, —á—Ç–æ–±—ã –æ–Ω –Ω–µ –∏–∑–º–µ–Ω—è–ª—Å—è, –µ—Å–ª–∏ `product` –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç `requirements` –±–µ–∑ –Ω–µ–Ω—É–∂–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ `ShippingForm`. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, React –≤—ã–∑–æ–≤–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞, –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
* **`useCallback` –∫–µ—à–∏—Ä—É–µ—Ç *—Å–∞–º—É —Ñ—É–Ω–∫—Ü–∏—é.*** –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `useMemo`, –æ–Ω –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω –∫–µ—à–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, —á—Ç–æ–±—ã `handleSubmit` –Ω–µ –∏–∑–º–µ–Ω—è–ª—Å—è *—Å–∞–º*, –µ—Å–ª–∏  `productId` –∏–ª–∏ `referrer` –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `handleSubmit` –±–µ–∑ –Ω–µ–Ω—É–∂–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ `ShippingForm`. –í–∞—à –∫–æ–¥ –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ñ–æ—Ä–º—É.

–ï—Å–ª–∏ –≤—ã —É–∂–µ –∑–Ω–∞–∫–æ–º—ã —Å [`useMemo`,](/reference/react/useMemo) –≤–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥—É–º–∞—Ç—å –æ `useCallback` —Ç–∞–∫:

```js
// –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–≤–Ω—É—Ç—Ä–∏ React)
function useCallback(fn, dependencies) {
  return useMemo(() => fn, dependencies);
}
```

[–ß–∏—Ç–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ —Ä–∞–∑–Ω–∏—Ü–µ –º–µ–∂–¥—É `useMemo` –∏ `useCallback`.](/reference/react/useMemo#memoizing-a-function)

</DeepDive>

<DeepDive>

#### –°–ª–µ–¥—É–µ—Ç –ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å useCallback –ø–æ–≤—Å—é–¥—É? {/*should-you-add-usecallback-everywhere*/}

–ï—Å–ª–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ —ç—Ç–æ—Ç —Å–∞–π—Ç, –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –≥—Ä—É–±—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–º–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ —Ü–µ–ª–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞), –º–µ–º–æ–∏–∑–∞—Ü–∏—è –æ–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–Ω–∞. –° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –µ—Å–ª–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä —Ä–∏—Å—É–Ω–∫–æ–≤, –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä), –º–µ–º–æ–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ–π.

–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é `useCallback` –ø–æ–ª–µ–∑–Ω–æ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ª—É—á–∞—è—Ö:

- –í—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ –µ—ë –∫–∞–∫ –ø—Ä–æ–ø –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É, –æ–±—ë—Ä–Ω—É—Ç–æ–º—É –≤ [`memo`.](/reference/react/memo) –í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å. –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞—à–µ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å.
- –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ, –ø–æ–∑–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ –∫–∞–∫–æ–º-—Ç–æ —Ö—É–∫–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥—Ä—É–≥–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –æ–±—ë—Ä–Ω—É—Ç–∞—è –≤ `useCallback`, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–µ—ë, –∏–ª–∏ –≤—ã –∑–∞–≤–∏—Å–∏—Ç–µ –æ—Ç —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ [`useEffect.`](/reference/react/useEffect)

–ù–µ—Ç —Å–º—ã—Å–ª–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ `useCallback` –≤ –¥—Ä—É–≥–∏—Ö —Å–ª—É—á–∞—è—Ö. –≠—Ç–æ –Ω–µ –ø—Ä–∏–Ω–µ—Å—ë—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—Ä–µ–¥–∞, –ø–æ—ç—Ç–æ–º—É –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ä–µ—à–∞—é—Ç –Ω–µ –¥—É–º–∞—Ç—å –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –∏ –º–µ–º–æ–∏–∑–∏—Ä—É—é—Ç –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ. –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –∫–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–Ω–µ–µ —á–∏—Ç–∞–µ–º—ã–º. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –Ω–µ –≤—Å—è–∫–∞—è –º–µ–º–æ–∏–∑–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞: –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ ¬´–≤—Å–µ–≥–¥–∞ –Ω–æ–≤–æ–µ¬ª, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã —Å–ª–æ–º–∞—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏—é –¥–ª—è –≤—Å–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ `useCallback` –Ω–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç *—Å–æ–∑–¥–∞–Ω–∏–µ* —Ñ—É–Ω–∫—Ü–∏–∏. –í—ã –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é (–∏ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!), –Ω–æ React –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –µ—ë –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å.

**–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ –Ω–µ–Ω—É–∂–Ω–æ–π, —Å–ª–µ–¥—É—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:**

1. –ö–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø—É—Å—Ç—å –æ–Ω [–ø—Ä–∏–Ω–∏–º–∞–µ—Ç JSX –∫–∞–∫ –¥–æ—á–µ—Ä–Ω–∏–π.](/learn/passing-props-to-a-component#passing-jsx-as-children) –ï—Å–ª–∏ –æ–±—ë—Ä—Ç–æ—á–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ, React –∑–Ω–∞–µ—Ç, —á—Ç–æ –µ–≥–æ –¥–µ—Ç–∏ –Ω–µ –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å.
1. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –Ω–µ [–ø–æ–¥–Ω–∏–º–∞–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã—à–µ,](/learn/sharing-state-between-components) —á–µ–º —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. –ù–µ –¥–µ—Ä–∂–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ç–∞–∫–æ–µ –∫–∞–∫ —Ñ–æ—Ä–º—ã –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–≤–µ–¥–µ–Ω–∏—è, –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –¥–µ—Ä–µ–≤–∞ –∏–ª–∏ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
1. –î–µ—Ä–∂–∏—Ç–µ [–ª–æ–≥–∏–∫—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —á–∏—Å—Ç–æ–π.](/learn/keeping-components-pure) –ï—Å–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –∑–∞–º–µ—Ç–Ω—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, —ç—Ç–æ –æ—à–∏–±–∫–∞ –≤ –≤–∞—à–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ! –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫—É –≤–º–µ—Å—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ–º–æ–∏–∑–∞—Ü–∏–∏.
1. –ò–∑–±–µ–≥–∞–π—Ç–µ [–Ω–µ–Ω—É–∂–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ.](/learn/you-might-not-need-an-effect) –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö React –≤—ã–∑–≤–∞–Ω–æ —Ü–µ–ø–æ—á–∫–∞–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –∏—Å—Ö–æ–¥—è—â–∏–º–∏ –æ—Ç —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç –≤–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞.
1. –ü–æ–ø—ã—Ç–∞–π—Ç–µ—Å—å [—É–¥–∞–ª–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ –≤–∞—à–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.](/learn/removing-effect-dependencies) –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ —á–∞—Å—Ç–æ –ø—Ä–æ—â–µ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–∞–∫–æ–π-—Ç–æ –æ–±—ä–µ–∫—Ç –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é –≤–Ω—É—Ç—Ä—å —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏–ª–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–ï—Å–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤—Å–µ –µ—â—ë –∫–∞–∂–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω—ã–º, [–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä –≤ React Developer Tools,](https://legacy.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html) —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –≤—ã–∏–≥—Ä–∞—é—Ç –æ—Ç –º–µ–º–æ–∏–∑–∞—Ü–∏–∏, –∏ –¥–æ–±–∞–≤—å—Ç–µ –º–µ–º–æ–∏–∑–∞—Ü–∏—é —Ç–∞–º, –≥–¥–µ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. –≠—Ç–∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã –¥–µ–ª–∞—é—Ç –≤–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ª–µ–≥—á–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è, –ø–æ—ç—Ç–æ–º—É —Ö–æ—Ä–æ—à–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –∏–º –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ. –í –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ –º—ã –∏—Å—Å–ª–µ–¥—É–µ–º [–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–µ–º–æ–∏–∑–∞—Ü–∏–∏](https://www.youtube.com/watch?v=lGEMwh32soc), —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É —Ä–∞–∑ –∏ –Ω–∞–≤—Å–µ–≥–¥–∞.

</DeepDive>

<Recipes titleText="–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É useCallback –∏ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—ä—è–≤–ª–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏" titleId="examples-rerendering">

#### –ü—Ä–æ–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å –ø–æ–º–æ—â—å—é `useCallback` –∏ `memo` {/*skipping-re-rendering-with-usecallback-and-memo*/}

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm` **–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω,** —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É.

–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ –æ—â—É—â–∞–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω—ã–º, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –≤—ã–Ω—É–∂–¥–∞–µ—Ç –∑–∞–º–µ–¥–ª–µ–Ω–Ω—ã–π `ShippingForm` –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è. –≠—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ, —Ç–∞–∫ –∫–∞–∫ —Å—á—ë—Ç—á–∏–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è, –∏ –Ω—É–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –Ω–æ–≤—ã–π –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ.

–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É. **–ë–ª–∞–≥–æ–¥–∞—Ä—è `useCallback` –≤–º–µ—Å—Ç–µ —Å [`memo`](/reference/react/memo), —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±—ã—Å—Ç—Ä–æ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ!** `ShippingForm` –ø—Ä–æ–ø—É—Å—Ç–∏–ª –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `handleSubmit` –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å. –§—É–Ω–∫—Ü–∏—è `handleSubmit` –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å, –ø–æ—Ç–æ–º—É —á—Ç–æ `productId` –∏ `referrer` (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ `useCallback`) –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞.

<Sandpack>

```js src/App.js
import { useState } from 'react';
import ProductPage from './ProductPage.js';

export default function App() {
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢—ë–º–Ω—ã–π —Ä–µ–∂–∏–º
      </label>
      <hr />
      <ProductPage
        referrerId="wizard_of_oz"
        productId={123}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/ProductPage.js active
import { useCallback } from 'react';
import ShippingForm from './ShippingForm.js';

export default function ProductPage({ productId, referrer, theme }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);

  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}

function post(url, data) {
  // –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —ç—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å...
  console.log('POST /' + url);
  console.log(data);
}
```

```js src/ShippingForm.js
import { memo, useState } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  const [count, setCount] = useState(1);

  console.log('[–ò–°–ö–£–°–°–¢–í–ï–ù–ù–û –ó–ê–ú–ï–î–õ–ï–ù–û] –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ <ShippingForm />');
  let startTime = performance.now();
  while (performance.now() - startTime < 500) {
    // –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 500 –º—Å, —á—Ç–æ–±—ã –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–¥
  }

  function handleSubmit(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    const orderDetails = {
      ...Object.fromEntries(formData),
      count
    };
    onSubmit(orderDetails);
  }

  return (
    <form onSubmit={handleSubmit}>
      <p><b>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: <code>ShippingForm</code> –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω!</b></p>
      <label>
        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤:
        <button type="button" onClick={() => setCount(count - 1)}>‚Äì</button>
        {count}
        <button type="button" onClick={() => setCount(count + 1)}>+</button>
      </label>
      <label>
        –£–ª–∏—Ü–∞:
        <input name="street" />
      </label>
      <label>
        –ì–æ—Ä–æ–¥:
        <input name="city" />
      </label>
      <label>
        –ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å:
        <input name="zipCode" />
      </label>
      <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
  );
});

export default ShippingForm;
```

```css
label {
  display: block; margin-top: 10px;
}

input {
  margin-left: 5px;
}

button[type="button"] {
  margin: 5px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>

<Solution />

#### –í—Å–µ–≥–¥–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä—è—â–∏–π—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç {/*always-re-rendering-a-component*/}

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `ShippingForm` —Ç–∞–∫–∂–µ **–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω–∞**, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç React –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã —Ç–æ–∂–µ –º–µ–¥–ª–µ–Ω–Ω–æ–µ! –≠—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ **–≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–µ—Ç –≤—ã–∑–æ–≤–∞ `useCallback`,** –ø–æ—ç—Ç–æ–º—É `handleSubmit` –≤—Å–µ–≥–¥–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∏ –∑–∞–º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm` –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥.

<Sandpack>

```js src/App.js
import { useState } from 'react';
import ProductPage from './ProductPage.js';

export default function App() {
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢—ë–º–Ω—ã–π —Ä–µ–∂–∏–º
      </label>
      <hr />
      <ProductPage
        referrerId="wizard_of_oz"
        productId={123}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/ProductPage.js active
import ShippingForm from './ShippingForm.js';

export default function ProductPage({ productId, referrer, theme }) {
  function handleSubmit(orderDetails) {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }

  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}

function post(url, data) {
  // –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —ç—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å...
  console.log('POST /' + url);
  console.log(data);
}
```

```js src/ShippingForm.js
import { memo, useState } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  const [count, setCount] = useState(1);

  console.log('[–ò–°–ö–£–°–°–¢–í–ï–ù–ù–û –ó–ê–ú–ï–î–õ–ï–ù–û] –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ <ShippingForm />');
  let startTime = performance.now();
  while (performance.now() - startTime < 500) {
    // –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 500 –º—Å, —á—Ç–æ–±—ã –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–¥
  }

  function handleSubmit(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    const orderDetails = {
      ...Object.fromEntries(formData),
      count
    };
    onSubmit(orderDetails);
  }

  return (
    <form onSubmit={handleSubmit}>
      <p><b>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: <code>ShippingForm</code> –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω!</b></p>
      <label>
        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤:
        <button type="button" onClick={() => setCount(count - 1)}>‚Äì</button>
        {count}
        <button type="button" onClick={() => setCount(count + 1)}>+</button>
      </label>
      <label>
        –£–ª–∏—Ü–∞:
        <input name="street" />
      </label>
      <label>
        –ì–æ—Ä–æ–¥:
        <input name="city" />
      </label>
      <label>
        –ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å:
        <input name="zipCode" />
      </label>
      <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
  );
});

export default ShippingForm;
```

```css
label {
  display: block; margin-top: 10px;
}

input {
  margin-left: 5px;
}

button[type="button"] {
  margin: 5px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>


–ó–∞–º–µ—Ç–Ω–∞ –ª–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–Ω–∏—Ü–∞ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è **—Å —É–¥–∞–ª—ë–Ω–Ω—ã–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ–º.** –ó–∞–º–µ—Ç–Ω–∞ –ª–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–Ω–∏—Ü–∞ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è `useCallback`?

<Sandpack>

```js src/App.js
import { useState } from 'react';
import ProductPage from './ProductPage.js';

export default function App() {
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢—ë–º–Ω—ã–π —Ä–µ–∂–∏–º
      </label>
      <hr />
      <ProductPage
        referrerId="wizard_of_oz"
        productId={123}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/ProductPage.js active
import ShippingForm from './ShippingForm.js';

export default function ProductPage({ productId, referrer, theme }) {
  function handleSubmit(orderDetails) {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }

  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}

function post(url, data) {
  // –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —ç—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å...
  console.log('POST /' + url);
  console.log(data);
}
```

```js src/ShippingForm.js
import { memo, useState } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  const [count, setCount] = useState(1);

  console.log('–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ <ShippingForm />');

  function handleSubmit(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    const orderDetails = {
      ...Object.fromEntries(formData),
      count
    };
    onSubmit(orderDetails);
  }

  return (
    <form onSubmit={handleSubmit}>
      <label>
        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤:
        <button type="button" onClick={() => setCount(count - 1)}>‚Äì</button>
        {count}
        <button type="button" onClick={() => setCount(count + 1)}>+</button>
      </label>
      <label>
        –£–ª–∏—Ü–∞:
        <input name="street" />
      </label>
      <label>
        –ì–æ—Ä–æ–¥:
        <input name="city" />
      </label>
      <label>
        –ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å:
        <input name="zipCode" />
      </label>
      <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
  );
});

export default ShippingForm;
```

```css
label {
  display: block; margin-top: 10px;
}

input {
  margin-left: 5px;
}

button[type="button"] {
  margin: 5px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>


–î–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ –∫–æ–¥ –±–µ–∑ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –ï—Å–ª–∏ –≤–∞—à–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä—ã–µ, –º–µ–º–æ–∏–∑–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞.

–ò–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å React –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–æ–¥–∞–∫—à–Ω, –æ—Ç–∫–ª—é—á–∏—Ç—å [React Developer Tools](/learn/react-developer-tools) –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–∞—à–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–º–µ–¥–ª—è–µ—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

<Solution />

</Recipes>

---

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–±—ç–∫–∞ {/*updating-state-from-a-memoized-callback*/}

–ò–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–±—ç–∫–∞.

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è `handleAddTodo` —É–∫–∞–∑—ã–≤–∞–µ—Ç `todos` –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç –Ω–æ–≤—ã–µ `todos`:

```js {6,7}
function TodoList() {
  const [todos, setTodos] = useState([]);

  const handleAddTodo = useCallback((text) => {
    const newTodo = { id: nextId++, text };
    setTodos([...todos, newTodo]);
  }, [todos]);
  // ...
```

–û–±—ã—á–Ω–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —É –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –±—ã–ª–æ –∫–∞–∫ –º–æ–∂–Ω–æ –º–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –ö–æ–≥–¥–∞ –≤—ã —á–∏—Ç–∞–µ—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≤—ã –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –ø–µ—Ä–µ–¥–∞–≤–∞—è [—Ñ—É–Ω–∫—Ü–∏—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:](/reference/react/useState#updating-state-based-on-the-previous-state)

```js {6,7}
function TodoList() {
  const [todos, setTodos] = useState([]);

  const handleAddTodo = useCallback((text) => {
    const newTodo = { id: nextId++, text };
    setTodos(todos => [...todos, newTodo]);
  }, []); // ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç todos
  // ...
```

–ó–¥–µ—Å—å, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –¥–µ–ª–∞—Ç—å `todos` –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –∏ —Å—á–∏—Ç—ã–≤–∞—Ç—å –µ–≥–æ –≤–Ω—É—Ç—Ä–∏, –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ React –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –æ —Ç–æ–º, *–∫–∞–∫* –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`todos => [...todos, newTodo]`). [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ñ—É–Ω–∫—Ü–∏—è—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.](/reference/react/useState#updating-state-based-on-the-previous-state)

---

### –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ {/*preventing-an-effect-from-firing-too-often*/}

–ò–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ [—ç—Ñ—Ñ–µ–∫—Ç–∞:](/learn/synchronizing-with-effects)

```js {4-9,12}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  function createOptions() {
    return {
      serverUrl: 'https://localhost:1234',
      roomId: roomId
    };
  }

  useEffect(() => {
    const options = createOptions();
    const connection = createConnection();
    connection.connect();
    // ...
```

–≠—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–±–ª–µ–º—É. [–ö–∞–∂–¥–æ–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–æ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤–∞—à–µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞.](/learn/lifecycle-of-reactive-effects#react-verifies-that-you-specified-every-reactive-value-as-a-dependency) –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –≤—ã –æ–±—ä—è–≤–∏—Ç–µ `createOptions` –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —ç—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º—É –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é —ç—Ñ—Ñ–µ–∫—Ç–∞ –∫ —á–∞—Ç-–∫–æ–º–Ω–∞—Ç–µ:


```js {6}
  useEffect(() => {
    const options = createOptions();
    const connection = createConnection();
    connection.connect();
    return () => connection.disconnect();
  }, [createOptions]); // üî¥ –ü—Ä–æ–±–ª–µ–º–∞: –≠—Ç–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
  // ...
```

–ß—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É, –≤—ã –º–æ–∂–µ—Ç–µ –æ–±–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∞, –≤ `useCallback`:

```js {4-9,16}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  const createOptions = useCallback(() => {
    return {
      serverUrl: 'https://localhost:1234',
      roomId: roomId
    };
  }, [roomId]); // ‚úÖ –ò–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ roomId

  useEffect(() => {
    const options = createOptions();
    const connection = createConnection();
    connection.connect();
    return () => connection.disconnect();
  }, [createOptions]); // ‚úÖ –ò–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ createOptions
  // ...
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `createOptions` –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–π –∂–µ –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –µ—Å–ª–∏ `roomId` –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è. **–û–¥–Ω–∞–∫–æ, –µ—â—ë –ª—É—á—à–µ —É–±—Ä–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ñ—É–Ω–∫—Ü–∏–∏.** –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é *–≤–Ω—É—Ç—Ä—å* —ç—Ñ—Ñ–µ–∫—Ç–∞:

```js {5-10,16}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  useEffect(() => {
    function createOptions() { // ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ useCallback –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö —Ñ—É–Ω–∫—Ü–∏–∏!
      return {
        serverUrl: 'https://localhost:1234',
        roomId: roomId
      };
    }

    const options = createOptions();
    const connection = createConnection();
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // ‚úÖ –ò–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ roomId
  // ...
```

–¢–µ–ø–µ—Ä—å –≤–∞—à –∫–æ–¥ –ø—Ä–æ—â–µ –∏ –Ω–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ `useCallback`. [ –£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∞.](/learn/removing-effect-dependencies#move-dynamic-objects-and-functions-inside-your-effect)

---

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ö—É–∫–∞ {/*optimizing-a-custom-hook*/}

–ï—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ö—É–∫,](/learn/reusing-logic-with-custom-hooks) —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –ª—é–±—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç, –≤ `useCallback`:

```js {4-6,8-10}
function useRouter() {
  const { dispatch } = useContext(RouterStateContext);

  const navigate = useCallback((url) => {
    dispatch({ type: 'navigate', url });
  }, [dispatch]);

  const goBack = useCallback(() => {
    dispatch({ type: 'back' });
  }, [dispatch]);

  return {
    navigate,
    goBack,
  };
}
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –≤–∞—à–µ–≥–æ —Ö—É–∫–∞ –º–æ–≥—É—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –∫–æ–¥ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ {/*troubleshooting*/}

### –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –º–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, `useCallback` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—Ä—É–≥—É—é —Ñ—É–Ω–∫—Ü–∏—é {/*every-time-my-component-renders-usecallback-returns-a-different-function*/}

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —É–∫–∞–∑–∞–ª–∏ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞!

–ï—Å–ª–∏ –≤—ã –∑–∞–±—É–¥–µ—Ç–µ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, `useCallback` –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –∫–∞–∂–¥—ã–π —Ä–∞–∑:

```js {7}
function ProductPage({ productId, referrer }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }); // üî¥ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –∫–∞–∂–¥—ã–π —Ä–∞–∑: –Ω–µ—Ç –º–∞—Å—Å–∏–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  // ...
```

–í–æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –ø–µ—Ä–µ–¥–∞—á–µ–π –º–∞—Å—Å–∏–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:

```js {7}
function ProductPage({ productId, referrer }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]); // ‚úÖ –ù–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
  // ...
```

–ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –ø—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ç–æ–º, —á—Ç–æ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∏–∑ –≤–∞—à–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ª–∞–¥–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É, –≤—Ä—É—á–Ω—É—é –≤—ã–≤–æ–¥—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å:

```js {5}
  const handleSubmit = useCallback((orderDetails) => {
    // ..
  }, [productId, referrer]);

  console.log([productId, referrer]);
```


–í—ã –º–æ–∂–µ—Ç–µ —â—ë–ª–∫–Ω—É—Ç—å –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –Ω–∞ –º–∞—Å—Å–∏–≤–∞—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏ –≤—ã–±—Ä–∞—Ç—å "Store as global variable" –¥–ª—è –æ–±–æ–∏—Ö. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –ø–µ—Ä–≤—ã–π —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∫–∞–∫ `temp1` , –∞ –≤—Ç–æ—Ä–æ–π –∫–∞–∫ `temp2`. –ó–∞—Ç–µ–º –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è—é—Ç—Å—è –ª–∏ –∫–∞–∂–¥–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ –æ–±–æ–∏—Ö –º–∞—Å—Å–∏–≤–∞—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏:

```js
Object.is(temp1[0], temp2[0]); // –ü–µ—Ä–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è –≤ –æ–±–æ–∏—Ö –º–∞—Å—Å–∏–≤–∞—Ö?
Object.is(temp1[1], temp2[1]); // –í—Ç–æ—Ä–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è –≤ –æ–±–æ–∏—Ö –º–∞—Å—Å–∏–≤–∞—Ö?
Object.is(temp1[2], temp2[2]); // ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ...
```

–ö–æ–≥–¥–∞ –≤—ã –Ω–∞–π–¥—ë—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –Ω–∞—Ä—É—à–∞—é—â—É—é –º–µ–º–æ–∏–∑–∞—Ü–∏—é, –ª–∏–±–æ –Ω–∞–π–¥–∏—Ç–µ —Å–ø–æ—Å–æ–± —É–¥–∞–ª–∏—Ç—å –µ—ë, –ª–∏–±–æ [–º–µ–º–æ–∏–∑–∏—Ä—É–π—Ç–µ –µ—ë —Ç–∞–∫–∂–µ.](/reference/react/useMemo#memoizing-a-dependency-of-another-hook)

---

### –ú–Ω–µ –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `useCallback` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ –≤ —Ü–∏–∫–ª–µ, –Ω–æ —ç—Ç–æ –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ {/*i-need-to-call-usememo-for-each-list-item-in-a-loop-but-its-not-allowed*/}

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Chart` –æ–±—ë—Ä–Ω—É—Ç –≤ [`memo`](/reference/react/memo). –í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–∞–∂–¥–æ–≥–æ `Chart` –≤ —Å–ø–∏—Å–∫–µ, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ReportList` —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∑–∞–Ω–æ–≤–æ. –û–¥–Ω–∞–∫–æ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å `useCallback` –≤ —Ü–∏–∫–ª–µ:

```js {5-14}
function ReportList({ items }) {
  return (
    <article>
      {items.map(item => {
        // üî¥ –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å useCallback –≤ —Ü–∏–∫–ª–µ –≤–æ—Ç —Ç–∞–∫:
        const handleClick = useCallback(() => {
          sendReport(item)
        }, [item]);

        return (
          <figure key={item.id}>
            <Chart onClick={handleClick} />
          </figure>
        );
      })}
    </article>
  );
}
```

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤—ã–¥–µ–ª–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ `useCallback` —Ç–∞–º:

```js {5,12-21}
function ReportList({ items }) {
  return (
    <article>
      {items.map(item =>
        <Report key={item.id} item={item} />
      )}
    </article>
  );
}

function Report({ item }) {
  // ‚úÖ –í—ã–∑–æ–≤–∏—Ç–µ useCallback –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ:
  const handleClick = useCallback(() => {
    sendReport(item)
  }, [item]);

  return (
    <figure>
      <Chart onClick={handleClick} />
    </figure>
  );
}
```

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, –≤—ã –º–æ–∂–µ—Ç–µ —É–±—Ä–∞—Ç—å `useCallback` –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –∫–æ–¥–∞ –∏ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–±–µ—Ä–Ω—É—Ç—å `Report` –≤ [`memo`.](/reference/react/memo) –ï—Å–ª–∏ –ø—Ä–æ–ø `item` –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, `Report` –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –ø–æ—ç—Ç–æ–º—É `Chart` —Ç–∞–∫–∂–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:

```js {5,6-8,15}
function ReportList({ items }) {
  // ...
}

const Report = memo(function Report({ item }) {
  function handleClick() {
    sendReport(item);
  }

  return (
    <figure>
      <Chart onClick={handleClick} />
    </figure>
  );
});
```
