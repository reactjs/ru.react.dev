---
title: useMemo
---

<Intro>

`useMemo` ‚Äì —Ö—É–∫ –≤ React, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –º–µ–∂–¥—É —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞–º–∏.

```js
const cachedValue = useMemo(calculateValue, dependencies)
```

</Intro>

<InlineToc />

---

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ {/*reference*/}

### `useMemo(calculateValue, dependencies)` {/*usememo*/}

–ß—Ç–æ–±—ã –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –º–µ–∂–¥—É —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–∑–≤–∞—Ç—å `useMemo` –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```js
import { useMemo } from 'react';

function TodoList({ todos, tab }) {
  const visibleTodos = useMemo(
    () => filterTodos(todos, tab),
    [todos, tab]
  );
  // ...
}
```

[–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –Ω–∏–∂–µ.](#usage)

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã {/*parameters*/}

* `calculateValue`: –§—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å. –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å—Ç–æ–π –∏ –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–∏–∫–∞–∫–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. React –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∑–æ–≤–µ—Ç –µ—ë –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ, –∞ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –≥–æ—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –í —Ç–æ–º —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –∫–∞–∫–æ–µ-—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π `dependencies` –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, React –∑–∞–Ω–æ–≤–æ –≤—ã–∑–æ–≤–µ—Ç `calculateValue`, –ø–æ–ª—É—á–∏—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –µ–≥–æ –¥–ª—è –±—É–¥—É—â–µ–≥–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

* `dependencies`: –ú–∞—Å—Å–∏–≤ –≤—Å–µ—Ö —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `calculateValue`. –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–µ–±—è –ø—Ä–æ–ø—Å—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –ï—Å–ª–∏ –≤—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ —Å–≤–æ–π [–ª–∏–Ω—Ç–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å React](/learn/editor-setup#linting), –æ–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç, –≤—Å–µ –ª–∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±—ã–ª–∏ —É–∫–∞–∑–∞–Ω—ã –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –ú–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –∫–æ–Ω–µ—á–Ω–æ–µ —á–∏—Å–ª–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –±—ã—Ç—å –æ–ø–∏—Å–∞–Ω –∫–∞–∫ `[dep1, dep2, dep3]`. React –±—É–¥–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∫–∞–∂–¥—É—é —Ç–∞–∫—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å –µ—ë –ø—Ä–µ–¥—ã–¥—É—â–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø—Ä–∏ –ø–æ–º–æ—â–∏ [`Object.is`](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Object/is).

#### –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ {/*returns*/}

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ `useMemo` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `calculateValue`.

–ü—Ä–∏ –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö `useMemo` –ª–∏–±–æ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –ø—Ä–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–µ–Ω–¥–µ—Ä–µ (–µ—Å–ª–∏ –Ω–∏—á—Ç–æ –≤ –º–∞—Å—Å–∏–≤–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å), –ª–∏–±–æ –∑–∞–Ω–æ–≤–æ –≤—ã–∑–æ–≤–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `calculateValue` –∏ –≤–µ—Ä–Ω—ë—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –µ—é –∑–Ω–∞—á–µ–Ω–∏–µ.

#### –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è {/*caveats*/}

* –ü–æ—Å–∫–æ–ª—å–∫—É `useMemo` —ç—Ç–æ —Ö—É–∫, —Ç–æ –≤—ã–∑—ã–≤–∞—Ç—å –µ–≥–æ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ **–Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ö—É–∫–∞. –•—É–∫–∏ –Ω–µ–ª—å–∑—è –≤—ã–∑—ã–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–æ–≤ –∏–ª–∏ —É—Å–ª–æ–≤–∏–π. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, —Ç–æ –º–æ–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤—ã–∑–æ–≤ —Ö—É–∫–∞ –≤ –Ω–µ–≥–æ.
* –í —Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ React –¥–≤–∞–∂–¥—ã –≤—ã–∑–æ–≤–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—É—é –≤ `useMemo` —Ñ—É–Ω–∫—Ü–∏—é, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, [—è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω–∞ —á–∏—Å—Ç–æ–π](#my-calculation-runs-twice-on-every-re-render). –¢–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –Ω–∏–∫–∞–∫ –Ω–µ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –ï—Å–ª–∏ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —á–∏—Å—Ç–∞—è (–∫–∞–∫–æ–π –æ–Ω–∞ –∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å), —ç—Ç–æ –Ω–∏–∫–∞–∫ –Ω–µ —Å–∫–∞–∂–µ—Ç—Å—è –Ω–∞ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–¥–Ω–æ–≥–æ –∏–∑ –∑–∞–ø—É—Å–∫–æ–≤ –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω.
* React **–Ω–µ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω–∞ —Ç–æ –Ω–µ—Ç –≤–µ—Å–∫–∏—Ö –ø—Ä–∏—á–∏–Ω**. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ React –æ—Ç–±—Ä–æ—Å–∏—Ç –∫–µ—à, –µ—Å–ª–∏ —Ñ–∞–π–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±—ã–ª –∏–∑–º–µ–Ω—ë–Ω. –í –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–∞—Ö, —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, React –æ—Ç–±—Ä–æ—Å–∏—Ç –∫–µ—à, –µ—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç [¬´–∑–∞–¥–µ—Ä–∂–∏—Ç—Å—è¬ª](/reference/react/Suspense) –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ü–æ–º–∏–º–æ —Ç–æ–≥–æ, –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –≤ React –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–º–æ–≥—É—Ç –æ—Ç–±—Ä–∞—Å—ã–≤–∞—Ç—å –∫–µ—à. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –≤ React –ø–æ—è–≤–∏—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤, –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Å–º—ã—Å–ª –æ—Ç–±—Ä–∞—Å—ã–≤–∞—Ç—å –∫–µ—à –¥–ª—è —Ç–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã—Ö–æ–¥—è—Ç –∑–∞ –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏. –ü–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ `useMemo` —Å—Ç–æ–∏—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ –Ω–∞ —Å—Ä–µ–¥—Å—Ç–≤–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ [—Å–æ—Å—Ç–æ—è–Ω–∏—è](/reference/react/useState#avoiding-recreating-the-initial-state) –∏–ª–∏ [—Ä–µ—Ñ–∞](/reference/react/useRef#avoiding-recreating-the-ref-contents) –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º.

<Note>

–ü–æ–¥–æ–±–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞–∑—ã–≤–∞—é—Ç [*–º–µ–º–æ–∏–∑–∞—Ü–∏–µ–π*](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%BC%D0%BE%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F), –ø–æ—ç—Ç–æ–º—É –¥–∞–Ω–Ω—ã–π —Ö—É–∫ –±—ã–ª –Ω–∞–∑–≤–∞–Ω `useMemo`.

</Note>

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ {/*usage*/}

### –ü—Ä–æ–ø—É—Å–∫ —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π {/*skipping-expensive-recalculations*/}

–ß—Ç–æ–±—ã –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–µ–∂–¥—É —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –∏—Ö –≤ `useMemo` –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```js [[3, 4, "visibleTodos"], [1, 4, "() => filterTodos(todos, tab)"], [2, 4, "[todos, tab]"]]
import { useMemo } from 'react';

function TodoList({ todos, tab, theme }) {
  const visibleTodos = useMemo(() => filterTodos(todos, tab), [todos, tab]);
  // ...
}
```

`useMemo` –æ–∂–∏–¥–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:

1. <CodeStep step={1}>–í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é</CodeStep>, –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—â—É—é –Ω–∏–∫–∞–∫–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â—É—é –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
2. <CodeStep step={2}>–ú–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</CodeStep>, –≤–∫–ª—é—á–∞—é—â–∏–π –≤ —Å–µ–±—è –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–∞—Ö–æ–¥—è—â–∏–µ—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ—Å—è –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏.

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ <CodeStep step={3}>–∑–Ω–∞—á–µ–Ω–∏–µ</CodeStep>, –ø–æ–ª—É—á–∞–µ–º–æ–µ –∏–∑ `useMemo`, –±—É–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–∑–æ–≤–∞ <CodeStep step={1}>–≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏</CodeStep>.

–ü—Ä–∏ –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö React –±—É–¥–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–µ <CodeStep step={2}>–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</CodeStep> —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É—è [`Object.is`](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Object/is). –ï—Å–ª–∏ –Ω–∏–∫–∞–∫–∏–µ –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å, `useMemo` –≤–µ—Ä–Ω—ë—Ç –≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ–µ –ø—Ä–µ–∂–¥–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, React –∑–∞–Ω–æ–≤–æ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤–µ—Ä–Ω—ë—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

–ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, `useMemo` –∫–µ—à–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞–º–∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–∏–∫–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è.

**–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ, –∫–æ–≥–¥–∞ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ.**

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ React –∑–∞–Ω–æ–≤–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—ë —Ç–µ–ª–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ `TodoList` –æ–±–Ω–æ–≤–∏—Ç —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç –Ω–æ–≤—ã–π –ø—Ä–æ–ø—Å, —Ñ—É–Ω–∫—Ü–∏—è `filterTodos` –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è:

```js {2}
function TodoList({ todos, tab, theme }) {
  const visibleTodos = filterTodos(todos, tab);
  // ...
}
```

–û–±—ã—á–Ω–æ —ç—Ç–æ –Ω–µ —Ç–∞–∫–∞—è –±–æ–ª—å—à–∞—è –ø—Ä–æ–±–ª–µ–º–∞, –ø–æ—Å–∫–æ–ª—å–∫—É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –¥–æ–≤–æ–ª—å–Ω–æ –±—ã—Å—Ç—Ä—ã–µ. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –±–æ–ª—å—à–æ–π –º–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö, –∏–ª–∏ —Å–æ–≤–µ—Ä—à–∞—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –∏–Ω—ã–µ —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, —Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –∏—Ö –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å (–µ—Å–ª–∏ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∏–∫–∞–∫ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å). –û–±–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `useMemo` –ø–æ–∑–≤–æ–ª–∏—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ `visibleTodos` (–µ—Å–ª–∏ –Ω–∏ `todos`, –Ω–∏ `tab` –Ω–∏–∫–∞–∫ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞).

–¢–∞–∫–æ–π —Ç–∏–ø –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–∑—ã–≤–∞—é—Ç *[–º–µ–º–æ–∏–∑–∞—Ü–∏–µ–π](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%BC%D0%BE%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F)*.

<Note>

**–ù–∞ —Ö—É–∫ `useMemo` —Å—Ç–æ–∏—Ç –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –ª–∏—à—å –∫–∞–∫ –Ω–∞ —Å—Ä–µ–¥—Å—Ç–≤–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.** –ï—Å–ª–∏ –≤–∞—à –∫–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –Ω–µ–≥–æ, —Å–ø–µ—Ä–≤–∞ —Å—Ç–æ–∏—Ç –Ω–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É, –∏ —Ç–æ–ª—å–∫–æ –∑–∞—Ç–µ–º –¥—É–º–∞—Ç—å –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `useMemo`.

</Note>

<DeepDive>

#### –ö–∞–∫ –ø–æ–Ω—è—Ç—å, —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–µ –ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è? {/*how-to-tell-if-a-calculation-is-expensive*/}

–ï—Å–ª–∏ –≤—ã –Ω–µ —Å–æ–∑–¥–∞—ë—Ç–µ –∏–ª–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç–µ –≤ —Ü–∏–∫–ª–µ —Ç—ã—Å—è—á–∏ –æ–±—ä–µ–∫—Ç–æ–≤, —Ç–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –Ω–µ —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–µ. –î–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏, –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–≥–æ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –∫—É—Å–∫–∞ –∫–æ–¥–∞, –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –∫–æ–Ω—Å–æ–ª–∏:

```js {1,3}
console.time('filter array');
const visibleTodos = filterTodos(todos, tab);
console.timeEnd('filter array');
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ `filterTodos` –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –ª–æ–≥–∏ —Ç–∏–ø–∞ `filter array: 0.15ms`. –ï—Å–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞–Ω–∏–º–∞–µ—Ç –¥–æ–≤–æ–ª—å–Ω–æ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏ (—Å–∫–∞–∂–µ–º, `1ms` –∏–ª–∏ –±–æ–ª—å—à–µ), —Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –µ–≥–æ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å. –î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –µ–≥–æ –≤ `useMemo` –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —É–º–µ–Ω—å—à–∏–ª–æ—Å—å –ª–∏ –æ–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–ª–∏ –Ω–µ—Ç:

```js
console.time('filter array');
const visibleTodos = useMemo(() => {
  return filterTodos(todos, tab); // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–æ, –µ—Å–ª–∏ todos –∏ tab –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
}, [todos, tab]);
console.timeEnd('filter array');
```

`useMemo` –Ω–µ –¥–µ–ª–∞–µ—Ç *–ø–µ—Ä–≤—ã–π* —Ä–µ–Ω–¥–µ—Ä –±—ã—Å—Ç—Ä–µ–µ. –û–Ω –ª–∏—à—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞—Ö.

–°—Ç–æ–∏—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –≤–∞—à–∞ –º–∞—à–∏–Ω–∞, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –º–æ—â–Ω–µ–µ, —á–µ–º —É –≤–∞—à–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ü–æ—ç—Ç–æ–º—É —Ö–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π –±—É–¥–µ—Ç –∏–∑–º–µ—Ä—è—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–∏–≤ –≤–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ Chrome –¥–ª—è —ç—Ç–∏—Ö —Ü–µ–ª–µ–π —Å—É—â–µ—Å—Ç–≤—É–µ—Ç [CPU Throttling](https://developer.chrome.com/blog/new-in-devtools-61/#throttling).

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç–∞–∫–∂–µ —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–∞—ë—Ç –Ω–µ —Å–∞–º—ã–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º [—Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ](/reference/react/StrictMode), React –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–≤–∞–∂–¥—ã. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–∏–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–µ–∂–∏–º–µ –∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –ø–æ–¥–æ–±–Ω–æ–º —Ç–æ–º—É, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–∞—à–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.

</DeepDive>

<DeepDive>

#### –í–µ–∑–¥–µ –ª–∏ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useMemo? {/*should-you-add-usememo-everywhere*/}

–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –ø–æ–¥–æ–±–Ω—ã—Ö —ç—Ç–æ–º—É —Å–∞–π—Ç—É, –≥–¥–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π ¬´–≥—Ä—É–±—ã–µ¬ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ —Ü–µ–ª–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞), –º–µ–º–æ–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–ª–∏—à–Ω—è. –° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –µ—Å–ª–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–æ–ª—å—à–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∞–∫—Ç–æ—Ä, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–Ω–æ–≥–æ –º–µ–ª–∫–∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä), –º–µ–º–æ–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–º—ã—Å–ª.

–ü—Ä–∏–±–µ–≥–∞—Ç—å –∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `useMemo` —Å—Ç–æ–∏—Ç –ª–∏—à—å –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö:

- –ï—Å–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ, –ø–æ–º–µ—â–∞–µ–º–æ–µ –≤ `useMemo`, —è–≤–ª—è–µ—Ç—Å—è –æ—â—É—Ç–∏–º–æ –º–µ–¥–ª–µ–Ω–Ω—ã–º –∏ –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ä–µ–¥–∫–æ –∏–∑–º–µ–Ω—è—é—Ç—Å—è.
- –ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–∞–∫ –ø—Ä–æ–ø –¥–æ—á–µ—Ä–Ω–µ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É, –æ–±—ë—Ä–Ω—É—Ç–æ–º—É –≤ [`memo`](/reference/react/memo). –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –µ–≥–æ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã, –ø–æ–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º–∏.
- –ï—Å–ª–∏ –≤—ã—á–∏—Å–ª—è–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥—Ä—É–≥–æ–≥–æ —Ö—É–∫–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –¥—Ä—É–≥–æ–π `useMemo` –≤ —Å–≤–æ–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–µ–≥–æ. –ò–ª–∏ –µ—Å–ª–∏ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ [`useEffect`](/reference/react/useEffect).

–í –∏–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –æ—Å–æ–±–æ–≥–æ —Å–º—ã—Å–ª–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ `useMemo` –Ω–µ—Ç. –•–æ—Ç—è –≤ —ç—Ç–æ–º –∏ –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –ø–ª–æ—Ö–æ–≥–æ: –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—Ç –Ω–µ –¥—É–º–∞—Ç—å –æ –∫–∞–∂–¥–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–ª—É—á–∞–µ, –∞ —Å—Ç–∞—Ä–∞—é—Ç—Å—è –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ. –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –Ω–µ –ª—é–±–∞—è –º–µ–º–æ–∏–∑–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞: –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –Ω–æ–≤–æ–µ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã —Å–ª–æ–º–∞—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏—é –≤—Å–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

**–ò–∑–ª–∏—à–Ω–µ–π –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å, —Å–ª–µ–¥—É—è —Ç–∞–∫–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:**

1. –ö–æ–≥–¥–∞ –æ–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –µ–º—É –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤–µ—Å—å —ç—Ç–æ—Ç [JSX –≤ –≤–∏–¥–µ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](/learn/passing-props-to-a-component#passing-jsx-as-children). –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ, –∫–æ–≥–¥–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ, React –±—É–¥–µ—Ç –∑–Ω–∞—Ç—å, —á—Ç–æ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ.
1. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –Ω–µ [–ø–æ–¥–Ω–∏–º–∞–π—Ç–µ –µ–≥–æ –≤—ã—à–µ](/learn/sharing-state-between-components), —á–µ–º —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–∏–ø–∞ —Ñ–æ—Ä–º –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ hover –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–ª–∏ –Ω–∞ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É –≤–∞—à–µ–≥–æ –¥–µ—Ä–µ–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
1. –î–µ—Ä–∂–∏—Ç–µ –≤–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã [—á–∏—Å—Ç—ã–º–∏](/learn/keeping-components-pure). –ï—Å–ª–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—Ä–æ–±–ª–µ–º–∞–º –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∫–∞–∫–∏–µ-—Ç–æ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã ‚Äì —ç—Ç–æ –±–∞–≥! –ò—Å–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ, –∞ –Ω–µ –ø—Ä–∏–±–µ–≥–∞–π—Ç–µ –∫ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏.
1. –ò–∑–±–µ–π–≥–∞—Ç–µ –ª–∏—à–Ω–∏—Ö [–≠—Ñ—Ñ–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ](/learn/you-might-not-need-an-effect). –í React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –≤—ã–∑–≤–∞–Ω—ã —Ü–µ–ø–æ—á–∫–∞–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –≠—Ñ—Ñ–µ–∫—Ç–∞—Ö –∏ –≤—ã–Ω—É–∂–¥–∞—é—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞.
1. –ü–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å [—É–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –≠—Ñ—Ñ–µ–∫—Ç–∞—Ö](/learn/removing-effect-dependencies). –ò–Ω–æ–≥–¥–∞ –ø—Ä–æ—â–µ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é –∏–ª–∏ –æ–±—ä–µ–∫—Ç –≤–Ω—É—Ç—Ä—å —Ñ—É–Ω–∫—Ü–∏–∏ –≠—Ñ—Ñ–µ–∫—Ç–∞, –∏–ª–∏ –≤—ã–Ω–µ—Å—Ç–∏ –∏—Ö –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —á–µ–º –ø—Ä–∏–±–µ–≥–∞—Ç—å –∫ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏.

–ï—Å–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤—Å—ë –µ—â—ë –æ—â—É—â–∞—é—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω—ã–º–∏, –º–æ–∂–Ω–æ [–≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–æ–º –∏–∑ React DevTools](https://legacy.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html), —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω—É–∂–Ω–∞ –º–µ–º–æ–∏–∑–∞—Ü–∏—è, –∏ –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–∏—Ç—å –µ—ë —Ç–∞–º, –≥–¥–µ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. –≠—Ç–∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Å–¥–µ–ª–∞—é—Ç –≤–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–º–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è ‚Äì –ø–æ—ç—Ç–æ–º—É –∏–º–∏ –Ω–µ —Å—Ç–æ–∏—Ç –ø—Ä–µ–Ω–µ–±—Ä–µ–≥–∞—Ç—å. 

</DeepDive>

<Recipes titleText="–†–∞–∑–Ω–∏—Ü–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º useMemo –∏ –±–µ–∑ –Ω–µ–≥–æ" titleId="examples-recalculation">

#### –ü—Ä–æ–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ `useMemo` {/*skipping-recalculation-with-usememo*/}

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ —Ñ—É–Ω–∫—Ü–∏—è `filterTodos` **–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω–∞**, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å–ª—É—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—ã–∑—ã–≤–∞–µ–º–∞—è –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–∞—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ –∏ –ø–æ–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ç–µ–º—É.

–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ –æ—â—É—â–∞–µ—Ç—Å—è —Ç–∞–∫–∏–º –º–µ–¥–ª–µ–Ω–Ω—ã–º –ø–æ—Ç–æ–º—É, —á—Ç–æ –æ–Ω–æ –≤—ã–Ω—É–∂–¥–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∑–∞–º–µ–¥–ª–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `filterTodos` –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ `tab`. (–ï—Å–ª–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –ø–æ—á–µ–º—É –æ–Ω–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã, –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ [–∑–¥–µ—Å—å](#my-calculation-runs-twice-on-every-re-render).)

–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —Ç–µ–º—É. **–ë–ª–∞–≥–æ–¥–∞—Ä—è `useMemo` —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±—ã—Å—Ç—Ä–æ (–Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ).** –ú–µ–¥–ª–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ `filterTodos` –±—ã–ª –ø—Ä–æ–ø—É—â–µ–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏ `todos`, –∏ `tab` (–∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è `useMemo`) –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞.

<Sandpack>

```js src/App.js
import { useState } from 'react';
import { createTodos } from './utils.js';
import TodoList from './TodoList.js';

const todos = createTodos();

export default function App() {
  const [tab, setTab] = useState('all');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <button onClick={() => setTab('all')}>
        –í—Å–µ
      </button>
      <button onClick={() => setTab('active')}>
        –ê–∫—Ç–∏–≤–Ω—ã–µ
      </button>
      <button onClick={() => setTab('completed')}>
        –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
      </button>
      <br />
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
      </label>
      <hr />
      <TodoList
        todos={todos}
        tab={tab}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}

```

```js src/TodoList.js active
import { useMemo } from 'react';
import { filterTodos } from './utils.js'

export default function TodoList({ todos, theme, tab }) {
  const visibleTodos = useMemo(
    () => filterTodos(todos, tab),
    [todos, tab]
  );
  return (
    <div className={theme}>
      <p><b>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: <code>filterTodos</code> –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω–∞!</b></p>
      <ul>
        {visibleTodos.map(todo => (
          <li key={todo.id}>
            {todo.completed ?
              <s>{todo.text}</s> :
              todo.text
            }
          </li>
        ))}
      </ul>
    </div>
  );
}
```

```js src/utils.js
export function createTodos() {
  const todos = [];
  for (let i = 0; i < 50; i++) {
    todos.push({
      id: i,
      text: "Todo " + (i + 1),
      completed: Math.random() > 0.5
    });
  }
  return todos;
}

export function filterTodos(todos, tab) {
  console.log('[–ó–ê–ú–ï–î–õ–ï–ù–ù–û] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è ' + todos.length + ' todos –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "' + tab + '"');
  let startTime = performance.now();
  while (performance.now() - startTime < 500) {
    // –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å 500 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã —Å—ã–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–¥
  }

  return todos.filter(todo => {
    if (tab === 'all') {
      return true;
    } else if (tab === 'active') {
      return !todo.completed;
    } else if (tab === 'completed') {
      return todo.completed;
    }
  });
}
```

```css
label {
  display: block;
  margin-top: 10px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>

<Solution />

#### –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è {/*always-recalculating-a-value*/}

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ —Ñ—É–Ω–∫—Ü–∏—è `filterTodos` —Ç–∞–∫–∂–µ –∑–∞–º–µ–¥–ª–µ–Ω–∞, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å–ª—É—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—ã–∑—ã–≤–∞–µ–º–∞—è –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–∞—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ –∏ –ø–æ–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ç–µ–º—É.

–ü–æ—Å–∫–æ–ª—å–∫—É **–≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤—ã–∑–æ–≤ `useMemo`**, —Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `filterTodos` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ (–¥–∞–∂–µ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–µ `theme`).

<Sandpack>

```js src/App.js
import { useState } from 'react';
import { createTodos } from './utils.js';
import TodoList from './TodoList.js';

const todos = createTodos();

export default function App() {
  const [tab, setTab] = useState('all');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <button onClick={() => setTab('all')}>
        –í—Å–µ
      </button>
      <button onClick={() => setTab('active')}>
        –ê–∫—Ç–∏–≤–Ω—ã–µ
      </button>
      <button onClick={() => setTab('completed')}>
        –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
      </button>
      <br />
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
      </label>
      <hr />
      <TodoList
        todos={todos}
        tab={tab}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}

```

```js src/TodoList.js active
import { filterTodos } from './utils.js'

export default function TodoList({ todos, theme, tab }) {
  const visibleTodos = filterTodos(todos, tab);
  return (
    <div className={theme}>
      <ul>
        <p><b>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: <code>filterTodos</code> –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω–∞!</b></p>
        {visibleTodos.map(todo => (
          <li key={todo.id}>
            {todo.completed ?
              <s>{todo.text}</s> :
              todo.text
            }
          </li>
        ))}
      </ul>
    </div>
  );
}
```

```js src/utils.js
export function createTodos() {
  const todos = [];
  for (let i = 0; i < 50; i++) {
    todos.push({
      id: i,
      text: "Todo " + (i + 1),
      completed: Math.random() > 0.5
    });
  }
  return todos;
}

export function filterTodos(todos, tab) {
  console.log('[–ó–ê–ú–ï–î–õ–ï–ù–ù–û] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è ' + todos.length + ' todos –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "' + tab + '"');
  let startTime = performance.now();
  while (performance.now() - startTime < 500) {
    // –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å 500 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã —Å—ã–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–¥
  }

  return todos.filter(todo => {
    if (tab === 'all') {
      return true;
    } else if (tab === 'active') {
      return !todo.completed;
    } else if (tab === 'completed') {
      return todo.completed;
    }
  });
}
```

```css
label {
  display: block;
  margin-top: 10px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –∫–æ–¥ **–±–µ–∑ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–∞–º–µ–¥–ª–µ–Ω–∏—è**. –ó–∞–º–µ—Ç–Ω–æ –ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `useMemo`?

<Sandpack>

```js src/App.js
import { useState } from 'react';
import { createTodos } from './utils.js';
import TodoList from './TodoList.js';

const todos = createTodos();

export default function App() {
  const [tab, setTab] = useState('all');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <button onClick={() => setTab('all')}>
        –í—Å–µ
      </button>
      <button onClick={() => setTab('active')}>
        –ê–∫—Ç–∏–≤–Ω—ã–µ
      </button>
      <button onClick={() => setTab('completed')}>
        –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
      </button>
      <br />
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
      </label>
      <hr />
      <TodoList
        todos={todos}
        tab={tab}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}

```

```js src/TodoList.js active
import { filterTodos } from './utils.js'

export default function TodoList({ todos, theme, tab }) {
  const visibleTodos = filterTodos(todos, tab);
  return (
    <div className={theme}>
      <ul>
        {visibleTodos.map(todo => (
          <li key={todo.id}>
            {todo.completed ?
              <s>{todo.text}</s> :
              todo.text
            }
          </li>
        ))}
      </ul>
    </div>
  );
}
```

```js src/utils.js
export function createTodos() {
  const todos = [];
  for (let i = 0; i < 50; i++) {
    todos.push({
      id: i,
      text: "Todo " + (i + 1),
      completed: Math.random() > 0.5
    });
  }
  return todos;
}

export function filterTodos(todos, tab) {
  console.log('–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è ' + todos.length + ' todos –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "' + tab + '"');

  return todos.filter(todo => {
    if (tab === 'all') {
      return true;
    } else if (tab === 'active') {
      return !todo.completed;
    } else if (tab === 'completed') {
      return todo.completed;
    }
  });
}
```

```css
label {
  display: block;
  margin-top: 10px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>

–ß–∞—Å—Ç–æ –∫–æ–¥ –∏ –±–µ–∑ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ. –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏—é, –µ—Å–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–µ —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–µ.

–ú–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ todo –≤ `utils.js` –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫ —ç—Ç–æ —Å–∫–∞–∂–µ—Ç—Å—è –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —ç—Ç–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–µ –æ—á–µ–Ω—å —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–æ–µ, –æ–¥–Ω–∞–∫–æ –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ todo, —Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ —Å–∫–æ—Ä–µ–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–º, —á–µ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π. –ù–∏–∂–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ø–æ—Å–æ–±—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `useMemo`.

<Solution />

</Recipes>

---

### –ü—Ä–æ–ø—É—Å–∫ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ {/*skipping-re-rendering-of-components*/}

–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö `useMemo` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –î–æ–ø—É—Å—Ç–∏–º, —á—Ç–æ `TodoList` –ø–µ—Ä–µ–¥–∞—ë—Ç –∫–∞–∫ –ø—Ä–æ–ø `visibleTodos` –¥–æ—á–µ—Ä–Ω–µ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É `List`:

```js {5}
export default function TodoList({ todos, tab, theme }) {
  // ...
  return (
    <div className={theme}>
      <List items={visibleTodos} />
    </div>
  );
}
```

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `theme` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –Ω–∞ –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è –ø–æ–¥—Ç–æ—Ä–º–∞–∂–∏–≤–∞—Ç—å. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –∏–∑ —Ä–∞–∑–º–µ—Ç–∫–∏ —É–¥–∞–ª–∏—Ç—å `<List />`, —Ç–æ –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±—ã—Å—Ç—Ä–æ.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ React —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç –∏ –≤—Å–µ—Ö –µ–≥–æ –ø–æ—Ç–æ–º–∫–æ–≤.** –ü–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ, –∫–æ–≥–¥–∞ `TodoList` —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å –¥—Ä—É–≥–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º `theme`, –¥–æ—á–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `List` —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è *–≤–º–µ—Å—Ç–µ* —Å –Ω–∏–º. –≠—Ç–æ –Ω–µ —Å—Ç—Ä–∞—à–Ω–æ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç –Ω–∏–∫–∞–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä –∑–∞–º–µ—Ç–Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–π (–∫–∞–∫ —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `List`), —Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –æ–±–µ—Ä–Ω—É—Ç—å –µ–≥–æ –≤ [`memo`](/reference/react/memo). –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∏–∑–±–µ–∂–∞—Ç—å —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤, –µ—Å–ª–∏ –ø—Ä–æ–ø—Å—ã —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –Ω–∏–∫–∞–∫ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å:

```js {3,5}
import { memo } from 'react';

const List = memo(function List({ items }) {
  // ...
});
```

**–¢–µ–ø–µ—Ä—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `List` –Ω–µ –±—É–¥–µ—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è, –µ—Å–ª–∏ –µ–≥–æ –ø—Ä–æ–ø—Å—ã —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –Ω–∏–∫–∞–∫ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å**. –û–¥–Ω–∞–∫–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ `visibleTodos` –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –±–µ–∑ `useMemo`:

```js {2-3,6-7}
export default function TodoList({ todos, tab, theme }) {
  // –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ theme —Ñ—É–Ω–∫—Ü–∏—è filterTodos —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤...
  const visibleTodos = filterTodos(todos, tab);
  return (
    <div className={theme}>
      {/* ... –ø–æ—ç—Ç–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç List –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–ø—Å—ã –∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑ */}
      <List items={visibleTodos} />
    </div>
  );
}
```

**–í –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ —Ñ—É–Ω–∫—Ü–∏—è `filterTodos` –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤**, –ø–æ–¥–æ–±–Ω–æ —Ç–æ–º—É –∫–∞–∫ –æ–±—ä–µ–∫—Ç–Ω—ã–π –ª–∏—Ç–µ—Ä–∞–ª `{}` –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `List` –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–ø—Å—ã, –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ [`memo`](/reference/react/memo) –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ó–¥–µ—Å—å –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥–∏—Ç `useMemo`:

```js {2-3,5,9-10}
export default function TodoList({ todos, tab, theme }) {
  // –ü—Ä–æ—Å–∏–º React –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–µ–∂–¥—É —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞–º–∏...
  const visibleTodos = useMemo(
    () => filterTodos(todos, tab),
    [todos, tab] // ...–∏ –ø–æ–∫–∞ —ç—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è...
  );
  return (
    <div className={theme}>
      {/* ...List –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—Ä–æ–ø—Å—ã –∏ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã */}
      <List items={visibleTodos} />
    </div>
  );
}
```

–í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ `visibleTodos` –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –∏–º–µ—Ç—å *–æ–¥–Ω–æ –∏ —Ç–æ –∂–µ* –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ–∫–∞ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º. –°–ª–µ–¥—É–µ—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useMemo` –±–µ–∑ –≤–µ—Å–∫–æ–π –Ω–∞ —Ç–æ –ø—Ä–∏—á–∏–Ω—ã. –û–¥–Ω–∞–∫–æ –∑–¥–µ—Å—å —ç—Ç–æ –æ–ø—Ä–∞–≤–¥–∞–Ω–Ω–æ, –ø–æ—Å–∫–æ–ª—å–∫—É `visibleTodos` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–∞–∫ –ø—Ä–æ–ø—Å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ–±—ë—Ä–Ω—É—Ç—ã–π –≤ [`memo`](/reference/react/memo), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ª–∏—à–Ω–∏–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –µ—â—ë –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏—á–∏–Ω, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useMemo` –æ–ø—Ä–∞–≤–¥–∞–Ω–Ω–æ, ‚Äì –æ –Ω–∏—Ö —Ä–µ—á—å –ø–æ–π–¥—ë—Ç –Ω–∏–∂–µ.

<DeepDive>

#### –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö JSX-—É–∑–ª–æ–≤ {/*memoizing-individual-jsx-nodes*/}

–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å `List` –≤ [`memo`](/reference/react/memo), –º–æ–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å —Å–∞–º JSX-—É–∑–µ–ª `<List />` –≤ `useMemo`:

```js {3,6}
export default function TodoList({ todos, tab, theme }) {
  const visibleTodos = useMemo(() => filterTodos(todos, tab), [todos, tab]);
  const children = useMemo(() => <List items={visibleTodos} />, [visibleTodos]);
  return (
    <div className={theme}>
      {children}
    </div>
  );
}
```

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ç–∞–∫–∏–º –∂–µ. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `List` –Ω–µ –±—É–¥–µ—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è, –ø–æ–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–µ `visibleTodos` –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º.

JSX-—É–∑–µ–ª `<List items={visibleTodos} />` —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–º –æ–±—ä–µ–∫—Ç–æ–º —Ç–∏–ø–∞ `{ type: List, props: { items: visibleTodos } }`. –°–æ–∑–¥–∞—Ç—å —Ç–∞–∫–æ–π –æ–±—ä–µ–∫—Ç –æ—á–µ–Ω—å –¥—ë—à–µ–≤–æ, –æ–¥–Ω–∞–∫–æ React –Ω–µ –∑–Ω–∞–µ—Ç, –æ—Å—Ç–∞–ª–æ—Å—å –ª–∏ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–µ–∂–Ω–∏–º –∏–ª–∏ –Ω–µ—Ç. –ü–æ—ç—Ç–æ–º—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é React –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `List`.

–ü—Ä–∏ —ç—Ç–æ–º, –µ—Å–ª–∏ React –≤–∏–¥–∏—Ç —Ç–æ—Ç –∂–µ JSX, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –ø—Ä–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–µ–Ω–¥–µ—Ä–µ, –æ–Ω –Ω–µ –±—É–¥–µ—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É —á—Ç–æ JSX-—É–∑–ª—ã [–∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã](https://ru.wikipedia.org/wiki/%D0%9D%D0%B5%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%B9_%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82). –¢–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã —É–∑–ª–æ–≤ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏, –ø–æ—ç—Ç–æ–º—É React –∑–Ω–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ä–µ—Ä–µ–Ω–¥–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ. –û–¥–Ω–∞–∫–æ —á—Ç–æ–±—ã —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ, —É–∑–µ–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å *–±—É–∫–≤–∞–ª—å–Ω–æ —Ç–µ–º –∂–µ –æ–±—ä–µ–∫—Ç–æ–º*, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ *–≤—ã–≥–ª—è–¥–µ—Ç—å* —Ç–∞–∫–∏–º –∂–µ –≤ –∫–æ–¥–µ. –≠—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç `useMemo` –≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ.

–û–±–æ—Ä–∞—á–∏–≤–∞—Ç—å JSX-—É–∑–ª—ã –≤ `useMemo` –Ω–µ –≤—Å–µ–≥–¥–∞ —É–¥–æ–±–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–æ –Ω–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å –ø–æ —É—Å–ª–æ–≤–∏—é. –ü–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —á–∞—â–µ –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç –≤ [`memo`](/reference/react/memo).

</DeepDive>

<Recipes titleText="–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø—Ä–æ–ø—É—Å–∫–æ–º —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤ –∏ –±–µ–∑ –Ω–µ–≥–æ" titleId="examples-rerendering">

#### –ü—Ä–æ–ø—É—Å–∫ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `useMemo` –∏ `memo` {/*skipping-re-rendering-with-usememo-and-memo*/}

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `List` **–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω**, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å–ª—É—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤–∫–ª–∞–¥–∫–∏ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É.

–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ –æ—â—É—â–∞–µ—Ç—Å—è —Ç–∞–∫–∏–º –º–µ–¥–ª–µ–Ω–Ω—ã–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–æ –≤—ã–Ω—É–∂–¥–∞–µ—Ç –∑–∞–º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `List` —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è. –¢–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ–º–æ, –ø–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–æ–ø `tab` –∏–∑–º–µ–Ω–∏–ª—Å—è, –∏ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω–µ.

–ó–∞—Ç–µ–º –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É. **–ë–ª–∞–≥–æ–¥–∞—Ä—è `useMemo` –≤ —Å–≤—è–∑–∫–µ —Å [`memo`](/reference/react/memo) —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±—ã—Å—Ç—Ä–æ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ.** –ü–æ—Å–∫–æ–ª—å–∫—É –Ω–∏ `todos`, –Ω–∏ `tab`, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `useMemo`, –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞, —Ç–æ –º–∞—Å—Å–∏–≤ `visibleTodos` –æ—Å—Ç–∞–ª—Å—è –ø—Ä–µ–∂–Ω–∏–º, –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `List` –ø—Ä–æ–ø—É—Å—Ç–∏–ª —Ä–µ—Ä–µ–Ω–¥–µ—Ä.

<Sandpack>

```js src/App.js
import { useState } from 'react';
import { createTodos } from './utils.js';
import TodoList from './TodoList.js';

const todos = createTodos();

export default function App() {
  const [tab, setTab] = useState('all');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <button onClick={() => setTab('all')}>
        –í—Å–µ
      </button>
      <button onClick={() => setTab('active')}>
        –ê–∫—Ç–∏–≤–Ω—ã–µ
      </button>
      <button onClick={() => setTab('completed')}>
        –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
      </button>
      <br />
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
      </label>
      <hr />
      <TodoList
        todos={todos}
        tab={tab}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/TodoList.js active
import { useMemo } from 'react';
import List from './List.js';
import { filterTodos } from './utils.js'

export default function TodoList({ todos, theme, tab }) {
  const visibleTodos = useMemo(
    () => filterTodos(todos, tab),
    [todos, tab]
  );
  return (
    <div className={theme}>
      <p><b>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç <code>List</code> –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω!</b></p>
      <List items={visibleTodos} />
    </div>
  );
}
```

```js src/List.js
import { memo } from 'react';

const List = memo(function List({ items }) {
  console.log('[–ó–ê–ú–ï–î–õ–ï–ù–ù–û] –†–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ <List /> —Å ' + items.length + ' —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏');
  let startTime = performance.now();
  while (performance.now() - startTime < 500) {
    // –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å 500 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã —Å—ã–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–¥
  }

  return (
    <ul>
      {items.map(item => (
        <li key={item.id}>
          {item.completed ?
            <s>{item.text}</s> :
            item.text
          }
        </li>
      ))}
    </ul>
  );
});

export default List;
```

```js src/utils.js
export function createTodos() {
  const todos = [];
  for (let i = 0; i < 50; i++) {
    todos.push({
      id: i,
      text: "Todo " + (i + 1),
      completed: Math.random() > 0.5
    });
  }
  return todos;
}

export function filterTodos(todos, tab) {
  return todos.filter(todo => {
    if (tab === 'all') {
      return true;
    } else if (tab === 'active') {
      return !todo.completed;
    } else if (tab === 'completed') {
      return todo.completed;
    }
  });
}
```

```css
label {
  display: block;
  margin-top: 10px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>

<Solution />

#### –ü–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ {/*always-re-rendering-a-component*/}

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `List` —Ç–∞–∫–∂–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å–ª—É—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ –∏ –ø–æ–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ç–µ–º—É.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –∑–¥–µ—Å—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `useMemo`. –ü–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ `visibleTodos` –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –Ω–æ–≤—ã–º –º–∞—Å—Å–∏–≤–æ–º, –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `List` –Ω–µ —Å–º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ä–µ—Ä–µ–Ω–¥–µ—Ä.

<Sandpack>

```js src/App.js
import { useState } from 'react';
import { createTodos } from './utils.js';
import TodoList from './TodoList.js';

const todos = createTodos();

export default function App() {
  const [tab, setTab] = useState('all');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <button onClick={() => setTab('all')}>
        –í—Å–µ
      </button>
      <button onClick={() => setTab('active')}>
        –ê–∫—Ç–∏–≤–Ω—ã–µ
      </button>
      <button onClick={() => setTab('completed')}>
        –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
      </button>
      <br />
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
      </label>
      <hr />
      <TodoList
        todos={todos}
        tab={tab}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/TodoList.js active
import List from './List.js';
import { filterTodos } from './utils.js'

export default function TodoList({ todos, theme, tab }) {
  const visibleTodos = filterTodos(todos, tab);
  return (
    <div className={theme}>
      <p><b>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç <code>List</code> –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω!</b></p>
      <List items={visibleTodos} />
    </div>
  );
}
```

```js src/List.js
import { memo } from 'react';

const List = memo(function List({ items }) {
  console.log('[–ó–ê–ú–ï–î–õ–ï–ù–ù–û] –†–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ <List /> —Å ' + items.length + ' —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏');
  let startTime = performance.now();
  while (performance.now() - startTime < 500) {
    // –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å 500 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã —Å—ã–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–¥
  }

  return (
    <ul>
      {items.map(item => (
        <li key={item.id}>
          {item.completed ?
            <s>{item.text}</s> :
            item.text
          }
        </li>
      ))}
    </ul>
  );
});

export default List;
```

```js src/utils.js
export function createTodos() {
  const todos = [];
  for (let i = 0; i < 50; i++) {
    todos.push({
      id: i,
      text: "Todo " + (i + 1),
      completed: Math.random() > 0.5
    });
  }
  return todos;
}

export function filterTodos(todos, tab) {
  return todos.filter(todo => {
    if (tab === 'all') {
      return true;
    } else if (tab === 'active') {
      return !todo.completed;
    } else if (tab === 'completed') {
      return todo.completed;
    }
  });
}
```

```css
label {
  display: block;
  margin-top: 10px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –∫–æ–¥ **–±–µ–∑ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–∞–º–µ–¥–ª–µ–Ω–∏—è**. –ó–∞–º–µ—Ç–Ω–æ –ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `memo` –∏ `useMemo`?

<Sandpack>

```js src/App.js
import { useState } from 'react';
import { createTodos } from './utils.js';
import TodoList from './TodoList.js';

const todos = createTodos();

export default function App() {
  const [tab, setTab] = useState('all');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <button onClick={() => setTab('all')}>
        –í—Å–µ
      </button>
      <button onClick={() => setTab('active')}>
        –ê–∫—Ç–∏–≤–Ω—ã–µ
      </button>
      <button onClick={() => setTab('completed')}>
        –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
      </button>
      <br />
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
      </label>
      <hr />
      <TodoList
        todos={todos}
        tab={tab}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/TodoList.js active
import List from './List.js';
import { filterTodos } from './utils.js'

export default function TodoList({ todos, theme, tab }) {
  const visibleTodos = filterTodos(todos, tab);
  return (
    <div className={theme}>
      <List items={visibleTodos} />
    </div>
  );
}
```

```js src/List.js
import { memo } from 'react';

function List({ items }) {
  return (
    <ul>
      {items.map(item => (
        <li key={item.id}>
          {item.completed ?
            <s>{item.text}</s> :
            item.text
          }
        </li>
      ))}
    </ul>
  );
}

export default memo(List);
```

```js src/utils.js
export function createTodos() {
  const todos = [];
  for (let i = 0; i < 50; i++) {
    todos.push({
      id: i,
      text: "Todo " + (i + 1),
      completed: Math.random() > 0.5
    });
  }
  return todos;
}

export function filterTodos(todos, tab) {
  return todos.filter(todo => {
    if (tab === 'all') {
      return true;
    } else if (tab === 'active') {
      return !todo.completed;
    } else if (tab === 'completed') {
      return todo.completed;
    }
  });
}
```

```css
label {
  display: block;
  margin-top: 10px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>

–ß–∞—Å—Ç–æ –∫–æ–¥ –∏ –±–µ–∑ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ. –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏—é, –µ—Å–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–µ —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–µ.

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–æ–≥–æ, —á—Ç–æ –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª—è—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, React —Å—Ç–æ–∏—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–µ–∂–∏–º–µ, —Å –æ—Ç–∫–ª—é—á—ë–Ω–Ω—ã–º–∏ [React DevTools](/learn/react-developer-tools) –∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –ø–æ–¥–æ–±–Ω–æ–º —Ç–æ–º—É, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–∞—à–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.

<Solution />

</Recipes>

---

### –°–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –≤—ã–∑–æ–≤—ã —ç—Ñ—Ñ–µ–∫—Ç–∞ {/*preventing-an-effect-from-firing-too-often*/}

–í—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤–∞–º –º–æ–≥—É—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ [—ç—Ñ—Ñ–µ–∫—Ç–∞:](/learn/synchronizing-with-effects)

```js {4-7,10}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  const options = {
    serverUrl: 'https://localhost:1234',
    roomId: roomId
  }

  useEffect(() => {
    const connection = createConnection(options);
    connection.connect();
    // ...
```

–≠—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–±–ª–µ–º—É. [–ö–∞–∂–¥–æ–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–æ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤–∞—à–µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞.](/learn/lifecycle-of-reactive-effects#react-verifies-that-you-specified-every-reactive-value-as-a-dependency) –ù–æ –µ—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–∏—Ç–µ `options` –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –≤–∞—à —ç—Ñ—Ñ–µ–∫—Ç –Ω–∞—á–Ω—ë—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —á–∞—Ç—É:


```js {5}
  useEffect(() => {
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [options]); // üî¥ –ü—Ä–æ–±–ª–µ–º–∞: —ç—Ç–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
  // ...
```

–†–µ—à–µ–Ω–∏–µ ‚Äì –æ–±–µ—Ä–Ω—É—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –≤ —ç—Ñ—Ñ–µ–∫—Ç–µ –æ–±—ä–µ–∫—Ç –≤ `useMemo`:

```js {4-9,16}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  const options = useMemo(() => {
    return {
      serverUrl: 'https://localhost:1234',
      roomId: roomId
    };
  }, [roomId]); // ‚úÖ –ú–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è roomId

  useEffect(() => {
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
<<<<<<< HEAD
  }, [options]); // ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è options
=======
  }, [options]); // ‚úÖ Only changes when options changes
>>>>>>> 6fc98fffdaad3b84e6093d1eb8def8f2cedeee16
  // ...
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–±—ä–µ–∫—Ç `options` –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –µ—Å–ª–∏ `useMemo` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç.

–û–¥–Ω–∞–∫–æ `useMemo` —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∞ –Ω–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –≥–∞—Ä–∞–Ω—Ç–∏–µ–π. React –º–æ–∂–µ—Ç –æ—Ç–±—Ä–æ—Å–∏—Ç—å –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ [–≤–æ–∑–Ω–∏–∫–Ω–µ—Ç —É—Å–ª–æ–≤–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ](#caveats). –≠—Ç–æ —Ç–∞–∫–∂–µ —Å–ø—Ä–æ–≤–æ—Ü–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —ç—Ñ—Ñ–µ–∫—Ç–∞, **—Ç–∞–∫ —á—Ç–æ –µ—â—ë –ª—É—á—à–µ –±—É–¥–µ—Ç –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏,** –ø–µ—Ä–µ–º–µ—Å—Ç–∏–≤ –≤–∞—à –æ–±—ä–µ–∫—Ç *–≤–Ω—É—Ç—Ä—å* —ç—Ñ—Ñ–µ–∫—Ç–∞:

```js {5-8,13}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  useEffect(() => {
    const options = { // ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è useMemo –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ–±—ä–µ–∫—Ç–∞!
      serverUrl: 'https://localhost:1234',
      roomId: roomId
    }
    
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // ‚úÖ –ú–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è roomId
  // ...
```

–¢–µ–ø–µ—Ä—å –≤–∞—à –∫–æ–¥ —Å—Ç–∞–ª –ø—Ä–æ—â–µ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç `useMemo`. [–£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∞.](/learn/removing-effect-dependencies#move-dynamic-objects-and-functions-inside-your-effect)


### –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥—Ä—É–≥–∏—Ö —Ö—É–∫–æ–≤ {/*memoizing-a-dependency-of-another-hook*/}

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –æ–±—ä–µ–∫—Ç–∞, —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```js {2}
function Dropdown({ allItems, text }) {
  const searchOptions = { matchMode: 'whole-word', text };

  const visibleItems = useMemo(() => {
    return searchItems(allItems, searchOptions);
  }, [allItems, searchOptions]); // üö© –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –æ–±—ä–µ–∫—Ç–∞, —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  // ...
```

–ü–æ–¥–æ–±–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å–≤–æ–¥–∏—Ç –Ω–∞ –Ω–µ—Ç –≤—Å–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏. –ü—Ä–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤–µ—Å—å –µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, **–≤–∫–ª—é—á–∞—è —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ `searchOptions`**. –ò –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é `useMemo`, React –∫–∞–∂–¥—ã–π —Ä–∞–∑ –±—É–¥–µ—Ç –∑–∞–Ω–æ–≤–æ –≤—ã—á–∏—Å–ª—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `visibleItems`.

–ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –º–æ–∂–Ω–æ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º –æ–±—ä–µ–∫—Ç `searchOptions` –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–≥–æ –≤ –≤–∏–¥–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```js {2-4}
function Dropdown({ allItems, text }) {
  const searchOptions = useMemo(() => {
    return { matchMode: 'whole-word', text };
  }, [text]); // ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ text

  const visibleItems = useMemo(() => {
    return searchItems(allItems, searchOptions);
  }, [allItems, searchOptions]); // ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ allItems –∏–ª–∏ searchOptions
  // ...
```

–í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ `searchOptions` –±—É–¥–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `text`. –ü—Ä–∏ —ç—Ç–æ–º –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –µ—â—ë –ª—É—á—à–µ ‚Äì –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ–±—ä–µ–∫—Ç `searchOptions` *–≤–Ω—É—Ç—Ä—å* –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `useMemo`:

```js {3}
function Dropdown({ allItems, text }) {
  const visibleItems = useMemo(() => {
    const searchOptions = { matchMode: 'whole-word', text };
    return searchItems(allItems, searchOptions);
  }, [allItems, text]); // ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ allItems –∏–ª–∏ text
  // ...
```

–¢–µ–ø–µ—Ä—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å—è—Ç –Ω–∞–ø—Ä—è–º—É—é –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è `text`, –∫–æ—Ç–æ—Ä–æ–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ—á–Ω—ã–º –∏ –Ω–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è ¬´–Ω–µ–∑–∞–º–µ—Ç–Ω–æ¬ª.

---

### –ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π {/*memoizing-a-function*/}

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Form` –æ–±—ë—Ä–Ω—É—Ç –≤ [`memo`](/reference/react/memo) –∏ –ø–æ–ª—É—á–∞–µ—Ç –∫–∞–∫ –ø—Ä–æ–ø —Ñ—É–Ω–∫—Ü–∏—é:

```js {2-7}
export default function ProductPage({ productId, referrer }) {
  function handleSubmit(orderDetails) {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails
    });
  }

  return <Form onSubmit={handleSubmit} />;
}
```

–ü–æ–¥–æ–±–Ω–æ —Ç–æ–º—É –∫–∞–∫ –æ–±—ä–µ–∫—Ç–Ω—ã–π –ª–∏—Ç–µ—Ä–∞–ª `{}` —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ `function() {}` –∏–ª–∏ `() => {}` —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ. –°–∞–º–æ –ø–æ —Å–µ–±–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π (–∏ —ç—Ç–æ–≥–æ, –∫–æ–Ω–µ—á–Ω–æ, –Ω–µ —Å—Ç–æ–∏—Ç –∏–∑–±–µ–≥–∞—Ç—å). –û–¥–Ω–∞–∫–æ –ø–æ—Å–∫–æ–ª—å–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Form` –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω, —Å—Ç–æ–∏—Ç –ø–æ–¥—É–º–∞—Ç—å –æ –ø—Ä–æ–ø—É—Å–∫–µ –ª–∏—à–Ω–∏—Ö —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤, –µ—Å–ª–∏ –µ–≥–æ –ø—Ä–æ–ø—Å—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏.

–ß—Ç–æ–±—ã –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –µ—ë –∏–∑ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `useMemo`:

```js {2-3,8-9}
export default function Page({ productId, referrer }) {
  const handleSubmit = useMemo(() => {
    return (orderDetails) => {
      post('/product/' + productId + '/buy', {
        referrer,
        orderDetails
      });
    };
  }, [productId, referrer]);

  return <Form onSubmit={handleSubmit} />;
}
```

**–ü–æ—Å–∫–æ–ª—å–∫—É –º–µ–º–æ–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π ‚Äì –¥–æ–≤–æ–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞, –≤ React –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ö—É–∫ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —ç—Ç–∏—Ö —Ü–µ–ª–µ–π**. –í–º–µ—Å—Ç–æ `useMemo` –º–æ–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ [`useCallback`](/reference/react/useCallback) –∏ –∏–∑–±–µ–∂–∞—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:

```js {2,7}
export default function Page({ productId, referrer }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails
    });
  }, [productId, referrer]);

  return <Form onSubmit={handleSubmit} />;
}
```

–î–≤–∞ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ö—É–∫–∞ `useCallback` –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏. –û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –ø–æ–¥—Ä–æ–±–Ω–µ–µ —Å —Ö—É–∫–æ–º `useCallback` –º–æ–∂–Ω–æ [–∑–¥–µ—Å—å](/reference/react/useCallback).

---

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ {/*troubleshooting*/}

### –í—ã—á–∏—Å–ª–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –¥–≤–∞–∂–¥—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ {/*my-calculation-runs-twice-on-every-re-render*/}

–í [—Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ](/reference/react/StrictMode) React –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–≤–∞–∂–¥—ã:

```js {2,5,6}
function TodoList({ todos, tab }) {
  // –§—É–Ω–∫—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –¥–≤–∞–∂–¥—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ

  const visibleTodos = useMemo(() => {
    // –≠—Ç–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å—Ç—è—Ç—Å—è –¥–≤–∞–∂–¥—ã, –µ—Å–ª–∏ –ª—é–±–∞—è –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–∑–º–µ–Ω–∏—Ç—Å—è
    return filterTodos(todos, tab);
  }, [todos, tab]);

  // ...
```

–¢–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ–º–æ, –∏ –Ω–µ –¥–æ–ª–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å –≤–∞—à –∫–æ–¥.

–û–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É [—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —á–∏—Å—Ç—ã–º–∏](/learn/keeping-components-pure). React –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ª–∏—à—å –æ–¥–Ω–æ–≥–æ –∏–∑ –≤—ã–∑–æ–≤–æ–≤ –∏ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ. –≠—Ç–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ —Å–∫–∞–∑–∞—Ç—å—Å—è –Ω–∞ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –µ—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —á–∏—Å—Ç—ã–µ. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –≤ –∫–æ–¥–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–∏ —Å [–ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏](https://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D0%B1%D0%BE%D1%87%D0%BD%D1%8B%D0%B9_%D1%8D%D1%84%D1%84%D0%B5%D0%BA%D1%82_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)), —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –∏—Ö –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å.

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–æ–¥–µ –Ω–∏–∂–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –º—É—Ç–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ –ø—Ä–æ–ø—Å–æ–≤:

```js {2-3}
  const visibleTodos = useMemo(() => {
    // üö© –û—à–∏–±–∫–∞: –º—É—Ç–∞—Ü–∏—è –ø—Ä–æ–ø—Å–∞
    todos.push({ id: 'last', text: 'Go for a walk!' });
    const filtered = filterTodos(todos, tab);
    return filtered;
  }, [todos, tab]);
```

–ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–æ–º—É —á—Ç–æ React –≤—ã–∑–æ–≤–µ—Ç —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –¥–≤–∞–∂–¥—ã, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–º–µ—Ç–∏—Ç, —á—Ç–æ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ todo –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –¥–≤–∞ —Ä–∞–∑–∞. –ò–∑–º–µ–Ω—è—Ç—å –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π ‚Äì –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ –Ω–∏–∫–∞–∫–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑–º–µ–Ω—è—Ç—å—Å—è *–Ω–µ –¥–æ–ª–∂–Ω—ã*. –¢–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è `filterTodos` –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç *–Ω–æ–≤—ã–π* –º–∞—Å—Å–∏–≤, —Ç–æ –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º –º–æ–∂–Ω–æ:

```js {3,4}
  const visibleTodos = useMemo(() => {
    const filtered = filterTodos(todos, tab);
    // ‚úÖ –ú—É—Ç–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–∞, —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
    filtered.push({ id: 'last', text: 'Go for a walk!' });
    return filtered;
  }, [todos, tab]);
```

–ë–æ–ª—å—à–µ –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–∏—Å—Ç—ã–º –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å [–∑–¥–µ—Å—å](/learn/keeping-components-pure).

–ü–æ–º–∏–º–æ —Ç–æ–≥–æ, –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞–º–∏ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é [–æ–±—ä–µ–∫—Ç–æ–≤](/learn/updating-objects-in-state) –∏ [–º–∞—Å—Å–∏–≤–æ–≤](/learn/updating-arrays-in-state) –±–µ–∑ –º—É—Ç–∞—Ü–∏–π.

---

### `useMemo` –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–±—ä–µ–∫—Ç, –∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç undefined {/*my-usememo-call-is-supposed-to-return-an-object-but-returns-undefined*/}
–≠—Ç–æ—Ç –∫–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```js {1-2,5}
  // üî¥ –¢–∞–∫–æ–π –∑–∞–ø–∏—Å—å—é –≤–µ—Ä–Ω—É—Ç—å –æ–±—ä–µ–∫—Ç –∏–∑ —Å—Ç—Ä–µ–ª–æ—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–ª—å–∑—è:
  const searchOptions = useMemo(() => {
    matchMode: 'whole-word',
    text: text
  }, [text]);
```

–í —è–∑—ã–∫–µ JavaScript –∑–∞–ø–∏—Å—å `() => {` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ç–µ–ª–æ —Å—Ç—Ä–µ–ª–æ—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å–∫–æ–±–∫–∞ `{` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –æ–±—ä–µ–∫—Ç–∞. –ü–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç, —á—Ç–æ –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–µ. –≠—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, –¥–æ–±–∞–≤–∏–≤ –∫—Ä—É–≥–ª—ã–µ —Å–∫–æ–±–∫–∏: `({` –∏ `})`:

```js {1-2,5}
  // –≠—Ç–æ—Ç –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ–¥–Ω–∞–∫–æ –µ–≥–æ –ª–µ–≥–∫–æ –∑–∞–Ω–æ–≤–æ —Å–ª–æ–º–∞—Ç—å
  const searchOptions = useMemo(() => ({
    matchMode: 'whole-word',
    text: text
  }), [text]);
```

–ü–æ–¥–æ–±–Ω–∞—è –∑–∞–ø–∏—Å—å –º–æ–∂–µ—Ç —Å–±–∏–≤–∞—Ç—å —Å —Ç–æ–ª–∫—É, –∏ —ç—Ç–æ—Ç –∫–æ–¥ –º–æ–∂–Ω–æ –∑–∞–Ω–æ–≤–æ —Å–ª–æ–º–∞—Ç—å, —Å–ª—É—á–∞–π–Ω–æ —É–¥–∞–ª–∏–≤ —Å–∫–æ–±–∫–∏.

–ß—Ç–æ–±—ã —ç—Ç–æ–≥–æ –∏–∑–±–µ–∂–∞—Ç—å, –º–æ–∂–Ω–æ —è–≤–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å `return`:

```js {1-3,6-7}
  // ‚úÖ –≠—Ç–æ—Ç –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–∏ —ç—Ç–æ–º –æ–Ω –æ–ø–∏—Å–∞–Ω —è–≤–Ω–æ
  const searchOptions = useMemo(() => {
    return {
      matchMode: 'whole-word',
      text: text
    };
  }, [text]);
```

---

### –í—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ `useMemo` –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ {/*every-time-my-component-renders-the-calculation-in-usememo-re-runs*/}

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `useMemo` –±—ã–ª –ø–µ—Ä–µ–¥–∞–Ω –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Ç–æ `useMemo` –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑:

```js {2-3}
function TodoList({ todos, tab }) {
  // üî¥ –ù–µ—Ç –º–∞—Å—Å–∏–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚Äì –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑
  const visibleTodos = useMemo(() => filterTodos(todos, tab));
  // ...
```

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –º–∞—Å—Å–∏–≤–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```js {2-3}
function TodoList({ todos, tab }) {
  // ‚úÖ –ù–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –Ω–∞–¥–æ–±–Ω–æ—Å—Ç–∏
  const visibleTodos = useMemo(() => filterTodos(todos, tab), [todos, tab]);
  // ...
```

–ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ, —Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ç–æ–º, —á—Ç–æ –∫–∞–∫–∞—è-—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—å –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ. –≠—Ç—É –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ –æ—Ç–ª–∞–¥–∏—Ç—å, –≤—ã–≤–µ–¥—è –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–æ–Ω—Å–æ–ª—å:

```js
  const visibleTodos = useMemo(() => filterTodos(todos, tab), [todos, tab]);
  console.log([todos, tab]);
```

–ó–∞—Ç–µ–º –≤ –∫–æ–Ω—Å–æ–ª–∏ –º–æ–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –ø–æ –º–∞—Å—Å–∏–≤–∞–º –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –∏ –¥–ª—è –æ–±–æ–∏—Ö –≤—ã–±—Ä–∞—Ç—å –æ–ø—Ü–∏—é ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é¬ª. –ü–µ—Ä–≤—ã–π —Å–æ—Ö—Ä–∞–Ω–∏–º –∫–∞–∫ `temp1`, –∞ –≤—Ç–æ—Ä–æ–π ‚Äì –∫–∞–∫ `temp2`. –ó–¥–µ—Å—å –∂–µ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—Å–µ –ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –º–∞—Å—Å–∏–≤–∞—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ:

```js
Object.is(temp1[0], temp2[0]); // –û–¥–∏–Ω–∞–∫–æ–≤—ã –ª–∏ –ø–µ—Ä–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è?
Object.is(temp1[1], temp2[1]); // –û–¥–∏–Ω–∞–∫–æ–≤—ã –ª–∏ –≤—Ç–æ—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è?
Object.is(temp1[2], temp2[2]); // ... –∏ —Ç–∞–∫ –¥–ª—è –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ...
```

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É–±—Ä–∞—Ç—å –µ—ë –∏–ª–∏ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è [–º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å](#memoizing-a-dependency-of-another-hook).

---

### –ù—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `useMemo` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Ü–∏–∫–ª–µ, –Ω–æ —ç—Ç–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ {/*i-need-to-call-usememo-for-each-list-item-in-a-loop-but-its-not-allowed*/}

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Chart` –æ–±—ë—Ä–Ω—É—Ç –≤ [`memo`](/reference/react/memo). –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö, –µ—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ReportList` —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è. –û–¥–Ω–∞–∫–æ –≤—ã–∑—ã–≤–∞—Ç—å `useMemo` –≤ —Ü–∏–∫–ª–∞—Ö –∑–∞–ø—Ä–µ—â–µ–Ω–æ:

```js {5-11}
function ReportList({ items }) {
  return (
    <article>
      {items.map(item => {
        // üî¥ –ù–µ–ª—å–∑—è –≤—ã–∑–≤–∞—Ç—å `useMemo` –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞
        const data = useMemo(() => calculateReport(item), [item]);
        return (
          <figure key={item.id}>
            <Chart data={data} />
          </figure>
        );
      })}
    </article>
  );
}
```

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ:

```js {5,12-18}
function ReportList({ items }) {
  return (
    <article>
      {items.map(item =>
        <Report key={item.id} item={item} />
      )}
    </article>
  );
}

function Report({ item }) {
  // ‚úÖ –í—ã–∑–æ–≤ useMemo –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  const data = useMemo(() => calculateReport(item), [item]);
  return (
    <figure>
      <Chart data={data} />
    </figure>
  );
}
```

–í –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å `useMemo`, –∏ –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ –æ–±–µ—Ä–Ω—É—Ç—å —Å–∞–º `Report` –≤ [`memo`](/reference/react/memo). –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –ø—Ä–æ–ø `item` –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è, —Ç–æ `Report` –ø—Ä–æ–ø—É—Å—Ç–∏—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä –≤–º–µ—Å—Ç–µ —Å–æ —Å–≤–æ–∏–º –¥–æ—á–µ—Ä–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `Chart`:

```js {5,6,12}
function ReportList({ items }) {
  // ...
}

const Report = memo(function Report({ item }) {
  const data = calculateReport(item);
  return (
    <figure>
      <Chart data={data} />
    </figure>
  );
});
```
