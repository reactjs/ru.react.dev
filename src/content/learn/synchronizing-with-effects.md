---
title: '–≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏'
---

<Intro>

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–º —Å React, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ. *–≠—Ñ—Ñ–µ–∫—Ç—ã* –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–¥ –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –≤–Ω–µ React.

</Intro>

<YouWillLearn>

- –ß—Ç–æ —Ç–∞–∫–æ–µ –≠—Ñ—Ñ–µ–∫—Ç—ã
- –ß–µ–º –≠—Ñ—Ñ–µ–∫—Ç—ã –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç —Å–æ–±—ã—Ç–∏–π
- –ö–∞–∫ –æ–±—ä—è–≤–∏—Ç—å –≠—Ñ—Ñ–µ–∫—Ç –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
- –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –ª–∏—à–Ω–∏—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤ –≠—Ñ—Ñ–µ–∫—Ç–æ–≤
- –ü–æ—á–µ–º—É –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≠—Ñ—Ñ–µ–∫—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –¥–≤–∞–∂–¥—ã –∏ –∫–∞–∫ —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

</YouWillLearn>

## –ß—Ç–æ —Ç–∞–∫–æ–µ –≠—Ñ—Ñ–µ–∫—Ç—ã –∏ —á–µ–º –≠—Ñ—Ñ–µ–∫—Ç—ã –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç —Å–æ–±—ã—Ç–∏–π? {/*what-are-effects-and-how-are-they-different-from-events*/}

–ü—Ä–µ–∂–¥–µ —á–µ–º –ø–µ—Ä–µ–π—Ç–∏ –∫ –≠—Ñ—Ñ–µ–∫—Ç–∞–º, –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥–≤—É–º—è —Ç–∏–ø–∞–º–∏ –ª–æ–≥–∏–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ React:

- **–ö–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞** (–ø–æ–¥—Ä–æ–±–Ω–µ–µ [–û–ø–∏—Å–∞–Ω–∏–µ UI](/learn/describing-the-ui)) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –ó–¥–µ—Å—å –≤—ã –±–µ—Ä—ë—Ç–µ –ø—Ä–æ–ø—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç–µ –∏—Ö –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ —Ç–æ—Ç JSX, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–∏–¥–µ—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω–µ. [–ö–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å—Ç—ã–º.](/learn/keeping-components-pure) –ö–∞–∫ –∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞, –æ–Ω –¥–æ–ª–∂–µ–Ω —Ç–æ–ª—å–∫–æ _–≤—ã—á–∏—Å–ª—è—Ç—å_ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–µ –≤—ã–ø–æ–ª–Ω—è—è –¥—Ä—É–≥–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.

- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π** (–ø–æ–¥—Ä–æ–±–Ω–µ–µ [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏](/learn/adding-interactivity)) ‚Äî —ç—Ç–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ *–≤—ã–ø–æ–ª–Ω—è—é—Ç –¥–µ–π—Å—Ç–≤–∏—è*, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∏—Ö –≤—ã—á–∏—Å–ª—è—é—Ç. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –º–æ–≥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ–ª—è –≤–≤–æ–¥–∞, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å HTTP POST-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ –∏–ª–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –¥—Ä—É–≥–æ–π —ç–∫—Ä–∞–Ω. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π —Å–æ–¥–µ—Ä–∂–∞—Ç ["–ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã"](https://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D0%B1%D0%BE%D1%87%D0%BD%D1%8B%D0%B9_%D1%8D%D1%84%D1%84%D0%B5%D0%BA%D1%82_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)), –≤—ã–∑–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –∏–ª–∏ –Ω–∞–±–æ—Ä —Ç–µ–∫—Å—Ç–∞).

–ò–Ω–æ–≥–¥–∞ —ç—Ç–æ–≥–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ChatRoom`, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —á–∞—Ç–∞ –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –æ–Ω –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É ‚Äî —ç—Ç–æ –Ω–µ —á–∏—Å—Ç–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ (—ç—Ç–æ –ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç), –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –û–¥–Ω–∞–∫–æ, –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏ –∫–∞–∫–æ–≥–æ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è, –ø–æ–¥–æ–±–Ω–æ–≥–æ –∫–ª–∏–∫—É, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–ª –±—ã `ChatRoom`.

***–≠—Ñ—Ñ–µ–∫—Ç—ã* –ø–æ–∑–≤–æ–ª—è—é—Ç —É–∫–∞–∑–∞—Ç—å –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, –≤—ã–∑–≤–∞–Ω–Ω—ã–µ —Å–∞–º–∏–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Å–æ–±—ã—Ç–∏–µ–º.** –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ —è–≤–ª—è–µ—Ç—Å—è *—Å–æ–±—ã—Ç–∏–µ–º*, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É. –í —Ç–æ –∂–µ –≤—Ä–µ–º—è, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º —è–≤–ª—è–µ—Ç—Å—è *–≠—Ñ—Ñ–µ–∫—Ç–æ–º*, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–∑–≤–∞–ª–æ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –≠—Ñ—Ñ–µ–∫—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ [—Ñ–∏–∫—Å–∞—Ü–∏–∏](/learn/render-and-commit), –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —ç–∫—Ä–∞–Ω –æ–±–Ω–æ–≤–∏—Ç—Å—è. –≠—Ç–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –º–æ–º–µ–Ω—Ç –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ React —Å –∫–∞–∫–æ–π-–ª–∏–±–æ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ç—å—é –∏–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π).

<Note>

–ó–¥–µ—Å—å –∏ –¥–∞–ª–µ–µ –≤ —Ç–µ–∫—Å—Ç–µ ¬´–≠—Ñ—Ñ–µ–∫—Ç¬ª, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã, –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω–æ–º—É –≤—ã—à–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–º—É –¥–ª—è React, —Ç–æ –µ—Å—Ç—å –∫ –ø–æ–±–æ—á–Ω–æ–º—É —ç—Ñ—Ñ–µ–∫—Ç—É, –≤—ã–∑–≤–∞–Ω–Ω–æ–º—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º. –ß—Ç–æ–±—ã –æ—Ç–ª–∏—á–∞—Ç—å –µ–≥–æ –æ—Ç –∫–æ–Ω—Ü–µ–ø—Ç–∞, –ø—Ä–∏–º–µ–Ω–∏–º–æ–≥–æ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤ —Ü–µ–ª–æ–º, –º—ã –±—É–¥–µ–º –Ω–∞–∑—ã–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π ¬´–ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã¬ª.

</Note>


## –í–æ–∑–º–æ–∂–Ω–æ, –≠—Ñ—Ñ–µ–∫—Ç –≤–∞–º –Ω–µ –Ω—É–∂–µ–Ω {/*you-might-not-need-an-effect*/}

**–ù–µ —Ç–æ—Ä–æ–ø–∏—Ç–µ—Å—å –¥–æ–±–∞–≤–ª—è—Ç—å –≠—Ñ—Ñ–µ–∫—Ç—ã –≤ –≤–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.** –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –≠—Ñ—Ñ–µ–∫—Ç—ã –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤—ã–π—Ç–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –≤–∞—à–µ–≥–æ React-–∫–æ–¥–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å *–≤–Ω–µ—à–Ω–∏–º–∏* —Å–∏—Å—Ç–µ–º–∞–º–∏. –ö –Ω–∏–º –æ—Ç–Ω–æ—Å—è—Ç—Å—è API –±—Ä–∞—É–∑–µ—Ä–∞, —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –≤–∏–¥–∂–µ—Ç—ã, —Å–µ—Ç—å –∏ —Ç–æ–º—É –ø–æ–¥–æ–±–Ω–æ–µ. –ï—Å–ª–∏ –≤–∞—à –≠—Ñ—Ñ–µ–∫—Ç –ª–∏—à—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ–¥–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –¥—Ä—É–≥–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≤–æ–∑–º–æ–∂–Ω–æ, [–≠—Ñ—Ñ–µ–∫—Ç –≤–∞–º –Ω–µ –Ω—É–∂–µ–Ω.](/learn/you-might-not-need-an-effect)

## –ö–∞–∫ –Ω–∞–ø–∏—Å–∞—Ç—å –≠—Ñ—Ñ–µ–∫—Ç {/*how-to-write-an-effect*/}

–ß—Ç–æ–±—ã –Ω–∞–ø–∏—Å–∞—Ç—å –≠—Ñ—Ñ–µ–∫—Ç, —Å–ª–µ–¥—É–π—Ç–µ —Ç—Ä—ë–º —à–∞–≥–∞–º:

1. **–û–±—ä—è–≤–∏—Ç–µ –≠—Ñ—Ñ–µ–∫—Ç.** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≠—Ñ—Ñ–µ–∫—Ç –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã [—Ñ–∏–∫—Å–∞—Ü–∏–∏](/learn/render-and-commit).
2. **–£–∫–∞–∂–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≠—Ñ—Ñ–µ–∫—Ç–∞.** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≠—Ñ—Ñ–µ–∫—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è, —Ç–æ–ª—å–∫–æ *–∫–æ–≥–¥–∞ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ*, –∞ –Ω–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –∞–Ω–∏–º–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —á–∞—Ç—É –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç –Ω–µ–≥–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å, —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏–ª–∏ –∏—Å—á–µ–∑–∞–µ—Ç, –∏–ª–∏ –∫–æ–≥–¥–∞ —á–∞—Ç –º–µ–Ω—è–µ—Ç—Å—è. –í—ã —É–∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è *–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏*.
3. **–î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≠—Ñ—Ñ–µ–∫—Ç—ã –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ —É–∫–∞–∑–∞–Ω–∏–∏, –∫–∞–∫ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –æ—Ç–º–µ–Ω–∏—Ç—å –∏–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å —Ç–æ, —á—Ç–æ –æ–Ω–∏ –¥–µ–ª–∞–ª–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, "—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–≤—è–∑–∏" –Ω—É–∂–¥–∞–µ—Ç—Å—è "–≤ —Ä–∞–∑—Ä—ã–≤–µ —Å–≤—è–∑–∏", "–ø–æ–¥–ø–∏—Å–∫–∞" –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ "–æ—Ç–ø–∏—Å–∫–µ", –∞ "–∑–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö" –º–æ–∂–µ—Ç –Ω—É–∂–¥–∞—Ç—å—Å—è –≤ "–æ—Ç–º–µ–Ω–µ" –∏–ª–∏ "–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏". –í—ã —É–∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—è *—Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏*.

–î–∞–≤–∞–π—Ç–µ –≤–∑–≥–ª—è–Ω–µ–º –Ω–∞ –∫–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∏—Ö —à–∞–≥–æ–≤ –ø–æ–¥—Ä–æ–±–Ω–µ–µ.

### –®–∞–≥ 1: –û–±—ä—è–≤–ª–µ–Ω–∏–µ –≠—Ñ—Ñ–µ–∫—Ç–∞ {/*step-1-declare-an-effect*/}

–ß—Ç–æ–±—ã –æ–±—ä—è–≤–∏—Ç—å –≠—Ñ—Ñ–µ–∫—Ç –≤ –≤–∞—à–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ, –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ [`useEffect` Hook](/reference/react/useEffect) –∏–∑ React:

```js
import { useEffect } from 'react';
```

–ó–∞—Ç–µ–º –≤—ã–∑–æ–≤–∏—Ç–µ –µ–≥–æ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ –ª—é–±–æ–π –∫–æ–¥ –≤–Ω—É—Ç—Ä—å –≠—Ñ—Ñ–µ–∫—Ç–∞:

```js {2-4}
function MyComponent() {
  useEffect(() => {
    // –ö–æ–¥ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ—Å–ª–µ *–∫–∞–∂–¥–æ–≥–æ* —Ä–µ–Ω–¥–µ—Ä–∞
  });
  return <div />;
}
```

–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è, React –æ–±–Ω–æ–≤–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, *–∞ –∑–∞—Ç–µ–º* –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–¥ –≤–Ω—É—Ç—Ä–∏. –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, **`useEffect` "–∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç" –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –∫–æ–¥–∞ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ.**

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≠—Ñ—Ñ–µ–∫—Ç, —á—Ç–æ–±—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–æ–π. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<VideoPlayer>`. –ë—ã–ª–æ –±—ã —É–¥–æ–±–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏–ª–∏ –ø–∞—É–∑—É, –ø–µ—Ä–µ–¥–∞–≤–∞—è –µ–º—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–ø—Å–∞ `isPlaying`:

```js
<VideoPlayer isPlaying={isPlaying} />;
```

–í–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `VideoPlayer` —Ä–µ–Ω–¥–µ—Ä–∏—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ –±—Ä–∞—É–∑–µ—Ä —Ç–µ–≥ [`<video>`](https://developer.mozilla.org/ru/docs/Web/HTML/Element/video):

```js
function VideoPlayer({ src, isPlaying }) {
  // TODO: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è isPlaying
  return <video src={src} />;
}
```

–û–¥–Ω–∞–∫–æ, —Ç–µ–≥ `<video>` –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–æ–ø—Å–∞ `isPlaying`. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –≤—Ä—É—á–Ω—É—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ ‚Äî –≤—Ä—É—á–Ω—É—é –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã [`play()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/play) –∏ [`pause()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/pause) –Ω–∞ DOM-—ç–ª–µ–º–µ–Ω—Ç–µ. **–í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–ø–∞ `isPlaying`, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç, –¥–æ–ª–∂–Ω–æ –ª–∏ –≤–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, —Å –≤—ã–∑–æ–≤–∞–º–∏ –º–µ—Ç–æ–¥–æ–≤ `play()` –∏ `pause()`.**

–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω–∞–º –Ω—É–∂–Ω–æ [–ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É (ref)](/learn/manipulating-the-dom-with-refs) –Ω–∞ DOM-—É–∑–µ–ª `<video>`.

–ú–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å —Å–æ–±–ª–∞–∑–Ω –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—ã–∑–≤–∞—Ç—å `play()` –∏–ª–∏ `pause()` –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –Ω–æ —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:

<Sandpack>

```js {expectedErrors: {'react-compiler': [7, 9]}}
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  if (isPlaying) {
    ref.current.play();  // –í—ã–∑—ã–≤–∞—Ç—å —ç—Ç–æ –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –Ω–µ–ª—å–∑—è.
  } else {
    ref.current.pause(); // –≠—Ç–æ —Ç–æ–∂–µ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ —Å–±–æ—é.
  }

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  return (
    <>
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? '–ü–∞—É–∑–∞' : '–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

```css
button { display: block; margin-bottom: 20px; }
video { width: 250px; }
```

</Sandpack>

–≠—Ç–æ—Ç –∫–æ–¥ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –ø—ã—Ç–∞–µ—Ç—Å—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å DOM-—É–∑–ª–æ–º –≤ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –í React [—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å—Ç—ã–º –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ–º](/learn/keeping-components-pure) —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ JSX –∏ –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–µ DOM.

–ë–æ–ª–µ–µ —Ç–æ–≥–æ, –∫–æ–≥–¥–∞ `VideoPlayer` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑, –µ–≥–æ DOM-—É–∑–µ–ª –µ—â—ë –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç! –ù–µ—Ç DOM-—É–∑–ª–∞, —á—Ç–æ–±—ã –≤—ã–∑—ã–≤–∞—Ç—å `play()` –∏–ª–∏ `pause()`, –ø–æ—Ç–æ–º—É —á—Ç–æ React –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫–æ–π DOM —Å–æ–∑–¥–∞—Ç—å, –ø–æ–∫–∞ –≤—ã –Ω–µ –≤–µ—Ä–Ω—ë—Ç–µ JSX.

–ß—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **–æ–±–µ—Ä–Ω—É—Ç—å –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≤ `useEffect`, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤—ã–Ω–µ—Å—Ç–∏ –∏—Ö –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:**

```js {6,12}
import { useEffect, useRef } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}
```

–û–±–µ—Ä–Ω—É–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ DOM –≤ –≠—Ñ—Ñ–µ–∫—Ç, –≤—ã –ø–æ–∑–≤–æ–ª—è–µ—Ç–µ React —Å–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–∏—Ç—å —ç–∫—Ä–∞–Ω. –ó–∞—Ç–µ–º –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.

–ö–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `VideoPlayer` —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è (–≤–ø–µ—Ä–≤—ã–µ –∏–ª–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–µ), –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏–π. –°–Ω–∞—á–∞–ª–∞ React –æ–±–Ω–æ–≤–∏—Ç —ç–∫—Ä–∞–Ω, —É–±–µ–¥–∏–≤—à–∏—Å—å, —á—Ç–æ —Ç–µ–≥ `<video>` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ DOM —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏. –ó–∞—Ç–µ–º React –∑–∞–ø—É—Å–∫–∞–µ—Ç –≠—Ñ—Ñ–µ–∫—Ç. –ò –Ω–∞–∫–æ–Ω–µ—Ü, –≠—Ñ—Ñ–µ–∫—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `play()` –∏–ª–∏ `pause()` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è `isPlaying`.

–ù–∞–∂–º–∏—Ç–µ "–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ/–ü–∞—É–∑–∞" –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –≤–∏–¥–µ–æ–ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º —Å–≤–æ–π—Å—Ç–≤–∞ `isPlaying`:

<Sandpack>

```js
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  return (
    <>
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? '–ü–∞—É–∑–∞' : '–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

```css
button { display: block; margin-bottom: 20px; }
video { width: 250px; }
```

</Sandpack>

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ "–≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–æ–π", –∫–æ—Ç–æ—Ä—É—é –≤—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∏ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º React, –±—ã–ª–æ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–µ –º–µ–¥–∏–∞ API. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ö–æ–∂–∏–π –ø–æ–¥—Ö–æ–¥, —á—Ç–æ–±—ã –æ–±–µ—Ä–Ω—É—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π React (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–ª–∞–≥–∏–Ω—ã jQuery), –≤ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã React.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä–æ–º –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≥–æ—Ä–∞–∑–¥–æ —Å–ª–æ–∂–Ω–µ–µ. –í—ã–∑–æ–≤ `play()` –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –∏–ª–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤–∏–¥–µ–æ, –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞, –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ. –≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –æ—á–µ–Ω—å —É–ø—Ä–æ—â—ë–Ω –∏ –Ω–µ–ø–æ–ª–æ–Ω.

<Pitfall>

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≠—Ñ—Ñ–µ–∫—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ—Å–ª–µ *–∫–∞–∂–¥–æ–≥–æ* —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –ü–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ –∫–æ–¥, –ø–æ–¥–æ–±–Ω—ã–π —ç—Ç–æ–º—É, **–≤—ã–∑–æ–≤–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª:**

```js
const [count, setCount] = useState(0);
useEffect(() => {
  setCount(count + 1);
});
```

–≠—Ñ—Ñ–µ–∫—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–∞–∫ *—Ä–µ–∑—É–ª—å—Ç–∞—Ç* —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è *–∑–∞–ø—É—Å–∫–∞–µ—Ç* —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤ –≠—Ñ—Ñ–µ–∫—Ç–µ ‚Äî —ç—Ç–æ –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–æ–∑–µ—Ç–∫—É –≤ —Å–∞–º—É —Å–µ–±—è. –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –æ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, —á—Ç–æ —Å–Ω–æ–≤–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ.

–≠—Ñ—Ñ–µ–∫—Ç—ã –æ–±—ã—á–Ω–æ –¥–æ–ª–∂–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å *–≤–Ω–µ—à–Ω–µ–π* —Å–∏—Å—Ç–µ–º–æ–π. –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –≤–Ω–µ—à–Ω—è—è —Å–∏—Å—Ç–µ–º–∞, –∏ –≤—ã —Ç–æ–ª—å–∫–æ —Ö–æ—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –æ–¥–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥—Ä—É–≥–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, [–≤–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –Ω–µ –Ω—É–∂–µ–Ω –≠—Ñ—Ñ–µ–∫—Ç.](/learn/you-might-not-need-an-effect)

</Pitfall>

### Step 2: –£–∫–∞–∂–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≠—Ñ—Ñ–µ–∫—Ç–∞ {/*step-2-specify-the-effect-dependencies*/}

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≠—Ñ—Ñ–µ–∫—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ—Å–ª–µ *–∫–∞–∂–¥–æ–≥–æ* —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –ß–∞—Å—Ç–æ —ç—Ç–æ **–Ω–µ —Ç–æ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ:**

- –ò–Ω–æ–≥–¥–∞ —ç—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–æ–π –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –ø–æ—ç—Ç–æ–º—É –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –∏–∑–±–µ–≥–∞—Ç—å —ç—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞, –µ—Å–ª–∏ –≤ —ç—Ç–æ–º –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.  –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —á–∞—Ç–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –∫–ª–∞–≤–∏—à–∏.
- –ò–Ω–æ–≥–¥–∞ —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –∫–ª–∞–≤–∏—à–∏. –ê–Ω–∏–º–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑.

–ß—Ç–æ–±—ã –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É, –≤–æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–∏–º–µ—Ä —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤—ã–∑–æ–≤–∞–º–∏ `console.log` –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–ª–µ–º, –∫–æ—Ç–æ—Ä–æ–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –≠—Ñ—Ñ–µ–∫—Ç–∞:

<Sandpack>

```js
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      console.log('–í—ã–∑–æ–≤ video.play()');
      ref.current.play();
    } else {
      console.log('–í—ã–∑–æ–≤ video.pause()');
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [text, setText] = useState('');
  return (
    <>
      <input value={text} onChange={e => setText(e.target.value)} />
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? '–ü–∞—É–∑–∞' : '–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

```css
input, button { display: block; margin-bottom: 20px; }
video { width: 250px; }
```

</Sandpack>

–í—ã –º–æ–∂–µ—Ç–µ —Å–∫–∞–∑–∞—Ç—å React **–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ –≠—Ñ—Ñ–µ–∫—Ç–∞**, —É–∫–∞–∑–∞–≤ –º–∞—Å—Å–∏–≤ *–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π* –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –≤—ã–∑–æ–≤–∞ `useEffect`. –ù–∞—á–Ω–∏—Ç–µ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—É—Å—Ç–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ `[]` –≤ –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã–π –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä –Ω–∞ 14-–π —Å—Ç—Ä–æ–∫–µ:

```js {3}
  useEffect(() => {
    // ...
  }, []);
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –æ—à–∏–±–∫—É, —Å–æ–æ–±—â–∞—é—â—É—é, —á—Ç–æ `—É React Hook useEffect –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: 'isPlaying'`:

<Sandpack>

```js
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      console.log('–í—ã–∑–æ–≤ video.play()');
      ref.current.play();
    } else {
      console.log('–í—ã–∑–æ–≤ video.pause()');
      ref.current.pause();
    }
  }, []); // –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [text, setText] = useState('');
  return (
    <>
      <input value={text} onChange={e => setText(e.target.value)} />
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? '–ü–∞—É–∑–∞' : '–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

```css
input, button { display: block; margin-bottom: 20px; }
video { width: 250px; }
```

</Sandpack>

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –∫–æ–¥ –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–≥–æ –≠—Ñ—Ñ–µ–∫—Ç–∞ *–∑–∞–≤–∏—Å–∏—Ç –æ—Ç* –ø—Ä–æ–ø—Å–∞ `isPlaying`, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –¥–µ–ª–∞—Ç—å, –Ω–æ —ç—Ç–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –Ω–µ –±—ã–ª–∞ —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω–∞. –ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É, –¥–æ–±–∞–≤—å—Ç–µ `isPlaying` –≤ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```js {2,7}
  useEffect(() => {
    if (isPlaying) { // –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–¥–µ—Å—å...
      // ...
    } else {
      // ...
    }
  }, [isPlaying]); // ...–ø–æ—ç—Ç–æ–º—É –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω –∑–¥–µ—Å—å!
```

–¢–µ–ø–µ—Ä—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±—ä—è–≤–ª–µ–Ω—ã, –ø–æ—ç—Ç–æ–º—É –æ—à–∏–±–∫–∏ –Ω–µ—Ç. –£–∫–∞–∑–∞–Ω–∏–µ `[isPlaying]` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –º–∞—Å—Å–∏–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≥–æ–≤–æ—Ä–∏—Ç React, —á—Ç–æ –æ–Ω –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤–∞—à–µ–≥–æ –≠—Ñ—Ñ–µ–∫—Ç–∞, –µ—Å–ª–∏ `isPlaying` –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–∞–∫–∏–º –∂–µ, –∫–∞–∫ –∏ –≤–æ –≤—Ä–µ–º—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –° —ç—Ç–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –≤ –ø–æ–ª–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –≠—Ñ—Ñ–µ–∫—Ç–∞, –Ω–æ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ/–ü–∞—É–∑–∞ ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç:

<Sandpack>

```js
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      console.log('–í—ã–∑–æ–≤ video.play()');
      ref.current.play();
    } else {
      console.log('–í—ã–∑–æ–≤ video.pause()');
      ref.current.pause();
    }
  }, [isPlaying]);

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [text, setText] = useState('');
  return (
    <>
      <input value={text} onChange={e => setText(e.target.value)} />
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? '–ü–∞—É–∑–∞' : '–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

```css
input, button { display: block; margin-bottom: 20px; }
video { width: 250px; }
```

</Sandpack>

–ú–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤. React –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –≠—Ñ—Ñ–µ–∫—Ç–∞ —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ *–≤—Å–µ* —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤–∞–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–º–µ—é—Ç —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–µ –∂–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–∞–∫ –∏ –≤–æ –≤—Ä–µ–º—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. React —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∏—Å–ø–æ–ª—å–∑—É—è —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ [`Object.is`](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Object/is). –°–º. [—Å–ø—Ä–∞–≤–∫—É –ø–æ `useEffect`](/reference/react/useEffect#reference), —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

**–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ "–≤—ã–±–∏—Ä–∞—Ç—å" —Å–≤–æ–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.** –í—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É –ª–∏–Ω—Ç–∏–Ω–≥–∞, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤–∞–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–æ–º—É, —á—Ç–æ –æ–∂–∏–¥–∞–µ—Ç React –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–¥–∞ –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã—è–≤–∏—Ç—å –º–Ω–æ–≥–∏–µ –æ—à–∏–±–∫–∏ –≤ –≤–∞—à–µ–º –∫–æ–¥–µ. –ï—Å–ª–∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –∫–∞–∫–æ–π-—Ç–æ –∫–æ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è, [*–∏–∑–º–µ–Ω–∏—Ç–µ —Å–∞–º –∫–æ–¥ —ç—Ñ—Ñ–µ–∫—Ç–∞* —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –Ω–µ "–Ω—É–∂–¥–∞–ª—Å—è" –≤ —ç—Ç–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.](/learn/lifecycle-of-reactive-effects#what-to-do-when-you-dont-want-to-re-synchronize)

<Pitfall>

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –±–µ–∑ –º–∞—Å—Å–∏–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Å *–ø—É—Å—Ç—ã–º* `[]` –º–∞—Å—Å–∏–≤–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ä–∞–∑–ª–∏—á–∞–µ—Ç—Å—è:

```js {3,7,11}
useEffect(() => {
  // –≠—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
});

useEffect(() => {
  // –≠—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ (–∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è)
}, []);

useEffect(() => {
  // –≠—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ *–∏ —Ç–∞–∫–∂–µ*, –µ—Å–ª–∏ a –∏–ª–∏ b –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
}, [a, b]);
```

–ú—ã –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ", –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ.

</Pitfall>

<DeepDive>

#### –ü–æ—á–µ–º—É ref –Ω–µ —É–∫–∞–∑–∞–Ω –≤ –º–∞—Å—Å–∏–≤–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π? {/*why-was-the-ref-omitted-from-the-dependency-array*/}

–≠—Ç–æ—Ç –≠—Ñ—Ñ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç _–∏_ `ref` _–∏_ `isPlaying`, –Ω–æ —Ç–æ–ª—å–∫–æ `isPlaying` –æ–±—ä—è–≤–ª–µ–Ω –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```js {9}
function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);
  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  }, [isPlaying]);
```

–≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –æ–±—ä–µ–∫—Ç `ref` –∏–º–µ–µ—Ç *—Å—Ç–∞–±–∏–ª—å–Ω—É—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å:* React –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ [–≤—ã –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∏—Ç–µ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç](/reference/react/useRef#returns) –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ `useRef` –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ. –û–Ω –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É —Å–∞–º –ø–æ —Å–µ–±–µ –Ω–µ –≤—ã–∑–æ–≤–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –≠—Ñ—Ñ–µ–∫—Ç–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –≤–∫–ª—é—á–∞–µ—Ç–µ –ª–∏ –≤—ã –µ–≥–æ –∏–ª–∏ –Ω–µ—Ç. –í–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–∂–µ –¥–æ–ø—É—Å—Ç–∏–º–æ:

```js {9}
function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);
  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  }, [isPlaying, ref]);
```

–§—É–Ω–∫—Ü–∏–∏ [`set`](/reference/react/useState#setstate), –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ `useState`, —Ç–∞–∫–∂–µ –∏–º–µ—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω—É—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å, –ø–æ—ç—Ç–æ–º—É –≤—ã —á–∞—Å—Ç–æ —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ –æ–Ω–∏ —Ç–æ–∂–µ –æ–ø—É—Å–∫–∞—é—Ç—Å—è –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –ï—Å–ª–∏ –ª–∏–Ω—Ç–µ—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –æ–ø—É—Å—Ç–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫, —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ.

–û–ø—É—Å–∫–∞–Ω–∏–µ –≤—Å–µ–≥–¥–∞-—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ª–∏–Ω—Ç–µ—Ä –º–æ–∂–µ—Ç "—É–≤–∏–¥–µ—Ç—å", —á—Ç–æ –æ–±—ä–µ–∫—Ç —Å—Ç–∞–±–∏–ª–µ–Ω. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ `ref` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –≤–∞–º –ø—Ä–∏–¥—ë—Ç—Å—è —É–∫–∞–∑–∞—Ç—å –µ–≥–æ –≤ –º–∞—Å—Å–∏–≤–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –û–¥–Ω–∞–∫–æ —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∑–Ω–∞—Ç—å, –≤—Å–µ–≥–¥–∞ –ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ `ref` –∏–ª–∏ —É—Å–ª–æ–≤–Ω–æ –ø–µ—Ä–µ–¥–∞—ë—Ç –æ–¥–∏–Ω –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö `ref`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤–∞—à –≠—Ñ—Ñ–µ–∫—Ç _–±—É–¥–µ—Ç_ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–æ–π `ref` –ø–µ—Ä–µ–¥–∞–Ω.

</DeepDive>

### –®–∞–≥ 3: –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏ {/*step-3-add-cleanup-if-needed*/}

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –¥—Ä—É–≥–æ–π –ø—Ä–∏–º–µ—Ä. –í—ã –ø–∏—à–µ—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ChatRoom`, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —á–∞—Ç–∞, –∫–æ–≥–¥–∞ –æ–Ω –ø–æ—è–≤–ª—è–µ—Ç—Å—è. –í–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω API `createConnection()`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –º–µ—Ç–æ–¥–∞–º–∏ `connect()` –∏ `disconnect()`. –ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –ø–æ–∫–∞ –æ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é?

–ù–∞—á–Ω–∏—Ç–µ —Å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ –≠—Ñ—Ñ–µ–∫—Ç–∞:

```js
useEffect(() => {
  const connection = createConnection();
  connection.connect();
});
```

–ü–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —á–∞—Ç—É –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ –±—ã–ª–æ –±—ã –º–µ–¥–ª–µ–Ω–Ω–æ, –ø–æ—ç—Ç–æ–º—É –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```js {4}
useEffect(() => {
  const connection = createConnection();
  connection.connect();
}, []);
```

**–ö–æ–¥ –≤–Ω—É—Ç—Ä–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–ø—Å–æ–≤ –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø–æ—ç—Ç–æ–º—É –≤–∞—à –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚Äî `[]` (–ø—É—Å—Ç–æ–π). –≠—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç React –æ —Ç–æ–º, —á—Ç–æ —ç—Ç–æ—Ç –∫–æ–¥ —Å–ª–µ–¥—É–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç "–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è", —Ç.–µ. –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑.**

–î–∞–≤–∞–π—Ç–µ –ø–æ–ø—Ä–æ–±—É–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–¥:

<Sandpack>

```js
import { useEffect } from 'react';
import { createConnection } from './chat.js';

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
  }, []);
  return <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —á–∞—Ç!</h1>;
}
```

```js src/chat.js
export function createConnection() {
  // –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
  return {
    connect() {
      console.log('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...');
    },
    disconnect() {
      console.log('‚ùå –û—Ç–∫–ª—é—á–µ–Ω–æ.');
    }
  };
}
```

```css
input { display: block; margin-bottom: 20px; }
```

</Sandpack>

–≠—Ç–æ—Ç –≠—Ñ—Ñ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, –ø–æ—ç—Ç–æ–º—É –≤—ã –º–æ–≥–ª–∏ –±—ã –æ–∂–∏–¥–∞—Ç—å, —á—Ç–æ `"‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..."` –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª—å –æ–¥–∏–Ω —Ä–∞–∑. **–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –µ—Å–ª–∏ –≤—ã –∑–∞–≥–ª—è–Ω–µ—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å, —Ç–æ —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ `"‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..."` –≤—ã–≤–æ–¥–∏—Ç—Å—è –¥–≤–∞–∂–¥—ã. –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?**

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ChatRoom` —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–≤–æ—ë –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `ChatRoom`. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `connection.connect()`. –ó–∞—Ç–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –¥—Ä—É–≥–æ–π —ç–∫—Ä–∞–Ω ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ù–∞—Å—Ç—Ä–æ–µ–∫. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ChatRoom` —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è. –ù–∞–∫–æ–Ω–µ—Ü, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –ù–∞–∑–∞–¥, –∏ `ChatRoom` —Å–Ω–æ–≤–∞ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è. –≠—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ —Å–æ–∑–¥–∞–Ω–∏—é –≤—Ç–æ—Ä–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –ø–µ—Ä–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–∫ –∏ –Ω–µ –±—ã–ª–æ –∑–∞–∫—Ä—ã—Ç–æ! –ü–æ –º–µ—Ä–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±—É–¥—É—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è.

–û—à–∏–±–∫–∏ –ø–æ–¥–æ–±–Ω–æ–≥–æ —Ä–æ–¥–∞ –ª–µ–≥–∫–æ —É–ø—É—Å—Ç–∏—Ç—å –±–µ–∑ —Ç—â–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ß—Ç–æ–±—ã –ø–æ–º–æ—á—å –≤–∞–º –±—ã—Å—Ç—Ä–æ –∏—Ö –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å, –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ React —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–¥–∏–Ω —Ä–∞–∑ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –µ–≥–æ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

–ù–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ —Ç–µ–º, —á—Ç–æ –ª–æ–≥ `"‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..."` –≤—ã–≤–æ–¥–∏—Ç—Å—è –¥–≤–∞–∂–¥—ã, –ø–æ–º–æ–≥–∞–µ—Ç –≤–∞–º –∑–∞–º–µ—Ç–∏—Ç—å –Ω–∞—Å—Ç–æ—è—â—É—é –ø—Ä–æ–±–ª–µ–º—É: –≤–∞—à –∫–æ–¥ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è.

–ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É, –≤–µ—Ä–Ω–∏—Ç–µ *—Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏* –∏–∑ –≤–∞—à–µ–≥–æ –≠—Ñ—Ñ–µ–∫—Ç–∞:

```js {4-6}
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, []);
```

React –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –≠—Ñ—Ñ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Å–Ω–æ–≤–∞, –∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è (—É–¥–∞–ª—è–µ—Ç—Å—è). –î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –∫–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞:

<Sandpack>

```js
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    return () => connection.disconnect();
  }, []);
  return <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —á–∞—Ç!</h1>;
}
```

```js src/chat.js
export function createConnection() {
  // –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
  return {
    connect() {
      console.log('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...');
    },
    disconnect() {
      console.log('‚ùå –û—Ç–∫–ª—é—á–µ–Ω–æ.');
    }
  };
}
```

```css
input { display: block; margin-bottom: 20px; }
```

</Sandpack>

–¢–µ–ø–µ—Ä—å –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Ç—Ä–∏ –ª–æ–≥–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

1. `"‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..."`
2. `"‚ùå –û—Ç–∫–ª—é—á–µ–Ω–æ."`
3. `"‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..."`

**–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.** –†–∞–∑–º–æ–Ω—Ç–∏—Ä—É—è –≤–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, React –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥—Ä—É–≥–æ–π —ç–∫—Ä–∞–Ω –∏ –æ–±—Ä–∞—Ç–Ω–æ –Ω–µ —Å–ª–æ–º–∞–µ—Ç –≤–∞—à –∫–æ–¥. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ, –∞ –∑–∞—Ç–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å! –ö–æ–≥–¥–∞ –≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏, –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–º–µ—Ç–Ω–æ–π —Ä–∞–∑–Ω–∏—Ü—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–µ–∂–¥—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –≠—Ñ—Ñ–µ–∫—Ç–∞ –æ–¥–∏–Ω —Ä–∞–∑ –∏ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º, –æ—á–∏—Å—Ç–∫–æ–π –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º. –ü–∞—Ä–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ React –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞—à –∫–æ–¥ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ ‚Äî –Ω–µ –ø—ã—Ç–∞–π—Ç–µ—Å—å —ç—Ç–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å!

**–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –≤—ã —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ `"‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..."` –≤—ã–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.** –†–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –≤–∞–º –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –≠—Ñ—Ñ–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ –æ—á–∏—Å—Ç–∫–µ. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫–ª—é—á–∏—Ç—å [Strict Mode](/reference/react/StrictMode), —á—Ç–æ–±—ã –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏—è –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –Ω–æ –º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –≤–∫–ª—é—á—ë–Ω–Ω—ã–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –Ω–∞—Ö–æ–¥–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫, –ø–æ–¥–æ–±–Ω—ã—Ö –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤—ã—à–µ.

## –ö–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å –¥–≤–æ–π–Ω—ã–º —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ–º –≠—Ñ—Ñ–µ–∫—Ç–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏? {/*how-to-handle-the-effect-firing-twice-in-development*/}

React –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –≤–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —á—Ç–æ–±—ã –Ω–∞—Ö–æ–¥–∏—Ç—å –æ—à–∏–±–∫–∏, –∫–∞–∫ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –ø—Ä–∏–º–µ—Ä–µ. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å –Ω–µ –≤ —Ç–æ–º, "–∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≠—Ñ—Ñ–µ–∫—Ç –æ–¥–∏–Ω —Ä–∞–∑", –∞ –≤ —Ç–æ–º, "–∫–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–π –≠—Ñ—Ñ–µ–∫—Ç, —á—Ç–æ–±—ã –æ–Ω —Ä–∞–±–æ—Ç–∞–ª –ø–æ—Å–ª–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è".**

–û–±—ã—á–Ω–æ –æ—Ç–≤–µ—Ç –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—á–∏—Å—Ç–∫–∏. –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏–ª–∏ –æ—Ç–º–µ–Ω—è—Ç—å —Ç–æ, —á—Ç–æ –¥–µ–ª–∞–ª –≠—Ñ—Ñ–µ–∫—Ç. –ü—Ä–∞–≤–∏–ª–æ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –¥–æ–ª–∂–µ–Ω –æ—Ç–ª–∏—á–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≠—Ñ—Ñ–µ–∫—Ç–∞ –æ–¥–∏–Ω —Ä–∞–∑ (–∫–∞–∫ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ) –æ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ _–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ‚Üí –æ—á–∏—Å—Ç–∫–∞ ‚Üí –Ω–∞—Å—Ç—Ä–æ–π–∫–∞_ (–∫–∞–∫ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏).

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≠—Ñ—Ñ–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –±—É–¥–µ—Ç–µ –ø–∏—Å–∞—Ç—å, –±—É–¥—É—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–¥–Ω–æ–º—É –∏–∑ –æ–±—â–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ –Ω–∏–∂–µ.

<Pitfall>

#### –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ—Ñ—ã, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ –≠—Ñ—Ñ–µ–∫—Ç–æ–≤. {/*dont-use-refs-to-prevent-effects-from-firing*/}

–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–∏ –¥–≤–æ–π–Ω–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –≠—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ ‚Äî —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `ref`, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≠—Ñ—Ñ–µ–∫—Ç–∞ –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –º–æ–≥–ª–∏ –±—ã "–∏—Å–ø—Ä–∞–≤–∏—Ç—å" –≤—ã—à–µ—É–ø–æ–º—è–Ω—É—Ç—É—é –æ—à–∏–±–∫—É —Å –ø–æ–º–æ—â—å—é `useRef`:

```js {1,3-4}
  const connectionRef = useRef(null);
  useEffect(() => {
    // üö© –≠—Ç–æ –Ω–µ –∏—Å–ø—Ä–∞–≤–∏—Ç –æ—à–∏–±–∫—É!!!
    if (!connectionRef.current) {
      connectionRef.current = createConnection();
      connectionRef.current.connect();
    }
  }, []);
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å "‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..." —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –Ω–æ –Ω–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É.

<<<<<<< HEAD
–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Ö–æ–¥–∏—Ç —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –∏ –∫–æ–≥–¥–∞ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è, —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –ü–æ –º–µ—Ä–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è, —Ç–∞–∫ –∂–µ –∫–∞–∫ –∏ –¥–æ "–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è".
=======
When the user navigates away, the connection still isn't closed and when they navigate back, a new connection is created. As the user navigates across the app, the connections would keep piling up, the same as it would before the "fix".
>>>>>>> d271a7ac11d2bf0d6e95ebdfacaf1038421f9be0

–ß—Ç–æ–±—ã —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –æ—à–∏–±–∫—É, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –≠—Ñ—Ñ–µ–∫—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª –æ–¥–∏–Ω —Ä–∞–∑. –≠—Ñ—Ñ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—á–∏—â–µ–Ω–æ, –∫–∞–∫ –≤ —Ä–µ—à–µ–Ω–∏–∏ –≤—ã—à–µ.

–°–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –Ω–∏–∂–µ, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–∏–ø–∏—á–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã.

</Pitfall>

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ-React –≤–∏–¥–∂–µ—Ç–∞–º–∏ {/*controlling-non-react-widgets*/}

–ò–Ω–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≤–∏–¥–∂–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ React. –î–æ–ø—É—Å—Ç–∏–º, –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã –Ω–∞ —Å–≤–æ—é —Å—Ç—Ä–∞–Ω–∏—Ü—É. –£ –Ω–µ–≥–æ –µ—Å—Ç—å –º–µ—Ç–æ–¥ `setZoomLevel()`, –∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è `zoomLevel` –≤ –≤–∞—à–µ–º React –∫–æ–¥–µ. –í–∞—à –≠—Ñ—Ñ–µ–∫—Ç –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```js
useEffect(() => {
  const map = mapRef.current;
  map.setZoomLevel(zoomLevel);
}, [zoomLevel]);
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –æ—á–∏—Å—Ç–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ React –≤—ã–∑–æ–≤–µ—Ç –≠—Ñ—Ñ–µ–∫—Ç –¥–≤–∞–∂–¥—ã, –Ω–æ —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—ã–∑–æ–≤ `setZoomLevel` –¥–≤–∞–∂–¥—ã —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ–º –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–º–Ω–æ–≥–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ —ç—Ç–æ –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–∞–∫ –∫–∞–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–µ–∂–∏–º–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ API –º–æ–≥—É—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–∑—ã–≤–∞—Ç—å –∏—Ö –¥–≤–∞–∂–¥—ã –ø–æ–¥—Ä—è–¥. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–µ—Ç–æ–¥ [`showModal`](https://developer.mozilla.org/ru/docs/Web/API/HTMLDialogElement/showModal) –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ [`<dialog>`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement) –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ –µ–≥–æ –¥–≤–∞–∂–¥—ã. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å –¥–∏–∞–ª–æ–≥:

```js {4}
useEffect(() => {
  const dialog = dialogRef.current;
  dialog.showModal();
  return () => dialog.close();
}, []);
```

–í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≠—Ñ—Ñ–µ–∫—Ç –≤—ã–∑–æ–≤–µ—Ç `showModal()`, –∑–∞—Ç–µ–º —Å—Ä–∞–∑—É `close()`, –∞ –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ `showModal()`. –≠—Ç–æ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ç–∞–∫–æ–µ –∂–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–∞–∫ –≤—ã–∑–æ–≤ `showModal()` –æ–¥–∏–Ω —Ä–∞–∑, –∫–∞–∫ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–µ–∂–∏–º–µ.

### –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è {/*subscribing-to-events*/}

–ï—Å–ª–∏ –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —á—Ç–æ-—Ç–æ, —Ñ—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –¥–æ–ª–∂–Ω–∞ –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —ç—Ç–æ–≥–æ:

```js {6}
useEffect(() => {
  function handleScroll(e) {
    console.log(window.scrollX, window.scrollY);
  }
  window.addEventListener('scroll', handleScroll);
  return () => window.removeEventListener('scroll', handleScroll);
}, []);
```

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≠—Ñ—Ñ–µ–∫—Ç –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å `addEventListener()`, –∑–∞—Ç–µ–º —Å—Ä–∞–∑—É `removeEventListener()`, –∞ –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ `addEventListener()` —Å —Ç–µ–º –∂–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞. –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—Å—ë –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫–∂–µ, –∫–∞–∫ –≤—ã–∑–æ–≤ `addEventListener()` –æ–¥–∏–Ω —Ä–∞–∑ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

### –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–π {/*triggering-animations*/}

–ï—Å–ª–∏ –≠—Ñ—Ñ–µ–∫—Ç –∞–Ω–∏–º–∏—Ä—É–µ—Ç —á—Ç–æ-—Ç–æ, —Ñ—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –¥–æ–ª–∂–Ω–∞ —Å–±—Ä–æ—Å–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –∫ –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º:

```js {4-6}
useEffect(() => {
  const node = ref.current;
  node.style.opacity = 1; // –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–Ω–∏–º–∞—Ü–∏—é 
  return () => {
    node.style.opacity = 0; // –°–±—Ä–æ—Å—å—Ç–µ –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é
  };
}, []);
```

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ `1`, –∑–∞—Ç–µ–º –≤ `0`, –∞ –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ –≤ `1`. –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –∏–º–µ—Ç—å —Ç–∞–∫–æ–µ –∂–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –≤–∏–¥–∏–º–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∫–∞–∫ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ `1` –Ω–∞–ø—Ä—è–º—É—é, —á—Ç–æ –∏ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–µ–∂–∏–º–µ. –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å—Ç–æ—Ä–æ–Ω–Ω—é—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∞–Ω–∏–º–∞—Ü–∏–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏, –≤–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –¥–æ–ª–∂–Ω–∞ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é —à–∫–∞–ª—É –≤ –µ—ë –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö {/*fetching-data*/}

–ï—Å–ª–∏ –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–ª—É—á–∞–µ—Ç —á—Ç–æ-—Ç–æ, —Ñ—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –¥–æ–ª–∂–Ω–∞ –ª–∏–±–æ [–ø—Ä–µ—Ä–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å](https://developer.mozilla.org/en-US/docs/Web/API/AbortController), –ª–∏–±–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```js {2,6,13-15}
useEffect(() => {
  let ignore = false;

  async function startFetching() {
    const json = await fetchTodos(userId);
    if (!ignore) {
      setTodos(json);
    }
  }

  startFetching();

  return () => {
    ignore = true;
  };
}, [userId]);
```

–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ "–æ—Ç–º–µ–Ω–∏—Ç—å" —Å–µ—Ç–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –±—ã–ª –≤—ã–ø–æ–ª–Ω–µ–Ω, –Ω–æ –≤–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –¥–æ–ª–∂–Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π _–±–æ–ª—å—à–µ –Ω–µ –∞–∫—Ç—É–∞–ª–µ–Ω_, –Ω–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ï—Å–ª–∏ `userId` –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Å `'Alice'` –Ω–∞ `'Bob'`, –æ—á–∏—Å—Ç–∫–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ—Ç–≤–µ—Ç –¥–ª—è `'Alice'` –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –ø—Ä–∏–¥—ë—Ç –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è `'Bob'`.

**–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ –¥–≤–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ –≤–∫–ª–∞–¥–∫–µ –°–µ—Ç—å.** –í —ç—Ç–æ–º –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –ø–ª–æ—Ö–æ–≥–æ. –° –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º –ø–µ—Ä–≤—ã–π –≠—Ñ—Ñ–µ–∫—Ç –±—É–¥–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—á–∏—â–µ–Ω, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –∫–æ–ø–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `ignore` –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ `true`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –¥–∞–∂–µ –µ—Å–ª–∏ –±—É–¥–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å, –æ–Ω –Ω–µ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –ø—Ä–æ–≤–µ—Ä–∫–µ `if (!ignore)`.

**–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–µ–∂–∏–º–µ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å.** –ï—Å–ª–∏ –≤—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–∏—Ç, –ª—É—á—à–∏–º –ø–æ–¥—Ö–æ–¥–æ–º –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∫—ç—à–∏—Ä—É–µ—Ç –∏—Ö –æ—Ç–≤–µ—Ç—ã –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:

```js
function TodoList() {
  const todos = useSomeDataLibrary(`/api/user/${userId}/todos`);
  // ...
```

–≠—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ —É–ª—É—á—à–∏—Ç –æ–ø—ã—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –Ω–æ –∏ —Å–¥–µ–ª–∞–µ—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–æ–ª–µ–µ –æ—Ç–∑—ã–≤—á–∏–≤—ã–º. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –Ω–∞–∂–∏–º–∞—é—â–∏–π –∫–Ω–æ–ø–∫—É –ù–∞–∑–∞–¥, –Ω–µ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è —Å–Ω–æ–≤–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –±—É–¥—É—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω—ã. –í—ã –º–æ–∂–µ—Ç–µ –ª–∏–±–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–∫–æ–π –∫—ç—à —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –≠—Ñ—Ñ–µ–∫—Ç–∞—Ö.

<DeepDive>

#### –ö–∞–∫–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ö–æ—Ä–æ—à–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –ø–æ–ª—É—á–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –≤ –≠—Ñ—Ñ–µ–∫—Ç–∞—Ö? {/*what-are-good-alternatives-to-data-fetching-in-effects*/}

–ó–∞–ø–∏—Å—å –≤—ã–∑–æ–≤–æ–≤ `fetch` –≤–Ω—É—Ç—Ä–∏ –≠—Ñ—Ñ–µ–∫—Ç–æ–≤ ‚Äî —ç—Ç–æ [–ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö](https://www.robinwieruch.de/react-hooks-fetch-data/), –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö. –û–¥–Ω–∞–∫–æ —ç—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ —Ç—Ä—É–¥–æ—ë–º–∫–∏–π –ø–æ–¥—Ö–æ–¥, –∏ –æ–Ω –∏–º–µ–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

- **–≠—Ñ—Ñ–µ–∫—Ç—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.** –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–∞—á–∞–ª—å–Ω—ã–π HTML, –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö. –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É –∫–æ–º–ø—å—é—Ç–µ—Ä—É –ø—Ä–∏–¥—ë—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–µ—Å—å JavaScript –∏ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ç–æ–ª—å–∫–æ —á—Ç–æ–±—ã –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å, —á—Ç–æ —Ç–µ–ø–µ—Ä—å –µ–º—É –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –≠—Ç–æ –Ω–µ –æ—á–µ–Ω—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.
- **–ü—Ä—è–º–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –≠—Ñ—Ñ–µ–∫—Ç–∞—Ö –º–æ–∂–µ—Ç –ª–µ–≥–∫–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Å–æ–∑–¥–∞–Ω–∏—é "—Å–µ—Ç–µ–≤—ã—Ö –≤–æ–¥–æ–ø–∞–¥–æ–≤".** –í—ã —Ä–µ–Ω–¥–µ—Ä–∏—Ç–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ, —Ä–µ–Ω–¥–µ—Ä–∏—Ç –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏ –∑–∞—Ç–µ–º –æ–Ω–∏ –Ω–∞—á–∏–Ω–∞—é—Ç –ø–æ–ª—É—á–∞—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ. –ï—Å–ª–∏ —Å–µ—Ç—å –Ω–µ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è, —ç—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.
- **–ü—Ä—è–º–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –≠—Ñ—Ñ–µ–∫—Ç–∞—Ö –æ–±—ã—á–Ω–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –Ω–µ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ—Ç–µ –∏ –Ω–µ –∫—ç—à–∏—Ä—É–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ.** –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, –∞ –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ —Å–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, –µ–º—É –ø—Ä–∏–¥—ë—Ç—Å—è —Å–Ω–æ–≤–∞ –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.
- **–≠—Ç–æ –Ω–µ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ.** –ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –≤—ã–∑–æ–≤–æ–≤ `fetch` –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫, —Ç–∞–∫–∏—Ö –∫–∞–∫ [—Å–æ—Å—Ç–æ—è–Ω–∏—è –≥–æ–Ω–∫–∏](https://maxrozen.com/race-conditions-fetching-data-react-with-useeffect), —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.

–≠—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ–Ω –¥–ª—è React. –û–Ω –ø—Ä–∏–º–µ–Ω–∏–º –∫ –ø–æ–ª—É—á–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å –ª—é–±–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π. –ö–∞–∫ –∏ —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π, –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ç—Ä–∏–≤–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–∞—á–µ–π, –ø–æ—ç—Ç–æ–º—É –º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–¥—Ö–æ–¥—ã:

<<<<<<< HEAD
- **–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ [—Ñ—Ä–µ–π–º–≤–æ—Ä–∫](/learn/start-a-new-react-project#production-grade-react-frameworks), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.** –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ React-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏–º–µ—é—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã –∏ –Ω–µ —Å—Ç—Ä–∞–¥–∞—é—Ç –æ—Ç –≤—ã—à–µ—É–ø–æ–º—è–Ω—É—Ç—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤.
- **–í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∫—ç—à–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞.** –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –≤–∫–ª—é—á–∞—é—Ç [React Query](https://tanstack.com/query/latest), [useSWR](https://swr.vercel.app/) –∏ [React Router 6.4+.](https://beta.reactrouter.com/en/main/start/overview) –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤—ã –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≠—Ñ—Ñ–µ–∫—Ç—ã –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º, –Ω–æ –¥–æ–±–∞–≤–∏—Ç–µ –ª–æ–≥–∏–∫—É, —á—Ç–æ–±—ã —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∏ –∏–∑–±–µ–∂–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –≤–æ–¥–æ–ø–∞–¥—ã (–ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞—è –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –ø–æ–¥–Ω–∏–º–∞—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞–Ω–Ω—ã–º –∫ –º–∞—Ä—à—Ä—É—Ç–∞–º).
=======
- **If you use a [framework](/learn/start-a-new-react-project#full-stack-frameworks), use its built-in data fetching mechanism.** Modern React frameworks have integrated data fetching mechanisms that are efficient and don't suffer from the above pitfalls.
- **Otherwise, consider using or building a client-side cache.** Popular open source solutions include [TanStack Query](https://tanstack.com/query/latest), [useSWR](https://swr.vercel.app/), and [React Router 6.4+.](https://beta.reactrouter.com/en/main/start/overview) You can build your own solution too, in which case you would use Effects under the hood, but add logic for deduplicating requests, caching responses, and avoiding network waterfalls (by preloading data or hoisting data requirements to routes).
>>>>>>> d271a7ac11d2bf0d6e95ebdfacaf1038421f9be0

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é –≤ –≠—Ñ—Ñ–µ–∫—Ç–∞—Ö, –µ—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –∏–∑ —ç—Ç–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –≤–∞–º –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç.

</DeepDive>

### –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ {/*sending-analytics*/}

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```js
useEffect(() => {
  logVisit(url); // –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST-–∑–∞–ø—Ä–æ—Å
}, [url]);
```

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `logVisit` –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –¥–≤–∞–∂–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ URL, –ø–æ—ç—Ç–æ–º—É —É –≤–∞—Å –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∂–µ–ª–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å. **–ú—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–¥ –∫–∞–∫ –µ—Å—Ç—å.** –ö–∞–∫ –∏ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö, –Ω–µ—Ç *–≤–∏–¥–∏–º–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é* —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –¥–≤–∞–∂–¥—ã. –° –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è, `logVisit` –Ω–µ –¥–æ–ª–∂–µ–Ω –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –ª–æ–≥–∏ —Å –º–∞—à–∏–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–∞–∂–∞–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–µ–∂–∏–º–µ. –í–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ –µ–≥–æ —Ñ–∞–π–ª, —Ç–∞–∫ —á—Ç–æ –æ–Ω –≤—Å–µ —Ä–∞–≤–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Å–µ—â–µ–Ω–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

**–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–µ–∂–∏–º–µ –Ω–µ –±—É–¥–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –ª–æ–≥–æ–≤ –ø–æ—Å–µ—â–µ–Ω–∏–π.**

–ß—Ç–æ–±—ã –æ—Ç–ª–∞–¥–∏—Ç—å —Å–æ–±—ã—Ç–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ, –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ (–∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–µ–∂–∏–º–µ) –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å [Strict Mode](/reference/react/StrictMode) –∏ –µ–≥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –¥–µ–π—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –≤–º–µ—Å—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤. –î–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ [–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API) –º–æ–≥—É—Ç –ø–æ–º–æ—á—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ –∫–∞–∫ –¥–æ–ª–≥–æ –æ–Ω–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã–º–∏

### –ù–µ –≠—Ñ—Ñ–µ–∫—Ç: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è {/*not-an-effect-initializing-the-application*/}

–ö–∞–∫–∞—è-—Ç–æ –ª–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–º–µ—Å—Ç–∏—Ç—å –µ—ë –≤–Ω–µ –≤–∞—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```js {2-3}
if (typeof window !== 'undefined') { // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Ä–∞–±–æ—Ç–∞–µ–º –ª–∏ –º—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
  checkAuthToken();
  loadDataFromLocalStorage();
}

function App() {
  // ...
}
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–∞–∫–∞—è –ª–æ–≥–∏–∫–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—Ä–∞—É–∑–µ—Ä–æ–º.

### –ù–µ –≠—Ñ—Ñ–µ–∫—Ç: –ü–æ–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ {/*not-an-effect-buying-a-product*/}

–ò–Ω–æ–≥–¥–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏, –Ω–µ—Ç —Å–ø–æ—Å–æ–±–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –≤–∏–¥–∏–º—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≠—Ñ—Ñ–µ–∫—Ç–∞ –¥–≤–∞–∂–¥—ã. –î–æ–ø—É—Å—Ç–∏–º, –≠—Ñ—Ñ–µ–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST-–∑–∞–ø—Ä–æ—Å, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –ø–æ–∫—É–ø–∫–æ–π –ø—Ä–æ–¥—É–∫—Ç–∞:

```js {2-3}
useEffect(() => {
  // üî¥ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: —ç—Ç–æ—Ç –≠—Ñ—Ñ–µ–∫—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–≤–∞–∂–¥—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –≤—ã—è–≤–ª—è—è –ø—Ä–æ–±–ª–µ–º—É –≤ –∫–æ–¥–µ.
  fetch('/api/buy', { method: 'POST' });
}, []);
```

–í—ã –±—ã –Ω–µ —Ö–æ—Ç–µ–ª–∏ –æ—Ñ–æ—Ä–º–ª—è—Ç—å –ø–æ–∫—É–ø–∫—É –ø—Ä–æ–¥—É–∫—Ç–∞ –¥–≤–∞–∂–¥—ã. –ò –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –≤—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–º–µ—â–∞—Ç—å —ç—Ç—É –ª–æ–≥–∏–∫—É –≤ –≠—Ñ—Ñ–µ–∫—Ç. –ß—Ç–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–π–¥—ë—Ç –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –∞ –∑–∞—Ç–µ–º –Ω–∞–∂–º—ë—Ç –ù–∞–∑–∞–¥? –≠—Ñ—Ñ–µ–∫—Ç —Å–Ω–æ–≤–∞ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç. –í—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞–≤–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å *–ø–æ—Å–µ—â–∞–µ—Ç* —Å—Ç—Ä–∞–Ω–∏—Ü—É; –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞—Ç—å –µ–≥–æ, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å *–Ω–∞–∂–∏–º–∞–µ—Ç* –∫–Ω–æ–ø–∫—É "–ö—É–ø–∏—Ç—å".

–ü–æ–∫—É–ø–∫–∞ –Ω–µ –≤—ã–∑–≤–∞–Ω–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º; –æ–Ω–∞ –≤—ã–∑–≤–∞–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º. –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É. **–£–¥–∞–ª–∏—Ç–µ –≠—Ñ—Ñ–µ–∫—Ç –∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –≤–∞—à –∑–∞–ø—Ä–æ—Å `/api/buy` –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å":**

```js {2-3}
  function handleClick() {
    // ‚úÖ –ü–æ–∫—É–ø–∫–∞ ‚Äî —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –≤—ã–∑–≤–∞–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º.
    fetch('/api/buy', { method: 'POST' });
  }
```

**–≠—Ç–∞ —Å–∏—Ç—É–∞—Ü–∏—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Ä—É—à–∞–µ—Ç –ª–æ–≥–∏–∫—É –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —ç—Ç–æ –∑–∞—á–∞—Å—Ç—É—é —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ—à–∏–±–æ–∫.** –° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–æ—Å—Ç–æ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –¥–æ–ª–∂–Ω–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–Ω–∞—á–∞–ª–∞ —É—Ö–æ–¥–∏—Ç –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ —Å—Å—ã–ª–∫–µ, –∞ –∑–∞—Ç–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –∏–∑–Ω–∞—á–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É –ù–∞–∑–∞–¥. React –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≤–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —ç—Ç–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É, —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É—è –∏—Ö –æ–¥–∏–Ω —Ä–∞–∑ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## –°–æ–±–∏—Ä–∞–µ–º –≤—Å—ë –≤–º–µ—Å—Ç–µ {/*putting-it-all-together*/}

–≠—Ç–æ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –≤–∞–º "–ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å", –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –≠—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ.

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/setTimeout), —á—Ç–æ–±—ã –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª—å —á–µ—Ä–µ–∑ —Ç—Ä–∏ —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≠—Ñ—Ñ–µ–∫—Ç–∞. –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç –æ–∂–∏–¥–∞—é—â–∏–π —Ç–∞–π–º–∞—É—Ç. –ù–∞—á–Ω–∏—Ç–µ —Å –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç":

<Sandpack>

```js
import { useState, useEffect } from 'react';

function Playground() {
  const [text, setText] = useState('a');

  useEffect(() => {
    function onTimeout() {
      console.log('‚è∞ ' + text);
    }

    console.log(`üîµ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥ "${text}"`);
    const timeoutId = setTimeout(onTimeout, 3000);

    return () => {
      console.log(`üü° –û—Ç–º–µ–Ω–∏—Ç—å –ª–æ–≥ "${text}"`);
      clearTimeout(timeoutId);
    };
  }, [text]);

  return (
    <>
      <label>
        –ß—Ç–æ –≤—ã–≤–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å:{' '}
        <input
          value={text}
          onChange={e => setText(e.target.value)}
        />
      </label>
      <h1>{text}</h1>
    </>
  );
}

export default function App() {
  const [show, setShow] = useState(false);
  return (
    <>
      <button onClick={() => setShow(!show)}>
        {show ? '–†–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å' : '–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å'} –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
      </button>
      {show && <hr />}
      {show && <Playground />}
    </>
  );
}
```

</Sandpack>

–°–Ω–∞—á–∞–ª–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ —Ç—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏: `–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥ "a"`, `–û—Ç–º–µ–Ω–∏—Ç—å –ª–æ–≥ "a"` –∏ —Å–Ω–æ–≤–∞ `–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥ "a"`. –ß–µ—Ä–µ–∑ —Ç—Ä–∏ —Å–µ–∫—É–Ω–¥—ã —Ç–∞–∫–∂–µ –ø–æ—è–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ `a`. –ö–∞–∫ –≤—ã —É–∑–Ω–∞–ª–∏ —Ä–∞–Ω–µ–µ, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–∞—Ä–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å/–æ—Ç–º–µ–Ω–∏—Ç—å –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ React –ø–æ–≤—Ç–æ—Ä–Ω–æ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–¥–∏–Ω —Ä–∞–∑ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –æ—á–∏—Å—Ç–∫—É.

–¢–µ–ø–µ—Ä—å –∏–∑–º–µ–Ω–∏—Ç–µ –≤–≤–æ–¥, —á—Ç–æ–±—ã –æ–Ω –≥–æ–≤–æ—Ä–∏–ª `abc`. –ï—Å–ª–∏ –≤—ã —Å–¥–µ–ª–∞–µ—Ç–µ —ç—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ `–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥ "ab"` —Å—Ä–∞–∑—É –∑–∞ –Ω–∏–º `–û—Ç–º–µ–Ω–∏—Ç—å –ª–æ–≥ "ab"` –∏ `–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥ "abc"`. **React –≤—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–µ—Ç –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –ø–µ—Ä–µ–¥ –≠—Ñ—Ñ–µ–∫—Ç–æ–º —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞.** –í–æ—Ç –ø–æ—á–µ–º—É, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã –±—ã—Å—Ç—Ä–æ –≤–≤–æ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç, –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –Ω–µ –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —Ç–∞–π–º–∞—É—Ç–∞. –ò–∑–º–µ–Ω–∏—Ç–µ –≤–≤–æ–¥ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏ –Ω–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –∫–æ–Ω—Å–æ–ª—å—é, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –æ—á–∏—â–∞—é—Ç—Å—è –≠—Ñ—Ñ–µ–∫—Ç—ã.

–í–≤–µ–¥–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞, –∞ –∑–∞—Ç–µ–º —Å—Ä–∞–∑—É –Ω–∞–∂–º–∏—Ç–µ "–†–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç". –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–∏—â–∞–µ—Ç –≠—Ñ—Ñ–µ–∫—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –ó–¥–µ—Å—å –æ–Ω–æ –æ—Ç–º–µ–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç–∞–π–º–∞—É—Ç –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω —É—Å–ø–µ–≤–∞–µ—Ç —Å—Ä–∞–±–æ—Ç–∞—Ç—å.

–ù–∞–∫–æ–Ω–µ—Ü, –∏–∑–º–µ–Ω–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã—à–µ –∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏, —á—Ç–æ–±—ã —Ç–∞–π–º–∞—É—Ç—ã –Ω–µ –æ—Ç–º–µ–Ω—è–ª–∏—Å—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –±—ã—Å—Ç—Ä–æ –≤–≤–µ—Å—Ç–∏ `abcde`. –ß—Ç–æ –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å —á–µ—Ä–µ–∑ —Ç—Ä–∏ —Å–µ–∫—É–Ω–¥—ã? –í—ã–≤–µ–¥–µ—Ç –ª–∏ `console.log(text)` –≤–Ω—É—Ç—Ä–∏ —Ç–∞–π–º–∞—É—Ç–∞ *–ø–æ—Å–ª–µ–¥–Ω–∏–π* `text` –∏ —Å–æ–∑–¥–∞—Å—Ç –ª–∏ –ø—è—Ç—å –ª–æ–≥–æ–≤ `abcde`? –ü–æ–ø—Ä–æ–±—É–π—Ç–µ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ—é –∏–Ω—Ç—É–∏—Ü–∏—é!

–ß–µ—Ä–µ–∑ —Ç—Ä–∏ —Å–µ–∫—É–Ω–¥—ã –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ª–æ–≥–æ–≤ (`a`, `ab`, `abc`, `abcd` –∏ `abcde`), –∞ –Ω–µ –ø—è—Ç—å –ª–æ–≥–æ–≤ `abcde`. **–ö–∞–∂–¥—ã–π –≠—Ñ—Ñ–µ–∫—Ç "–∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç" –∑–Ω–∞—á–µ–Ω–∏–µ `text` –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞.** –ù–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `text` –∏–∑–º–µ–Ω–∏–ª–æ—Å—å: —ç—Ñ—Ñ–µ–∫—Ç –∏–∑ —Ä–µ–Ω–¥–µ—Ä–∞ —Å `text = 'ab'` –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å `'ab'`. –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –≠—Ñ—Ñ–µ–∫—Ç—ã –∏–∑ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –ï—Å–ª–∏ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –æ [–∑–∞–º—ã–∫–∞–Ω–∏—è—Ö](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures).

<DeepDive>

#### –ö–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –≠—Ñ—Ñ–µ–∫—Ç—ã {/*each-render-has-its-own-effects*/}

–í—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å `useEffect` –∫–∞–∫ "–ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ" —á–∞—Å—Ç–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∫ –≤—ã—Ö–æ–¥–Ω—ã–º –¥–∞–Ω–Ω—ã–º —Ä–µ–Ω–¥–µ—Ä–∞. –û–±—Ä–∞—Ç–∏–º –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –≠—Ñ—Ñ–µ–∫—Ç:

```js
export default function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ {roomId}!</h1>;
}
```

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é.

#### –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä {/*initial-render*/}

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–µ—â–∞–µ—Ç `<ChatRoom roomId="general" />`. –î–∞–≤–∞–π—Ç–µ [–º—ã—Å–ª–µ–Ω–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–∏–º](/learn/state-as-a-snapshot#rendering-takes-a-snapshot-in-time) `'general'` –Ω–∞ –º–µ—Å—Ç–æ `roomId`:

```js
  // JSX –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (roomId = "general")
  return <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ general!</h1>;
```

**–≠—Ñ—Ñ–µ–∫—Ç *—Ç–∞–∫–∂–µ* —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–∞.** –≠—Ñ—Ñ–µ–∫—Ç –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è:

```js
  // –≠—Ñ—Ñ–µ–∫—Ç –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (roomId = "general")
  () => {
    const connection = createConnection('general');
    connection.connect();
    return () => connection.disconnect();
  },
  // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (roomId = "general")
  ['general']
```

React –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≠—Ñ—Ñ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —á–∞—Ç—É –≤ –∫–æ–º–Ω–∞—Ç–µ `'general'`.

#### –ü–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä —Å —Ç–µ–º–∏ –∂–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ {/*re-render-with-same-dependencies*/}

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ `<ChatRoom roomId="general" />` –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è. –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ JSX –æ—Å—Ç–∞—é—Ç—Å—è —Ç–µ–º–∏ –∂–µ:

```js
  // JSX –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (roomId = "general")
  return <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å general!</h1>;
```

React –≤–∏–¥–∏—Ç, —á—Ç–æ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä–µ–Ω–¥–µ—Ä–∞ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å, –ø–æ—ç—Ç–æ–º—É –æ–Ω –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç DOM.

–≠—Ñ—Ñ–µ–∫—Ç –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```js
  // –≠—Ñ—Ñ–µ–∫—Ç –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (roomId = "general")
  () => {
    const connection = createConnection('general');
    connection.connect();
    return () => connection.disconnect();
  },
  // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (roomId = "general")
  ['general']
```

React —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç `['general']` –∏–∑ –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ —Å `['general']` –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. **–ü–æ—Å–∫–æ–ª—å–∫—É –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã, React *–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç* –≠—Ñ—Ñ–µ–∫—Ç –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞.** –û–Ω –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω.

#### –ü–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä —Å –¥—Ä—É–≥–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ {/*re-render-with-different-dependencies*/}

–ó–∞—Ç–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–µ—â–∞–µ—Ç `<ChatRoom roomId="travel" />`. –ù–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—Ä—É–≥–æ–π JSX:

```js
  // JSX –¥–ª—è —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (roomId = "travel")
  return <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ travel!</h1>;
```

React –æ–±–Ω–æ–≤–ª—è–µ—Ç DOM, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å `"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ general"` –Ω–∞ `"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ travel"`.

–≠—Ñ—Ñ–µ–∫—Ç —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```js
  // –≠—Ñ—Ñ–µ–∫—Ç –¥–ª—è —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (roomId = "travel")
  () => {
    const connection = createConnection('travel');
    connection.connect();
    return () => connection.disconnect();
  },
  // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (roomId = "travel")
  ['travel']
```

React —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç `['travel']` –∏–∑ —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ —Å `['general']` –∏–∑ –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –û–¥–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è: `Object.is('travel', 'general')` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `false`. –≠—Ñ—Ñ–µ–∫—Ç –Ω–µ–ª—å–∑—è –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å.

**–ü—Ä–µ–∂–¥–µ —á–µ–º React —Å–º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≠—Ñ—Ñ–µ–∫—Ç —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞, –µ–º—É –Ω—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –≠—Ñ—Ñ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π _–≤—ã–ø–æ–ª–Ω–∏–ª—Å—è_.** –≠—Ñ—Ñ–µ–∫—Ç –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –±—ã–ª –ø—Ä–æ–ø—É—â–µ–Ω, –ø–æ—ç—Ç–æ–º—É React –¥–æ–ª–∂–µ–Ω –æ—á–∏—Å—Ç–∏—Ç—å –≠—Ñ—Ñ–µ–∫—Ç –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –ï—Å–ª–∏ –≤—ã –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–≤–µ—Ä—Ö –∫ –ø–µ—Ä–≤–æ–º—É —Ä–µ–Ω–¥–µ—Ä—É, –≤—ã —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç `disconnect()` –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏, —Å–æ–∑–¥–∞–Ω–Ω–æ–º —Å –ø–æ–º–æ—â—å—é `createConnection('general')`. –≠—Ç–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç —á–∞—Ç–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ `'general'`.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ React –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≠—Ñ—Ñ–µ–∫—Ç —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –û–Ω –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —á–∞—Ç—É –≤ –∫–æ–º–Ω–∞—Ç–µ `'travel'`.

#### –†–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ {/*unmount*/}

–ù–∞–∫–æ–Ω–µ—Ü, –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–¥–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É, –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ChatRoom` —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è. React –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≠—Ñ—Ñ–µ–∫—Ç–∞. –ü–æ—Å–ª–µ–¥–Ω–∏–π –≠—Ñ—Ñ–µ–∫—Ç –±—ã–ª –∏–∑ —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ `createConnection('travel')`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –æ—Ç –∫–æ–º–Ω–∞—Ç—ã `'travel'`.

#### –ü–æ–≤–µ–¥–µ–Ω–∏–µ, –¥–æ—Å—Ç—É–ø–Ω–æ–µ —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ {/*development-only-behaviors*/}

–ö–æ–≥–¥–∞ –≤–∫–ª—é—á—ë–Ω [Strict Mode](/reference/react/StrictMode), React –ø–æ–≤—Ç–æ—Ä–Ω–æ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ—Å–ª–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ DOM —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è). –≠—Ç–æ [–ø–æ–º–æ–≥–∞–µ—Ç –≤–∞–º –Ω–∞—Ö–æ–¥–∏—Ç—å –≠—Ñ—Ñ–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ –æ—á–∏—Å—Ç–∫–µ](#step-3-add-cleanup-if-needed) –∏ –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —Å—Ç–∞–¥–∏—è—Ö –≤—ã—è–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –≥–æ–Ω–∫–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, React –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≠—Ñ—Ñ–µ–∫—Ç—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ —Ñ–∞–π–ª –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –û–±–∞ —ç—Ç–∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

</DeepDive>

<Recap>

- –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–æ–±—ã—Ç–∏–π, –≠—Ñ—Ñ–µ–∫—Ç—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —Å–∞–º–∏–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º.
- –≠—Ñ—Ñ–µ–∫—Ç—ã –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –∫–∞–∫–æ–π-–ª–∏–±–æ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–æ–π (API —Ç—Ä–µ—Ç—å–∏—Ö —Å—Ç–æ—Ä–æ–Ω, —Å–µ—Ç—å –∏ —Ç.–¥.).
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≠—Ñ—Ñ–µ–∫—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (–≤–∫–ª—é—á–∞—è –Ω–∞—á–∞–ª—å–Ω—ã–π).
- React –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –≠—Ñ—Ñ–µ–∫—Ç, –µ—Å–ª–∏ –≤—Å–µ –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–º–µ—é—Ç —Ç–µ –∂–µ –∑–Ω–∞—á–µ–Ω–∏—è, —á—Ç–æ –∏ –≤–æ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.
- –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ "–≤—ã–±—Ä–∞—Ç—å" —Å–≤–æ–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –û–Ω–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∫–æ–¥–æ–º –≤–Ω—É—Ç—Ä–∏ –≠—Ñ—Ñ–µ–∫—Ç–∞.
- –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`[]`) —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç "–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—é" –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —Ç.–µ. –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –µ–≥–æ –Ω–∞ —ç–∫—Ä–∞–Ω.
- –í Strict Mode React –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–≤–∞–∂–¥—ã (—Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!), —á—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–∏ –≠—Ñ—Ñ–µ–∫—Ç—ã.
- –ï—Å–ª–∏ –≠—Ñ—Ñ–µ–∫—Ç –ª–æ–º–∞–µ—Ç—Å—è –∏–∑-–∑–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –≤–∞–º –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏.
- React –≤—ã–∑–æ–≤–µ—Ç –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –≠—Ñ—Ñ–µ–∫—Ç–∞ –∏ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

</Recap>

<Challenges>

#### –°—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–µ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ {/*focus-a-field-on-mount*/}

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —Ñ–æ—Ä–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<MyInput />`.

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ [`focus()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus) —ç–ª–µ–º–µ–Ω—Ç–∞ –≤–≤–æ–¥–∞, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã `MyInput` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–ª —Ñ–æ–∫—É—Å, –∫–æ–≥–¥–∞ –æ–Ω –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ. –£–∂–µ –µ—Å—Ç—å –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –Ω–æ –æ–Ω–∞ –Ω–µ —Å–æ–≤—Å–µ–º —Ä–∞–±–æ—Ç–∞–µ—Ç. –†–∞–∑–±–µ—Ä–∏—Ç–µ—Å—å, –ø–æ—á–µ–º—É –æ–Ω–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ —ç—Ç–æ. (–ï—Å–ª–∏ –≤—ã –∑–Ω–∞–∫–æ–º—ã —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `autoFocus`, –ø—Ä–∏—Ç–≤–æ—Ä–∏—Ç–µ—Å—å, —á—Ç–æ –µ–≥–æ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º —Ç—É –∂–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å –Ω—É–ª—è.)

<Sandpack>

```js src/MyInput.js active
import { useEffect, useRef } from 'react';

export default function MyInput({ value, onChange }) {
  const ref = useRef(null);

<<<<<<< HEAD
  // TODO: –≠—Ç–æ –Ω–µ —Å–æ–≤—Å–µ–º —Ä–∞–±–æ—Ç–∞–µ—Ç. –ò—Å–ø—Ä–∞–≤—å—Ç–µ —ç—Ç–æ.
  // ref.current.focus()    
=======
  // TODO: This doesn't quite work. Fix it.
  // ref.current.focus()
>>>>>>> d271a7ac11d2bf0d6e95ebdfacaf1038421f9be0

  return (
    <input
      ref={ref}
      value={value}
      onChange={onChange}
    />
  );
}
```

```js src/App.js hidden
import { useState } from 'react';
import MyInput from './MyInput.js';

export default function Form() {
  const [show, setShow] = useState(false);
  const [name, setName] = useState('Taylor');
  const [upper, setUpper] = useState(false);
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? '–°–∫—Ä—ã—Ç—å' : '–ü–æ–∫–∞–∑–∞—Ç—å'} —Ñ–æ—Ä–º—É</button>
      <br />
      <hr />
      {show && (
        <>
          <label>
            –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:
            <MyInput
              value={name}
              onChange={e => setName(e.target.value)}
            />
          </label>
          <label>
            <input
              type="checkbox"
              checked={upper}
              onChange={e => setUpper(e.target.checked)}
            />
            –°–¥–µ–ª–∞—Ç—å –∑–∞–≥–ª–∞–≤–Ω–æ–π
          </label>
          <p>–ü—Ä–∏–≤–µ—Ç, <b>{upper ? name.toUpperCase() : name}</b></p>
        </>
      )}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>


–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–∞–∂–º–∏—Ç–µ "–ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É" –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç —Ñ–æ–∫—É—Å (–ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –∏ –∫—É—Ä—Å–æ—Ä –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä—å). –ù–∞–∂–º–∏—Ç–µ "–°–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É" –∏ —Å–Ω–æ–≤–∞ "–ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É". –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Å–Ω–æ–≤–∞ –ø–æ–¥—Å–≤–µ—á–µ–Ω–æ.

`MyInput` –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∞—Ç—å —Ñ–æ–∫—É—Å _–ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏_, –∞ –Ω–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ, –Ω–∞–∂–º–∏—Ç–µ "–ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É", –∞ –∑–∞—Ç–µ–º –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –Ω–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ —á–µ–∫–±–æ–∫—Å "–°–¥–µ–ª–∞—Ç—å –∑–∞–≥–ª–∞–≤–Ω–æ–π". –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ —á–µ–∫–±–æ–∫—Å –Ω–µ –¥–æ–ª–∂–Ω–æ —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞ –≤—ã—à–µ.

<Solution>

–í—ã–∑–æ–≤ `ref.current.focus()` –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –Ω–µ–≤–µ—Ä–µ–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ *–ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç*. –ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–æ–ª–∂–Ω—ã –ª–∏–±–æ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π, –ª–∏–±–æ –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é `useEffect`. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç _–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è_ –ø–æ—è–≤–ª–µ–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∞ –Ω–µ –∫–∞–∫–∏–º-–ª–∏–±–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º, –ø–æ—ç—Ç–æ–º—É –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –ø–æ–º–µ—Å—Ç–∏—Ç—å –µ–≥–æ –≤ –≠—Ñ—Ñ–µ–∫—Ç.

–ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É, –æ–±–µ—Ä–Ω–∏—Ç–µ –≤—ã–∑–æ–≤ `ref.current.focus()` –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≠—Ñ—Ñ–µ–∫—Ç–∞. –ó–∞—Ç–µ–º, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ —ç—Ç–æ—Ç –≠—Ñ—Ñ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, –∞ –Ω–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –¥–æ–±–∞–≤—å—Ç–µ –∫ –Ω–µ–º—É –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ `[]` –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

<Sandpack>

```js src/MyInput.js active
import { useEffect, useRef } from 'react';

export default function MyInput({ value, onChange }) {
  const ref = useRef(null);

  useEffect(() => {
    ref.current.focus();
  }, []);

  return (
    <input
      ref={ref}
      value={value}
      onChange={onChange}
    />
  );
}
```

```js src/App.js hidden
import { useState } from 'react';
import MyInput from './MyInput.js';

export default function Form() {
  const [show, setShow] = useState(false);
  const [name, setName] = useState('Taylor');
  const [upper, setUpper] = useState(false);
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? 'Hide' : 'Show'} form</button>
      <br />
      <hr />
      {show && (
        <>
          <label>
            –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:
            <MyInput
              value={name}
              onChange={e => setName(e.target.value)}
            />
          </label>
          <label>
            <input
              type="checkbox"
              checked={upper}
              onChange={e => setUpper(e.target.checked)}
            />
            –°–¥–µ–ª–∞—Ç—å –∑–∞–≥–ª–∞–≤–Ω–æ–π
          </label>
          <p>–ü—Ä–∏–≤–µ—Ç, <b>{upper ? name.toUpperCase() : name}</b></p>
        </>
      )}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>

</Solution>

#### –°—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–µ —Å —É—Å–ª–æ–≤–∏–µ–º {/*focus-a-field-conditionally*/}

–≠—Ç–∞ —Ñ–æ—Ä–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –¥–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `<MyInput />`.

–ù–∞–∂–º–∏—Ç–µ "–ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É" –∏ –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤—Ç–æ—Ä–æ–µ –ø–æ–ª–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç —Ñ–æ–∫—É—Å. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –æ–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `<MyInput />` –ø—ã—Ç–∞—é—Ç—Å—è —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–µ –≤–Ω—É—Ç—Ä–∏. –ö–æ–≥–¥–∞ –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ `focus()` –¥–ª—è –¥–≤—É—Ö –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ –ø–æ–¥—Ä—è–¥, –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Å–µ–≥–¥–∞ "–≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç".

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ. –ü–µ—Ä–≤–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É `MyInput` —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –±—É–ª–µ–≤—ã–π –ø—Ä–æ–ø `shouldFocus`, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –≤ `true`. –ò–∑–º–µ–Ω–∏—Ç–µ –ª–æ–≥–∏–∫—É —Ç–∞–∫, —á—Ç–æ–±—ã `focus()` –≤—ã–∑—ã–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ø—Ä–æ–ø `shouldFocus`, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `MyInput`, —Ä–∞–≤–µ–Ω `true`.

<Sandpack>

```js src/MyInput.js active
import { useEffect, useRef } from 'react';

export default function MyInput({ shouldFocus, value, onChange }) {
  const ref = useRef(null);

  // TODO: –≤—ã–∑—ã–≤–∞–π—Ç–µ focus() —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ shouldFocus —Ä–∞–≤–Ω–æ true.
  useEffect(() => {
    ref.current.focus();
  }, []);

  return (
    <input
      ref={ref}
      value={value}
      onChange={onChange}
    />
  );
}
```

```js src/App.js hidden
import { useState } from 'react';
import MyInput from './MyInput.js';

export default function Form() {
  const [show, setShow] = useState(false);
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  const [upper, setUpper] = useState(false);
  const name = firstName + ' ' + lastName;
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? 'Hide' : 'Show'} form</button>
      <br />
      <hr />
      {show && (
        <>
          <label>
            –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:
            <MyInput
              value={firstName}
              onChange={e => setFirstName(e.target.value)}
              shouldFocus={true}
            />
          </label>
          <label>
            –í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É —Ñ–∞–º–∏–ª–∏—é:
            <MyInput
              value={lastName}
              onChange={e => setLastName(e.target.value)}
              shouldFocus={false}
            />
          </label>
          <p>–ü—Ä–∏–≤–µ—Ç, <b>{upper ? name.toUpperCase() : name}</b></p>
        </>
      )}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>

–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ, –Ω–∞–∂–∏–º–∞–π—Ç–µ "–ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É" –∏ "–°–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É" –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. –ö–æ–≥–¥–∞ —Ñ–æ—Ä–º–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, —Ç–æ–ª—å–∫–æ *–ø–µ—Ä–≤–æ–µ* –ø–æ–ª–µ –≤–≤–æ–¥–∞ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å —Ñ–æ–∫—É—Å. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç –ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ —Å `shouldFocus={true}`, –∞ –≤—Ç–æ—Ä–æ–µ –ø–æ–ª–µ —Å `shouldFocus={false}`. –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–±–∞ –ø–æ–ª—è –≤–≤–æ–¥–∞ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –≤—ã –º–æ–∂–µ—Ç–µ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç –≤ –æ–±–∞ –∏–∑ –Ω–∏—Ö.

<Hint>

–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –æ–±—ä—è–≤–ª—è—Ç—å –≠—Ñ—Ñ–µ–∫—Ç –ø–æ —É—Å–ª–æ–≤–∏—é, –Ω–æ –≤–∞—à –≠—Ñ—Ñ–µ–∫—Ç –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å —É—Å–ª–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É.

</Hint>

<Solution>

–ü–æ–º–µ—Å—Ç–∏—Ç–µ —É—Å–ª–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É –≤–Ω—É—Ç—Ä—å –≠—Ñ—Ñ–µ–∫—Ç–∞. –í–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —É–∫–∞–∑–∞—Ç—å `shouldFocus` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ –≠—Ñ—Ñ–µ–∫—Ç–∞. (–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `shouldFocus` –¥–ª—è –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –ø–æ–ª—è –≤–≤–æ–¥–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è —Å `false` –Ω–∞ `true`, –æ–Ω–æ –ø–æ–ª—É—á–∏—Ç —Ñ–æ–∫—É—Å –ø–æ—Å–ª–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.)

<Sandpack>

```js src/MyInput.js active
import { useEffect, useRef } from 'react';

export default function MyInput({ shouldFocus, value, onChange }) {
  const ref = useRef(null);

  useEffect(() => {
    if (shouldFocus) {
      ref.current.focus();
    }
  }, [shouldFocus]);

  return (
    <input
      ref={ref}
      value={value}
      onChange={onChange}
    />
  );
}
```

```js src/App.js hidden
import { useState } from 'react';
import MyInput from './MyInput.js';

export default function Form() {
  const [show, setShow] = useState(false);
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  const [upper, setUpper] = useState(false);
  const name = firstName + ' ' + lastName;
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? 'Hide' : 'Show'} form</button>
      <br />
      <hr />
      {show && (
        <>
          <label>
            –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:
            <MyInput
              value={firstName}
              onChange={e => setFirstName(e.target.value)}
              shouldFocus={true}
            />
          </label>
          <label>
            –í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É —Ñ–∞–º–∏–ª–∏—é:
            <MyInput
              value={lastName}
              onChange={e => setLastName(e.target.value)}
              shouldFocus={false}
            />
          </label>
          <p>–ü—Ä–∏–≤–µ—Ç, <b>{upper ? name.toUpperCase() : name}</b></p>
        </>
      )}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>

</Solution>

#### –ò—Å–ø—Ä–∞–≤—å—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª, –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–≤–∞–∂–¥—ã {/*fix-an-interval-that-fires-twice*/}

–≠—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Counter` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É. –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç [`setInterval`](https://developer.mozilla.org/en-US/docs/Web/API/setInterval). –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ `onTick` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É. –§—É–Ω–∫—Ü–∏—è `onTick` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫.

–û–¥–Ω–∞–∫–æ –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É, –æ–Ω —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã. –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç? –ù–∞–π–¥–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ –µ—ë.

<Hint>

–ò–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ `setInterval` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ [`clearInterval`](https://developer.mozilla.org/en-US/docs/Web/API/clearInterval), —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª.

</Hint>

<Sandpack>

```js src/Counter.js active
import { useState, useEffect } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    function onTick() {
      setCount(c => c + 1);
    }

    setInterval(onTick, 1000);
  }, []);

  return <h1>{count}</h1>;
}
```

```js src/App.js hidden
import { useState } from 'react';
import Counter from './Counter.js';

export default function Form() {
  const [show, setShow] = useState(false);
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? '–°–∫—Ä—ã—Ç—å' : '–ü–æ–∫–∞–∑–∞—Ç—å'} —Å—á—ë—Ç—á–∏–∫</button>
      <br />
      <hr />
      {show && <Counter />}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>

<Solution>

–ö–æ–≥–¥–∞ [Strict Mode](/reference/react/StrictMode) –≤–∫–ª—é—á—ë–Ω (–∫–∞–∫ –≤ –ø–µ—Å–æ—á–Ω–∏—Ü–∞—Ö –Ω–∞ —ç—Ç–æ–º —Å–∞–π—Ç–µ), React –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–Ω–æ–≤–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã, –∏ –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É —Å—á—ë—Ç—á–∏–∫ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É.

–û–¥–Ω–∞–∫–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ React –Ω–µ —è–≤–ª—è–µ—Ç—Å—è *–ø—Ä–∏—á–∏–Ω–æ–π* –æ—à–∏–±–∫–∏: –æ—à–∏–±–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∫–æ–¥–µ. –ü–æ–≤–µ–¥–µ–Ω–∏–µ React –¥–µ–ª–∞–µ—Ç –æ—à–∏–±–∫—É –±–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω–æ–π. –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –≤ —Ç–æ–º, —á—Ç–æ —ç—Ç–æ—Ç —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å, –Ω–æ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–æ—Å–æ–± –µ–≥–æ –æ—á–∏—Å—Ç–∫–∏.

–ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–¥, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π `setInterval`, –∏ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏ —Å –ø–æ–º–æ—â—å—é [`clearInterval`](https://developer.mozilla.org/en-US/docs/Web/API/clearInterval):

<Sandpack>

```js src/Counter.js active
import { useState, useEffect } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    function onTick() {
      setCount(c => c + 1);
    }

    const intervalId = setInterval(onTick, 1000);
    return () => clearInterval(intervalId);
  }, []);

  return <h1>{count}</h1>;
}
```

```js src/App.js hidden
import { useState } from 'react';
import Counter from './Counter.js';

export default function App() {
  const [show, setShow] = useState(false);
  return (
    <>
      <button onClick={() => setShow(s => !s)}>{show ? '–°–∫—Ä—ã—Ç—å' : '–ü–æ–∫–∞–∑–∞—Ç—å'} —Å—á—ë—Ç—á–∏–∫</button>
      <br />
      <hr />
      {show && <Counter />}
    </>
  );
}
```

```css
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 20px;
}

body {
  min-height: 150px;
}
```

</Sandpack>

–í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ React –≤—Å–µ —Ä–∞–≤–Ω–æ –∑–∞–Ω–æ–≤–æ —Å–º–æ–Ω—Ç–∏—Ä—É–µ—Ç –≤–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–¥–∏–Ω —Ä–∞–∑, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –æ—á–∏—Å—Ç–∫—É. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ `setInterval`, —Å—Ä–∞–∑—É –∑–∞ –∫–æ—Ç–æ—Ä—ã–º –ø–æ—Å–ª–µ–¥—É–µ—Ç `clearInterval`, –∏ —Å–Ω–æ–≤–∞ `setInterval`. –í –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤—ã–∑–æ–≤ `setInterval`. –ü–æ–≤–µ–¥–µ–Ω–∏–µ, –≤–∏–¥–∏–º–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º: —Å—á—ë—Ç—á–∏–∫ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É.

</Solution>

#### –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞ {/*fix-fetching-inside-an-effect*/}

–≠—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –±–∏–æ–≥—Ä–∞—Ñ–∏—é –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞. –û–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç –±–∏–æ–≥—Ä–∞—Ñ–∏—é, –≤—ã–∑—ã–≤–∞—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `fetchBio(person)` –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ `person` –∏–∑–º–µ–Ω—è–µ—Ç—Å—è. –≠—Ç–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise), –∫–æ—Ç–æ—Ä—ã–π –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫—É. –ö–æ–≥–¥–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –æ–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç `setBio`, —á—Ç–æ–±—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É –ø–æ–¥ –≤—ã–ø–∞–¥–∞—é—â–∏–º —Å–ø–∏—Å–∫–æ–º.

<Sandpack>

{/* not the most efficient, but this validation is enabled in the linter only, so it's fine to ignore it here since we know what we're doing */}
```js {expectedErrors: {'react-compiler': [9]}} src/App.js
import { useState, useEffect } from 'react';
import { fetchBio } from './api.js';

export default function Page() {
  const [person, setPerson] = useState('Alice');
  const [bio, setBio] = useState(null);

  useEffect(() => {
    setBio(null);
    fetchBio(person).then(result => {
      setBio(result);
    });
  }, [person]);

  return (
    <>
      <select value={person} onChange={e => {
        setPerson(e.target.value);
      }}>
        <option value="Alice">Alice</option>
        <option value="Bob">Bob</option>
        <option value="Taylor">Taylor</option>
      </select>
      <hr />
      <p><i>{bio ?? '–ó–∞–≥—Ä—É–∑–∫–∞...'}</i></p>
    </>
  );
}
```

```js src/api.js hidden
export async function fetchBio(person) {
  const delay = person === 'Bob' ? 2000 : 200;
  return new Promise(resolve => {
    setTimeout(() => {
      resolve('–ü–µ—Ä—Å–æ–Ω–∞–∂ —ç—Ç–æ–π –±–∏–æ–≥—Ä–∞—Ñ–∏–∏ ‚Äî ' + person);
    }, delay);
  })
}

```

</Sandpack>


–í —ç—Ç–æ–º –∫–æ–¥–µ –µ—Å—Ç—å –æ—à–∏–±–∫–∞. –ù–∞—á–Ω–∏—Ç–µ —Å –≤—ã–±–æ—Ä–∞ "Alice". –ó–∞—Ç–µ–º –≤—ã–±–µ—Ä–∏—Ç–µ "Bob", –∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã–±–µ—Ä–∏—Ç–µ "Taylor". –ï—Å–ª–∏ –≤—ã —Å–¥–µ–ª–∞–µ—Ç–µ —ç—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ, –≤—ã –∑–∞–º–µ—Ç–∏—Ç–µ —ç—Ç—É –æ—à–∏–±–∫—É: "Taylor" –≤—ã–±—Ä–∞–Ω, –Ω–æ –≤ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–µ –Ω–∏–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–æ "–ü–µ—Ä—Å–æ–Ω–∞–∂ —ç—Ç–æ–π –±–∏–æ–≥—Ä–∞—Ñ–∏–∏ ‚Äî Bob".

–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç? –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫—É –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞.

<Hint>

–ï—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç —á—Ç–æ-—Ç–æ, –µ–º—É –æ–±—ã—á–Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—á–∏—Å—Ç–∫–∞.

</Hint>

<Solution>

–ß—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É, —Å–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:

- –í—ã–±–æ—Ä `'Bob'` –∑–∞–ø—É—Å–∫–∞–µ—Ç `fetchBio('Bob')`
- –í—ã–±–æ—Ä `'Taylor'` –∑–∞–ø—É—Å–∫–∞–µ—Ç `fetchBio('Taylor')`
- **–ü–æ–ª—É—á–µ–Ω–∏–µ `'Taylor'` –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è *–¥–æ* –ø–æ–ª—É—á–µ–Ω–∏—è `'Bob'`**
- –≠—Ñ—Ñ–µ–∫—Ç –æ—Ç —Ä–µ–Ω–¥–µ—Ä–∞ `'Taylor'` –≤—ã–∑—ã–≤–∞–µ—Ç `setBio('–ü–µ—Ä—Å–æ–Ω–∞–∂ —ç—Ç–æ–π –±–∏–æ–≥—Ä–∞—Ñ–∏–∏ ‚Äî Taylor')`
- –ü–æ–ª—É—á–µ–Ω–∏–µ `'Bob'` –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
- –≠—Ñ—Ñ–µ–∫—Ç –æ—Ç —Ä–µ–Ω–¥–µ—Ä–∞ `'Bob'` –≤—ã–∑—ã–≤–∞–µ—Ç `setBio('–ü–µ—Ä—Å–æ–Ω–∞–∂ —ç—Ç–æ–π –±–∏–æ–≥—Ä–∞—Ñ–∏–∏ ‚Äî Bob')`

–í–æ—Ç –ø–æ—á–µ–º—É –≤—ã –≤–∏–¥–∏—Ç–µ –±–∏–æ–≥—Ä–∞—Ñ–∏—é –ë–æ–±–∞, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –≤—ã–±—Ä–∞–Ω–∞ –¢–µ–π–ª–æ—Ä. –û—à–∏–±–∫–∏ —Ç–∞–∫–æ–≥–æ —Ä–æ–¥–∞ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è [–≥–æ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π](https://ru.wikipedia.org/wiki/%D0%A1%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5_%D0%B3%D0%BE%D0%BD%D0%BA%D0%B8), –ø–æ—Ç–æ–º—É —á—Ç–æ –¥–≤–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ "—Å–æ—Ä–µ–≤–Ω—É—é—Ç—Å—è" –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º, –∏ –æ–Ω–∏ –º–æ–≥—É—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –≤ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.

–ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–∏ –≥–æ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π, –¥–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏:

<Sandpack>

{/* not the most efficient, but this validation is enabled in the linter only, so it's fine to ignore it here since we know what we're doing */}
```js {expectedErrors: {'react-compiler': [9]}} src/App.js
import { useState, useEffect } from 'react';
import { fetchBio } from './api.js';

export default function Page() {
  const [person, setPerson] = useState('Alice');
  const [bio, setBio] = useState(null);
  useEffect(() => {
    let ignore = false;
    setBio(null);
    fetchBio(person).then(result => {
      if (!ignore) {
        setBio(result);
      }
    });
    return () => {
      ignore = true;
    }
  }, [person]);

  return (
    <>
      <select value={person} onChange={e => {
        setPerson(e.target.value);
      }}>
        <option value="Alice">Alice</option>
        <option value="Bob">Bob</option>
        <option value="Taylor">Taylor</option>
      </select>
      <hr />
      <p><i>{bio ?? '–ó–∞–≥—Ä—É–∑–∫–∞...'}</i></p>
    </>
  );
}
```

```js src/api.js hidden
export async function fetchBio(person) {
  const delay = person === 'Bob' ? 2000 : 200;
  return new Promise(resolve => {
    setTimeout(() => {
      resolve('–ü–µ—Ä—Å–æ–Ω–∞–∂ —ç—Ç–æ–π –±–∏–æ–≥—Ä–∞—Ñ–∏–∏ ‚Äî ' + person);
    }, delay);
  })
}

```

</Sandpack>

–£ –∫–∞–∂–¥–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ —Ä–µ–Ω–¥–µ—Ä–∞ –µ—Å—Ç—å —Å–≤–æ—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `ignore`. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `ignore` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ `false`. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –æ—á–∏—â–∞–µ—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ –¥—Ä—É–≥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞), –µ–≥–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `ignore` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `true`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ç–µ–ø–µ—Ä—å –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã. –¢–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –±—É–¥–µ—Ç –∏–º–µ—Ç—å `ignore`, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –≤ `false`, –ø–æ—ç—Ç–æ–º—É –æ–Ω –≤—ã–∑–æ–≤–µ—Ç `setBio(result)`. –ü—Ä–æ—à–ª—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –±—ã–ª–∏ –æ—á–∏—â–µ–Ω—ã, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–≤–µ—Ä–∫–∞ `if (!ignore)` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –∏—Ö –≤—ã–∑–æ–≤ `setBio`:

- –í—ã–±–æ—Ä `'Bob'` –∑–∞–ø—É—Å–∫–∞–µ—Ç `fetchBio('Bob')`
- –í—ã–±–æ—Ä `'Taylor'` –∑–∞–ø—É—Å–∫–∞–µ—Ç `fetchBio('Taylor')` **–∏ –æ—á–∏—â–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç**
- –ü–æ–ª—É—á–µ–Ω–∏–µ `'Taylor'` –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è *–¥–æ* –ø–æ–ª—É—á–µ–Ω–∏—è `'Bob'`
- –≠—Ñ—Ñ–µ–∫—Ç –æ—Ç —Ä–µ–Ω–¥–µ—Ä–∞ `'Taylor'` –≤—ã–∑—ã–≤–∞–µ—Ç `setBio('–ü–µ—Ä—Å–æ–Ω–∞–∂ —ç—Ç–æ–π –±–∏–æ–≥—Ä–∞—Ñ–∏–∏ ‚Äî Taylor')`
- –ü–æ–ª—É—á–µ–Ω–∏–µ `'Bob'` –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
- –≠—Ñ—Ñ–µ–∫—Ç –æ—Ç —Ä–µ–Ω–¥–µ—Ä–∞ `'Bob'` **–Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –µ–≥–æ —Ñ–ª–∞–≥ `ignore` –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `true`**

–í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ API-–∑–∞–ø—Ä–æ—Å–∞, –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [`AbortController`](https://developer.mozilla.org/ru/docs/Web/API/AbortController) –¥–ª—è –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã. –û–¥–Ω–∞–∫–æ —ç—Ç–æ–≥–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å—Å—è –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–π –≥–æ–Ω–∫–∏. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —à–∞–≥–∏, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —è–≤–Ω–æ–≥–æ —Ñ–ª–∞–≥–∞, —Ç–∞–∫–æ–≥–æ –∫–∞–∫ `ignore`, —è–≤–ª—è–µ—Ç—Å—è —Å–∞–º—ã–º –Ω–∞–¥—ë–∂–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã.

</Solution>

</Challenges>
